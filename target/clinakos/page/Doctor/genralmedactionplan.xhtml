<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="../templates/ui.xhtml">

<h:body onload="#{dashBoardManageBean.setgenmedplanIndex()}">

	<f:view contentType="text/html">
		<h:head>
			<f:facet name="first">
				<meta http-equiv="X-UA-Compatible" content="EmulateIE8" />
				<meta content='text/html; charset=UTF-8' http-equiv="Content-Type" />
				<title><h:outputText value="#{msg.clinakos}" /></title>
			</f:facet>
			<link type="text/css" rel="stylesheet" href="../../CSS/style.css" />
			<script language="javascript" src="../js/basicMethod.js"></script>
			<script type="text/javascript" language="javascript">
			$(document).ready(function() {
		        noBack();
		        roleBasedSecurityToDrugDoseCurve();
		   });

		   function noBack() {
			   window.location.hash="no-back-button";
				window.location.hash="Again-No-back-button";//again because google chrome don't insert first hash into history
				window.onhashchange=function(){window.location.hash="";} 
		       }

		  
		   function roleBasedSecurityToDrugDoseCurve(){
			    var map_drugDoseCurve= '${userManageBean.rolePrivillegeUtil.isEnable('map_drugDoseCurve')}';
			   
			   if(map_drugDoseCurve=="true"){
				   document.getElementById('map_drugDoseCurve').style.display='block';
				    }
				    else{
				    document.getElementById('map_drugDoseCurve').style.display='none';
					    } 
			   }
		   
			function labComplete(xhr, status, args){
				if(args.selectedLab==true){
					searchLabMAPDialog.hide();
					editGenericMedicalActionPlan.show();
					if(args.validateMAP==true){
						medPlanExistsWidgetVar.show();
					}
					}
			}
		function handleSearchLab(xhr, status, args){
			if(args.searchResultSet==true){
				searchLabMAPDialog.show();
				}
			}

		 
		 function showBlockUI(){
				//	alert("block UI show");
					blockUI.show();
					} 
		 
		 function hideBlockUI(){
				//	alert("block UI hide");
					blockUI.hide();
					}
		 
		 function onmedplanclick(){
			 document.getElementById('newGenericMedPlanFormIdforfilterId:medplanwithout_diagonosesId').click();
			
					}
		 
		 function onmedplanclickforinr() {
			 
			 document.getElementById('newGenericMedPlanFormIdforfilterId:medplanwith_graeter_inrId').click();	
		}
			
		
		 function genericMedActionPlanComplete(xhr,status,args){
				if(args.savedOrNotDb==true){
					editGenericMedicalActionPlan.hide();
					
					/* growlMsg.show([{summary:'', detail: 'Med Action Plan Saved Successfully', severity: 'info'}]) */
					
					
					
					}
				else{
					editGenericMedicalActionPlan.show();
					}
				}
</script>
		</h:head>

		<p:layout fullPage="true">
		
		

			<!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> DOCTOR HEADER >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>  -->
			<p:layoutUnit position="north" size="93" minSize="60">
				<ui:include src="doctorHeader.xhtml" />
			</p:layoutUnit>
			<!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> BOTTOM INCLUDE >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>  -->

			<p:layoutUnit id="bottom" position="south" size="24">

				<ui:include src="../core/footer.xhtml"></ui:include>

			</p:layoutUnit>

			<!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> LEFT INCLUDE >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>  -->

			<p:layoutUnit id="left" position="west" size="0" closable="false"
				collapsible="true" minSize="0" style="border:none;">
				  <ui:include src="anticoagleftmenu.xhtml">
				</ui:include>
			</p:layoutUnit>



			<!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> CENTER LAYOUT >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>  -->

			<p:layoutUnit position="center" resizable="true">
			<h:form id="msgVarId">
			 <p:growl id="growlMsgId" showDetail="true"  widgetVar="growlMsgWidgetVar" sticky="false"/>
			 </h:form>
			
					<p:accordionPanel dynamic="true" activeIndex="1">
						<p:tab
							title="#{dashBoardManageBean.userLoginDetail.firstName} #{dashBoardManageBean.userLoginDetail.lastName}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #{dashBoardManageBean.userLoginDetail.age} yo #{dashBoardManageBean.userLoginDetail.gender}">

							<ui:include src="../Doctor/patientDetailsHeader.xhtml"></ui:include>
						</p:tab>
					</p:accordionPanel>
			<!--Notes section:Start  -->
			
			
			
			
			<table width="100%" style="margin-top: 10px;" class="secContentBorder" cellpadding="0" cellspacing="0">
					
					<!-- 	<tr>
							<td class="secHeadPart">#{msg.med_action_plan_label}</td>
						</tr>
						<tr height="15px" class="secContentBorder">
						<td></td>
						</tr> -->
						<tr>
						 <td class="secHeadPart">	#{msg.notes}</td>
						</tr>
						<tr class="secContentBorder">
						 <td>
								<!--Med Action Plans section:Start  -->
							
								<!-- <fieldset  class="dataField" style="width:98%;">
									<legend class="legendField">#{msg.med_action_plan_label}</legend>
									Notes Section -->
							<!-- <fieldset  class="dataField" style="width:98%;">
									<legend class="legendField">#{msg.notes}</legend> -->
									<h:form id="alertNotes" prependId="false">
							<table>
                	<tr valign="top">
                		<td>
									<ui:repeat var="alertMedPlans" value="#{patientMedicineManageBean.alertMedActionPlans}" >
				                 <h:graphicImage value="./../../Images/red1.jpg" height="12px" width="20px" id="highSeverityLevelToolNotesId" rendered="#{alertMedPlans.severityLevel eq 'High'}" />
                                 <h:graphicImage value="./../../Images/orange1.jpg" height="12px" width="20px" id="midSeverityLevelToolNotesId" rendered="#{alertMedPlans.severityLevel eq 'Medium'}" />
                                  <h:graphicImage value="./../../Images/green1.jpg" height="12px" width="20px" id="lowSeverityLevelToolNotesId" rendered="#{alertMedPlans.severityLevel eq 'Low'}" />
                     
                   <h:outputText  value=" #{alertMedPlans.labType}" />&nbsp;<h:outputText value="#{alertMedPlans.labResultValue}" />&nbsp;<h:outputText value="#{alertMedPlans.labUnit}" />
                    <!--  <h:outputText value=" Value " /> -->
                     <h:outputText value=" on " />   
                     <h:outputText value=" #{alertMedPlans.labDateResult}" /> 
                     <h:outputText value=" for " />    
                     <h:outputText value="#{alertMedPlans.drugName}" />&nbsp;    
                     <h:outputText value="with goal " /> 
                      <h:outputText value="#{alertMedPlans.lowRangeSymbol}" rendered="#{(alertMedPlans.lowValue>0.0) and (alertMedPlans.severityLevel ne 'Low')}"/>         
                     <h:outputText value="#{alertMedPlans.lowValue}" rendered="#{alertMedPlans.lowValue>0.0}"/>  
                      <h:outputText value=" - " rendered="#{(alertMedPlans.lowValue>0.0) and (alertMedPlans.highValue>0.0)}"/>
                      <h:outputText value="#{alertMedPlans.highRangeSymbol}" rendered="#{(alertMedPlans.highValue>0.0) and (alertMedPlans.severityLevel ne 'Low')}"/>  
                       <h:outputText value="#{alertMedPlans.highValue}" rendered="#{alertMedPlans.highValue>0.0}"/> 
                         
                       
                     <br></br>        
						</ui:repeat>
						</td></tr></table>
						</h:form>
						<!-- </fieldset> -->
						<br></br>
					</td>
				</tr>
				<tr class="secContentBorder">
						<td>
									<h:form id="medAactionPlanFormId" prependId="false">
									<p:dataTable value="#{patientMedicineManageBean.allGeneralMedPlans}" var="genericMedPlanObj" 
									binding="#{patientMedicineManageBean.genericMedActionDatatable}" id="genericMedListId" scrollable="true" scrollRows="5" emptyMessage="#{msg.noMedFound}">
									
									<f:facet name="header">
      Meds with Med Action Plan
    </f:facet>
									
										<p:column headerText="#{msg.med}">
										<h:outputText value="#{genericMedPlanObj.drugName}" />&nbsp;
					                    <h:outputText value="#{genericMedPlanObj.strength}" />&nbsp;
					                   <h:outputText value="#{genericMedPlanObj.unit}" />&nbsp;  
			                            <h:outputText value="#{genericMedPlanObj.dosageForm}" rendered="#{genericMedPlanObj.dosageForm ne 'Add Sig'}" />&nbsp;
					                    <h:outputText value="#{genericMedPlanObj.regimen}" rendered="#{genericMedPlanObj.regimen ne 'Add Sig'}" />  
										</p:column>
										
										
										<p:column headerText="#{msg.prescription_date_label}" >
										<div align="center">
										<h:outputText value="#{genericMedPlanObj.prescriptionDate}" >
										<f:convertDateTime pattern="#{msg.dateFormat}" />
										</h:outputText></div>
										</p:column>
										<p:column headerText="#{msg.precribed_by_label}" >
										<div align="left">
										<h:outputText value="#{genericMedPlanObj.prescribedBy}" />
										</div>
										</p:column> 
										<p:column headerText="#{msg.diagonsis}">
										<div align="left">
										<h:outputText value="N/A" rendered="#{genericMedPlanObj.patientDiagnosisName eq null}"/>
										 <h:outputText value="#{genericMedPlanObj.patientDiagnosisName}" /> 
										 </div>
										</p:column>
										
										<p:column  style="width:20%">
										<div align="left">
									 	  <p:dataTable value="#{genericMedPlanObj.childLabParameters}" var="labParameterVar"  >
									 	 <p:column headerText="#{msg.monitoring_parameter_label}">
									 	 <h:outputText value="#{labParameterVar.labParameterObj.labType}"></h:outputText>
									 	 </p:column>
											<p:column headerText="Goal">
										<div align="right">
										<h:outputText value=" #{labParameterVar.goalLowRangeSymbol} " rendered="#{labParameterVar.goalLowRangeValue>0.0}" />
										<h:outputText value=" #{labParameterVar.goalLowRangeValue} " rendered="#{labParameterVar.goalLowRangeValue>0.0}" />
										<h:outputText value=" - " rendered="#{(labParameterVar.goalLowRangeValue>0.0) and (labParameterVar.goalHighRangeValue>0.0)}" />
										<h:outputText value=" #{labParameterVar.goalHighRangeSymbol} " rendered="#{labParameterVar.goalHighRangeValue>0.0}" />
										<h:outputText value=" #{labParameterVar.goalHighRangeValue} " rendered="#{labParameterVar.goalHighRangeValue>0.0}" />
										<!-- <h:outputText value="#{labParameterVar.goalRangeSymbol} #{labParameterVar.goalRangeValue} - #{labParameterVar.goalRangeEndSymbol} #{labParameterVar.goalRangeEndValue}" /> -->
										</div>
										</p:column>
											<p:column headerText="#{msg.labfrequency}">
										<div align="left">
										<h:outputText value="#{labParameterVar.frequencyNumber}" />
										<p:spacer width="5px"></p:spacer>
										<h:outputText value="#{labParameterVar.frequencyUnit}" />
										</div>
										</p:column>
										</p:dataTable>
										</div>
										</p:column> 
										
									
										 	<p:column headerText="#{msg.last_updated_by}">
										<div align="left">
										<h:outputText value="#{genericMedPlanObj.updatedByName}" />
										</div>
										</p:column> 
										  <p:column headerText="#{msg.last_updated_date}">
										 <div align="center">
										<h:outputText value="#{genericMedPlanObj.updatedDate}" >
											<f:convertDateTime pattern="#{msg.dateFormat}" />
										</h:outputText>
										</div>
										</p:column> 
											 <p:column headerText="#{msg.created_by}">
											<div align="left">
										<h:outputText value="#{genericMedPlanObj.createdByName}" />
										</div>
										</p:column> 
										<p:column headerText="#{msg.created_date_label}">
										<div align="center">
										<h:outputText value="#{genericMedPlanObj.createdDate}" id="create_date_for_genralmedplan">
											<f:convertDateTime pattern="#{msg.dateFormat}" type="date"/>
										</h:outputText>
										</div>
										</p:column> 
										<p:column headerText="#{msg.dosing_start_date}">
										 <h:outputText value="#{genericMedPlanObj.dosingStartDate}">
										 <f:convertDateTime pattern="#{msg.dateFormat}"></f:convertDateTime>
										 </h:outputText>
										
										</p:column>
										
										<p:column headerText="#{msg.action}" >
										<center>
											 <p:commandLink
												actionListener="#{patientMedicineManageBean.editGenericMedActionPlan}"
												oncomplete="editGenericMedicalActionPlan.show();" rendered="#{userManageBean.rolePrivillegeUtil.isEnable('map_editMap')}">
												<h:graphicImage value="./../../Images/editIcon.jpg"
													width="25px" height="20px" id="editGenericMedActionPlan1" />
												<p:tooltip for="editGenericMedActionPlan1">
													<h:outputText value="#{msg.edit}" />
												</p:tooltip>
											</p:commandLink> 

											<p:commandLink
												actionListener="#{patientMedicineManageBean.removeGenericMedActionPlan}"
												oncomplete="deleteDlgGenericMedActionPlan.show();"
												rendered="#{userManageBean.rolePrivillegeUtil.isEnable('map_deleteMap')}">
												<h:graphicImage value="./../../Images/delIcon.jpg"
													width="25px" height="20px" id="deleteGenericMedActionPlan1" />
												<p:tooltip for="deleteGenericMedActionPlan1">
													<h:outputText value="#{msg.delete}" />
												</p:tooltip>
											</p:commandLink>
										</center>
										</p:column>
										
									</p:dataTable>
							
									</h:form>
								<!-- </fieldset> -->
								
							</td>
						</tr>
						<br></br>
						<tr class="secContentBorder">
						<td>
									<h:form id="inactiveMedsWithActiveMAPFormId" prependId="false">
									<p:dataTable value="#{auditManageBean.inactiveMedsWithActiveMAP}" var="genericMedPlanObj" binding="#{auditManageBean.orphanedMedPlansDataTable}"
									 id="inactiveMedsWithActiveMAPgenericMedListId" scrollable="true" scrollRows="5" emptyMessage="#{msg.noMedFound}">
									
									<f:facet name="header">
        Discontinued Meds with Med Action Plan
    </f:facet>
									
										<!-- <p:column headerText="#{msg.med}">
										<h:outputText value="#{genericMedPlanObj.drugName}" />&nbsp;
					                    <h:outputText value="#{genericMedPlanObj.strength}" />&nbsp;
					                   <h:outputText value="#{genericMedPlanObj.unit}" />&nbsp;  
			                            <h:outputText value="#{genericMedPlanObj.dosageForm}" rendered="#{genericMedPlanObj.dosageForm ne 'Add Sig'}" />&nbsp;
					                    <h:outputText value="#{genericMedPlanObj.regimen}" rendered="#{genericMedPlanObj.regimen ne 'Add Sig'}" />  
										</p:column> -->
										
										
										<!-- <p:column headerText="#{msg.prescription_date_label}" >
										<div align="center">
										<h:outputText value="#{genericMedPlanObj.prescriptionDate}" >
										<f:convertDateTime pattern="#{msg.dateFormat}" />
										</h:outputText></div>
										</p:column> -->
									<!-- 	<p:column headerText="#{msg.precribed_by_label}" >
										<div align="left">
										<h:outputText value="#{genericMedPlanObj.prescribedBy}" />
										</div>
										</p:column>  -->
										<p:column headerText="#{msg.diagonsis}">
										<div align="left">
										<h:outputText value="N/A" rendered="#{genericMedPlanObj.patientDiagnosisName eq null}"/>
										 <h:outputText value="#{genericMedPlanObj.patientDiagnosisName}" /> 
										 </div>
										</p:column>
										
										<p:column  style="width:20%">
										<div align="left">
									 	  <p:dataTable value="#{genericMedPlanObj.childLabParameters}" var="labParameterVar"  >
									 	 <p:column headerText="#{msg.monitoring_parameter_label}">
									 	 <h:outputText value="#{labParameterVar.labParameterObj.labType}"></h:outputText>
									 	 </p:column>
											<p:column headerText="Goal">
										<div align="right">
										<h:outputText value=" #{labParameterVar.goalLowRangeSymbol} " rendered="#{labParameterVar.goalLowRangeValue>0.0}" />
										<h:outputText value=" #{labParameterVar.goalLowRangeValue} " rendered="#{labParameterVar.goalLowRangeValue>0.0}" />
										<h:outputText value=" - " rendered="#{(labParameterVar.goalLowRangeValue>0.0) and (labParameterVar.goalHighRangeValue>0.0)}" />
										<h:outputText value=" #{labParameterVar.goalHighRangeSymbol} " rendered="#{labParameterVar.goalHighRangeValue>0.0}" />
										<h:outputText value=" #{labParameterVar.goalHighRangeValue} " rendered="#{labParameterVar.goalHighRangeValue>0.0}" />
										<!-- <h:outputText value="#{labParameterVar.goalRangeSymbol} #{labParameterVar.goalRangeValue} - #{labParameterVar.goalRangeEndSymbol} #{labParameterVar.goalRangeEndValue}" /> -->
										</div>
										</p:column>
											<p:column headerText="#{msg.labfrequency}">
										<div align="left">
										<h:outputText value="#{labParameterVar.frequencyNumber}" />
										<p:spacer width="5px"></p:spacer>
										<h:outputText value="#{labParameterVar.frequencyUnit}" />
										</div>
										</p:column>
										</p:dataTable>
										</div>
										</p:column> 
										
									
										 	<p:column headerText="#{msg.last_updated_by}">
										<div align="left">
										<h:outputText value="#{genericMedPlanObj.updatedByName}" />
										</div>
										</p:column> 
										  <p:column headerText="#{msg.last_updated_date}">
										 <div align="center">
										<h:outputText value="#{genericMedPlanObj.updatedDate}" >
											<f:convertDateTime pattern="#{msg.dateFormat}" />
										</h:outputText>
										</div>
										</p:column> 
											 <p:column headerText="#{msg.created_by}">
											<div align="left">
										<h:outputText value="#{genericMedPlanObj.createdByName}" />
										</div>
										</p:column> 
										<p:column headerText="#{msg.created_date_label}">
										<div align="center">
										<h:outputText value="#{genericMedPlanObj.createdDate}" id="create_date_for_genralmedplan">
											<f:convertDateTime pattern="#{msg.dateFormat}" type="date"/>
										</h:outputText>
										</div>
										</p:column> 
										<p:column headerText="#{msg.dosing_start_date}">
										 <h:outputText value="#{genericMedPlanObj.dosingStartDate}">
										 <f:convertDateTime pattern="#{msg.dateFormat}"></f:convertDateTime>
										 </h:outputText>
										
										</p:column>
										
										<p:column headerText="#{msg.action}" >
										<center>
											<!--  <p:commandLink
												actionListener="#{patientMedicineManageBean.editGenericMedActionPlan}"
												oncomplete="editGenericMedicalActionPlan.show();" rendered="#{userManageBean.rolePrivillegeUtil.isEnable('map_editMap')}">
												<h:graphicImage value="./../../Images/editIcon.jpg"
													width="25px" height="20px" id="editGenericMedActionPlan1" />
												<p:tooltip for="editGenericMedActionPlan1">
													<h:outputText value="#{msg.edit}" />
												</p:tooltip>
											</p:commandLink>  -->

											<p:commandLink
												actionListener="#{auditManageBean.removeOrphanedMedActionPlan}"
												oncomplete="deleteDlgOrphanedMedActionPlan.show();"
												rendered="#{userManageBean.rolePrivillegeUtil.isEnable('map_deleteMap')}">
												<h:graphicImage value="./../../Images/delIcon.jpg"
													width="25px" height="20px" id="deleteOrphanedMedActionPlan1" />
												<p:tooltip for="deleteOrphanedMedActionPlan1">
													<h:outputText value="#{msg.delete}" />
												</p:tooltip>
											</p:commandLink>
										</center>
										</p:column> 
										
									</p:dataTable>
							
									</h:form>
								<!-- </fieldset> -->
								
							</td>
						</tr>
						</table>
						
						<br />
<table width="100%" class="secContentBorder" cellpadding="0" cellspacing="0">
 <tr>
  <td class="secHeadPart">
     Anticoagulation
  </td>
 </tr>
 <tr class="secContentBorder">
   <td>
  		
<!-- <fieldset class="dataField"><legend class="legendField">Anticoagulation</legend>	 -->		
<p:tab title="headOver">
	

 <p:outputPanel  id="messageSection">
 <!-- <h:inputHidden value="#{patientMedicineManageBean.checkNotesForLab}"></h:inputHidden>  -->
 <h:inputHidden value="#{patientMedicineManageBean.checkNotesForWarfarinDrugInteraction}"></h:inputHidden>
	  <h:inputHidden value="#{patientMedicineManageBean.showAnticoagMedactionPlanMessage}"></h:inputHidden>
	<p:outputPanel rendered="#{!patientMedicineManageBean.drugInteractionForWarfarinList.isEmpty()}"> 
		  <p:dataTable value="#{patientMedicineManageBean.drugInteractionForWarfarinList}" var="drugInteractionForWarfarinListVar" emptyMessage="#{msg.noMedFound}">
	      <p:column style="border-style:none;">
		       <h:graphicImage value="./../../Images/orange1.jpg" height="20px" 
					width="20px" rendered="#{drugInteractionForWarfarinListVar.interaction eq 'Possible Interaction' || drugInteractionForWarfarinListVar.interaction eq 'Unlikely Interaction'}"/>
					
				<h:graphicImage value="./../../Images/red1.jpg" height="20px" 
					width="20px" rendered="#{drugInteractionForWarfarinListVar.interaction eq 'Known Interaction' ||  drugInteractionForWarfarinListVar.interaction eq 'Probable Interaction'}"/>
		       
		        #{drugInteractionForWarfarinListVar.drugName}
		        <h:outputText value=" found with a"></h:outputText>
		        <h:outputText value="  #{drugInteractionForWarfarinListVar.interaction}. "></h:outputText>
		        <h:outputText value="INR may be increased. Check INR within 5-7 days of interacting medicine's start date." 
		        	rendered="#{drugInteractionForWarfarinListVar.checkHighORLowInrFOrMessage eq 'INCREASE INR'}"></h:outputText>
		         <h:outputText value="INR may be decreased. Check INR within 5-7 days of interacting medicine's start date." 
		         rendered="#{drugInteractionForWarfarinListVar.checkHighORLowInrFOrMessage eq 'DECREASE INR'}"></h:outputText>
	      </p:column>
	    </p:dataTable>
	 </p:outputPanel> 
	 
	 <!--  <p:outputPanel rendered="#{!patientMedicineManageBean.showAnticoagMedactionPlanMessage eq 0}"> -->
		 	<p:outputPanel id="updateMedActionPlanAlertMsg1">
		 	<p:outputPanel  rendered="#{!patientMedicineManageBean.medactionPlanMessageAfterLab.isEmpty()}">
		 	<p:dataTable id="updateMedActionPlanAlertMsg21" value="#{patientMedicineManageBean.medactionPlanMessageAfterLab}" 
		 		var="medactionPlanMessageAfterLab"  style="border:none;" styleClass="noheader" emptyMessage="#{msg.noMedFound}">
	 	   
	 	   		<p:column style="border-style:none;">
		 	    	<h:graphicImage value="./../../Images/green1.jpg" height="20px" 
						width="20px" rendered="#{medactionPlanMessageAfterLab.labImageStatusForINR eq 'Green'}"/>
				
					<h:graphicImage value="./../../Images/orange1.jpg" height="20px" 
						width="20px" rendered="#{medactionPlanMessageAfterLab.labImageStatusForINR eq 'Amber'}"/>
				
					<h:graphicImage value="./../../Images/red1.jpg" height="20px" 
						width="20px" rendered="#{medactionPlanMessageAfterLab.labImageStatusForINR eq 'Red'}"/>&nbsp;
				
		 			<h:outputText value="#{medactionPlanMessageAfterLab.lab} value "/>
		 			<h:outputText value="#{medactionPlanMessageAfterLab.labResult} on "/>
		 			
		 			<h:outputText value="#{medactionPlanMessageAfterLab.labDate}">
		 				<f:convertDateTime pattern="#{msg.dateFormat}" timeZone="#{userManageBean.loggedUsertimeZone}" dateStyle="full" type="date"/>
		 			</h:outputText>
		 			<h:outputText value=" for #{medactionPlanMessageAfterLab.medicineName}  "/>
		 			
		 				<h:outputText value=" Goal  #{medactionPlanMessageAfterLab.acceptableRange} " 
 							rendered="#{!medactionPlanMessageAfterLab.acceptableRange.isEmpty()}"></h:outputText>
 				
 				<h:outputText value=" Phase=Initiation, INR Day= #{medactionPlanMessageAfterLab.noOfDaysStartingFromMedActionPlan} !" 
 				rendered="#{((medactionPlanMessageAfterLab.medicineStage eq 'Initiation') 
 						and (medactionPlanMessageAfterLab.noOfDaysStartingFromMedActionPlan gt 6))}" style="color:red;"></h:outputText>
 				
 				
 				<h:outputText value=" High Risk for Haemorrhage" 
 				rendered="#{((medactionPlanMessageAfterLab.medicineStage eq 'Maintenance') and (medactionPlanMessageAfterLab.labResult gt 4.5))}" style="color:red;"></h:outputText>
 				
		 			
		 			
				</p:column>
		</p:dataTable>
		 </p:outputPanel>
		 <p:outputPanel  rendered="#{!patientMedicineManageBean.medactionPlanMessageBeforeLab.isEmpty()}">
		 <p:dataTable id="updateMedActionPlanAlertMsg2" value="#{patientMedicineManageBean.medactionPlanMessageBeforeLab}" 
		 		var="medactionPlanMessageBeforeLab"  style="border:none;" styleClass="noheader" emptyMessage="#{msg.noMedFound}">
	 	   
	 	   		<p:column style="border-style:none;">
		 	    	<h:outputText value="No new lab value is available after the Med Action Plan for ">
		 	    	</h:outputText>&nbsp;<h:outputText value="#{medactionPlanMessageBeforeLab.medicineName} #{medactionPlanMessageBeforeLab.lab}"/>&nbsp;
 					<h:outputText value="was last updated on"></h:outputText>&nbsp;
 					<h:outputText value="#{medactionPlanMessageBeforeLab.lastUpdateDate}">
 						<f:convertDateTime pattern="#{msg.dateFormat}" timeZone="#{userManageBean.loggedUsertimeZone}" dateStyle="full" type="date"/>
 					</h:outputText>
				</p:column>
		</p:dataTable>
	</p:outputPanel>
	 </p:outputPanel>
	 
	 
 
 	<!-- <p:outputPanel rendered="#{!patientMedicineManageBean.showNotesForINRLab}">
 	<table class="contentTextPan">
 		<tr>
 			<td>
 			<h:outputText value="#{patientMedicineManageBean.latestMedActionPlanForINR.labImageStatusForINR}" />
 			<h:graphicImage value="./../../Images/green1.jpg" height="15px" 
				width="20px" rendered="#{patientMedicineManageBean.latestMedActionPlanForINR.labImageStatusForINR eq 'Green'}"/>
				
			<h:graphicImage value="./../../Images/orange1.jpg" height="15px" 
				width="20px" rendered="#{patientMedicineManageBean.latestMedActionPlanForINR.labImageStatusForINR eq 'Amber'}"/>
				
			<h:graphicImage value="./../../Images/red1.jpg" height="15px" 
				width="20px" rendered="#{patientMedicineManageBean.latestMedActionPlanForINR.labImageStatusForINR eq 'Red'}"/>
 			</td>
 			<td class="contentTextPan">
 				<h:outputText value="INR Value #{labManageBean.currentLabValue.result}  on " ></h:outputText>
 				<h:outputText value="#{labManageBean.currentLabValue.dateResult}" >
	 							<f:convertDateTime pattern="#{msg.dateFormat}" />
	 						</h:outputText>
 					<h:outputText value=" for  #{patientMedicineManageBean.latestMedActionPlanForINR.medicineName} "/> 
 				<h:outputText value=" Goal  #{patientMedicineManageBean.latestMedActionPlanForINR.acceptableRange} " 
 				rendered="#{!patientMedicineManageBean.latestMedActionPlanForINR.acceptableRange.isEmpty()}"></h:outputText>
 				<h:outputText value=" Phase=Initiation, INR Day= #{patientMedicineManageBean.latestMedActionPlanForINR.noOfDaysStartingFromMedActionPlan} !" 
 				rendered="#{((patientMedicineManageBean.latestMedActionPlanForINR.medicineStage eq 'Initiation') 
 						and (patientMedicineManageBean.latestMedActionPlanForINR.noOfDaysStartingFromMedActionPlan gt 6))}" style="color:red;"></h:outputText>
 				
 				<h:outputText value=" High Risk for Haemorrhage" 
 				rendered="#{((patientMedicineManageBean.latestMedActionPlanForINR.medicineStage eq 'Maintenance') and (labManageBean.currentLabValue.result gt 4.5))}" style="color:red;"></h:outputText>
 				
 				
 			</td>
 		</tr>
 	</table>
 </p:outputPanel> -->
<!--  <p:outputPanel rendered="#{patientMedicineManageBean.showNotesForINRLab}">
 <div class="contentTextPan">
 	 <p:dataTable value="#{patientMedicineManageBean.medActionListForINRLabMessage}" var="medListForINR"  style="border:none;" styleClass="noheader" >
 	                                              <p:column style="border-style:none;">
 	                                                 <h:graphicImage value="./../../Images/red1.jpg" height="15px" width="20px"/>&nbsp;<h:outputText value="No new lab value is available after the Med Action Plan for"/>&nbsp;<h:outputText value="#{medListForINR.medicineName}"/>&nbsp;<h:outputText value="was last updated on"/>&nbsp;<h:outputText value="#{medListForINR.lastUpdateDate}"><f:convertDateTime pattern="#{msg.dateFormat}" /></h:outputText>
 	                                               </p:column>
 	                                         </p:dataTable>
 	</div>
 </p:outputPanel> -->
 
 
 
 </p:outputPanel>
 <br/>
		
</p:tab>

 <p:outputPanel id="medActionPlanMessageId" >
	<p:outputPanel rendered="#{!patientMedicineManageBean.medicineDetailWithoutMedActionPlanList.isEmpty()}">
	
	<ui:repeat value="#{patientMedicineManageBean.medicineDetailWithoutMedActionPlanList}" 
				
				var="medActionPlanMsg" styleClass="anticoag_DataTable_Alignment" scrollable="auto" scrollHeight="105">
				<!-- <f:facet name="header">
						<h:outputText value="Detail" style="font-size:9px;"/>
					</f:facet> -->
					<div class="contentTextPan">
					<h:outputText value="#{medActionPlanMsg.startDate}">
						<f:convertDateTime pattern="#{msg.dateFormat}" />:
					</h:outputText>&nbsp;
					
					<h:outputText value="#{medActionPlanMsg.prescriberName}" />&nbsp;
					
					<h:outputText value="has prescribed" />&nbsp;
					<!-- (<h:outputText value="New : "></h:outputText> -->
					<h:outputText value="#{medActionPlanMsg.drugs}" />&nbsp;
					<h:outputText value="#{medActionPlanMsg.strengths}" />
					<!-- <h:outputText value="#{medActionPlanMsg.drugNameId}" />
						<h:outputText value="#{medActionPlanMsg.drugId}" />). -->
					
					
					<!-- <h:outputText value="Do you want to create Med Action plan?"></h:outputText>
					<p:commandButton value="Yes" actionListener="#{patientMedicineManageBean.creatMedActionPlan}"></p:commandButton>
					<p:commandButton value="No"></p:commandButton>
					 <p:commandButton value="No" actionListener="#{patientMedicineManageBean.noMedActionPlan}" update=":medActionPlanMessageId :curntAnticoagMed" >  
       						 <p:confirm   header="Confirmation" message="Are you sure?" icon="ui-icon-alert"  />  
   					 </p:commandButton> 
   					
   					 <p:confirmDialog global="true" showEffect="fade" hideEffect="explode" >  
       					 <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>  
       					 <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close"/>       
    				</p:confirmDialog> 
					 -->
    				</div>
				<br></br>
				
				</ui:repeat>
				
			
			</p:outputPanel>
	
	</p:outputPanel>
<br></br>


<p:tab id="medactionTabId">
		<h:form >
		<table width="100%">
				<tr>
					<td align="left">
						<p:dataTable id="planListId" scrollable="auto" scrollHeight="105" 
				value="#{patientMedicineManageBean.medicalActionPlanList}"
				var="medActionPlan" emptyMessage="#{msg.noMedFound}">

				<p:column>
					<f:facet name="header">
						<h:outputText value="#{msg.med} " />
					</f:facet>
					<div align="left">
					<h:outputText value="#{medActionPlan.medicineName}" />&nbsp;
					<h:outputText value="#{medActionPlan.dose}" />&nbsp;
					<h:outputText value="#{medActionPlan.unit}" />&nbsp;
			        <h:outputText value="#{medActionPlan.dosageForm}" rendered="#{medActionPlan.dosageForm ne 'Add Sig'}" />&nbsp;
					<h:outputText value="#{medActionPlan.regimen}" rendered="#{medActionPlan.regimen ne 'Add Sig'}" />
					</div>
				</p:column>
				
				<p:column width="8%">
					<f:facet name="header">
						<h:outputText value=" Prescription Date"/>
					</f:facet>
				<div align="center">
				<h:outputText value="#{medActionPlan.prescriprtiondate}" id="medplandate">
				<f:convertDateTime pattern="#{msg.dateFormat}" timeZone="#{userManageBean.loggedUsertimeZone}" for="medplandate" type="date" dateStyle="full" locale="pl"/></h:outputText>
				</div>
				</p:column>
				
				<p:column width="8%">
					<f:facet name="header">
						<h:outputText value="Prescribed By" />
					</f:facet>
					<div align="left">
					<h:outputText value="#{medActionPlan.prescriptionby}" />
					</div>
				</p:column>
				
				

				<p:column>
					<f:facet name="header">
						<h:outputText value="#{msg.diagnosis}" />
					</f:facet>
					<div align="left">
					<h:outputText value="#{medActionPlan.diagnosis}" />
					</div>
				</p:column>
				
				<p:column>
					<f:facet name="header">
						<h:outputText value="#{msg.subdiao}"/>
					</f:facet>
					<div align="left">
					<h:outputText value="#{medActionPlan.subdiagonses}" />
					</div>
				</p:column>
				
			

				<p:column width="11%">
					<f:facet name="header">
						<h:outputText value="#{msg.monitoringpara}" />
					</f:facet>
					<div align="left">
					<h:outputText value="#{medActionPlan.lab} #{medActionPlan.labUnit}" />
					</div>
				</p:column>

				<p:column width="10%">
					<f:facet name="header">
						<h:outputText value="Goal" />
					</f:facet>
					<div align="right"><h:outputText value="#{medActionPlan.acceptableRange}" /></div>
				</p:column>
				
				<p:column width="9%" >
					<f:facet name="header">
						<h:outputText value="#{msg.labfrequency} "/>
					</f:facet>
					<div align="left"><h:outputText value="#{medActionPlan.labFrequency}" /></div>
				</p:column> 
				
				<p:column width="7%">
					<f:facet name="header">
						<h:outputText value="#{msg.last_update_by}" />
					</f:facet>
					<div align="left">
					<h:outputText value="#{medActionPlan.lastupdatedby}" />
					</div>
				</p:column>
				
				<p:column width="8%">
					<f:facet name="header">
						<h:outputText value="#{msg.last_update_date}" />
					</f:facet>
					<div align="center"><h:outputText value="#{medActionPlan.lastUpdateDate}" id="update_date">
						 <f:convertDateTime pattern="#{msg.dateFormat}" timeZone="#{userManageBean.loggedUsertimeZone}" for="update_date" type="date" dateStyle="full" locale="pl"/>
					</h:outputText>
					</div>
				</p:column>

				
				
				<p:column>
					<f:facet name="header">
						<h:outputText value="#{msg.create_by}" />
					</f:facet>
				<div align="left">
				<h:outputText value="#{medActionPlan.createdby}" /></div>
				</p:column>
				
				<p:column width="9%">
					<f:facet name="header">
						<h:outputText value="#{msg.create_date}" />
					</f:facet>
					<div align="center"><h:outputText value="#{medActionPlan.actionDate}" id="action_date">
					<f:convertDateTime pattern="#{msg.dateFormat}" timeZone="#{userManageBean.loggedUsertimeZone}" for="action_date" type="date" dateStyle="full" locale="pl"/>
					</h:outputText></div>
				</p:column>
			</p:dataTable>
			 
					</td>
				</tr>
		</table>
		
		</h:form>
	</p:tab>
<!-- </fieldset> -->
</td>
</tr>
</table>


<br />
				
					
						<!---Med Action Plans section:End-->

						<!--Lab section:Start  -->
						<table>
						<tr>
							<td valign="top" style="width:50%;" >
							  <table width="100%" style="min-height:450px" class="secContentBorder" cellpadding="0" cellspacing="0">
							    <tr >
							      <td class="secHeadPart">#{msg.labs_label}</td>
							    </tr>
							    <tr class="secContentBorder">
							      <td>
							      
								<!-- <fieldset  class="dataField" style="min-height:405px;">
									<legend class="legendField">#{msg.labs_label}</legend> -->
									<p:dataTable
										value="#{labManageBean.procedureResultListForCurrentLab}"
										var="procedureResultHistory" id="genericMedActionLabResult"
										resizableColumns="true" scrollable="true" scrollHeight="305" emptyMessage="#{msg.noMedFound}">
										<p:column headerText="#{msg.datePrescribed}">
											<div align="center">
											<h:outputText value="#{procedureResultHistory.dateResult}">
												<!-- <f:convertDateTime pattern="#{msg.dateFormat}" /> -->
												<f:convertDateTime pattern="#{msg.dateFormat}" timeZone="#{userManageBean.loggedUsertimeZone}" dateStyle="full" type="date" />
											</h:outputText></div>
										</p:column>
										<p:column headerText="#{msg.recent_lab}">
										<div align="left">
											<h:outputText value="#{procedureResultHistory.labName}" />
											</div>
										</p:column>
										<p:column headerText="#{msg.value}">
										<div align="right">
											<h:outputText value="#{procedureResultHistory.result}" />
										</div>
										</p:column>
										<p:column headerText="Acceptable Range" >
										<div align="left">
											<h:outputText
												value="#{procedureResultHistory.labRange} #{procedureResultHistory.labUnit}"  
												rendered="#{procedureResultHistory.labRange eq ''}"/>
												</div>
										</p:column>
									</p:dataTable>
								<!-- </fieldset> --> 
							  </td>
							 </tr>
							 </table>
							</td>
							
							<td valign="top" style="width:70%;" >
							 <table width="100%" style="min-height:450px" class="secContentBorder" cellpadding="0" cellspacing="0" id="map_drugDoseCurve" >
							   <tr>
							     <td class="secHeadPart">
							      Drug Dose Response Curve
							     </td>
							   </tr>
							   <tr class="secContentBorder">
							    <td> 
								<!-- fieldset  class="dataField">
									<legend class="legendField">Drug Dose Response Curve</legend> -->
									<h:form id="medChart" prependId="false" rendered="#{userManageBean.rolePrivillegeUtil.isEnable('map_drugDoseCurve')}">
									 <table width="100%" style="background-color: rgb(174,208,234)" >
        
              <tr style="background-color:rgb(174,208,234);">
				   <p:growl  id="messageUpdateAnticoag" showDetail="false" style="color:red;margin:8px;" closable="true" />
				    					  
				<td   style="background-color:rgb(174,208,234);">
					<h:outputText value="Parameter:" style="font-family:verdana;font-size:12px;font-weight:bold;" /><br></br>
			<!-- 	</td>
				<td style="background-color:rgb(174,208,234);"> -->
				<p:selectOneMenu  value="#{labManageBean.medandGenricmed.lab}"	   style="width:170px;"										
							     required="true" requiredMessage="Select Monitoring Parameter" >
									
										
										<f:selectItem itemLabel="Monitoring Parameter" />  
									
											<f:selectItems value="#{labManageBean.medandGenricmedListForMedicine}" 
												var="loinc" itemLabel="#{loinc.lab} #{loinc.labUnit}"
												itemValue="#{loinc.lab}"  />
										
									  <!-- <p:ajax listener="#{patientMedicineManageBean.calculateTotalDispence}" update="medicineChange"/>  -->
									
									
										</p:selectOneMenu>
				</td>
				<td   style="background-color:rgb(174,208,234);">
										<h:outputText value="#{msg.drugs}:"
											style="font-family:Verdana;font-size:12px;font-weight:bold;" /><br></br>
											
										
			<!-- 	</td>
				<td   style="background-color:rgb(174,208,234);"> -->
				<!-- <p:inputText id="medicineChange"   value="#{patientMedicineManageBean.medandGenricmed.medicinename}"    required="true" requiredMessage="Select Drug" style="width:60px;"></p:inputText>  -->
					<!-- <f:ajax listener="#{patientMedicineManageBean.changeActionOnClick}" update="medChart:dispenceNumber"></f:ajax>									 -->
												
						 <p:selectOneMenu value="#{labManageBean.medandGenricmed.medicinename}" 
											style="vertical-align: top;width:170px;"
							             required="true" requiredMessage="Select Drug" 	>
									
										  <f:selectItem itemLabel="#{msg.sedrug}" />  
									
											<f:selectItems value="#{labManageBean.medActionListForChart}"
												var="medActionPlan" itemLabel="#{medActionPlan.medicinename}"
												itemValue="#{medActionPlan.medicinename}+#{medActionPlan.drugNameId}"  />
									
										</p:selectOneMenu> 
									
				</td>
				<td   style="background-color:rgb(174,208,234);"><h:outputText
											value="#{msg.time_duration}:"
											style="font-family:Verdana;font-size:12px;font-weight:bold;"/><br></br> 
				<!-- </td>
				<td align="center"  style="background-color:rgb(174,208,234);"> -->
									<p:selectOneMenu
											value="#{labManageBean.chartPeriod}"
											style="font-family:Verdana;width:140px;"
		                                  required="true" requiredMessage="Select Time Duration">
		                                  
								  <f:selectItem itemLabel="#{msg.select_time_duration}"/>  
											<f:selectItem itemLabel="#{msg.one_month}" itemValue="1m" />
											<f:selectItem itemLabel="#{msg.three_month}" itemValue="3m" />
											<f:selectItem itemLabel="#{msg.six_month}" itemValue="6m" />
											<f:selectItem itemLabel="#{msg.one_yr}" itemValue="1y" />
										</p:selectOneMenu>
					</td>
					
										<td align="center" valign="bottom">
										<p:commandButton
											value="#{msg.show_chart}"
												actionListener="#{labManageBean.medActionPlanHighChart}"
									 oncomplete="handleComplete(xhr, status, args)" 
							            update="medChart"
									     ajax="true" 
										style="valign:top;" />
										
					</td>
					<td align="center" valign="bottom">
					<p:commandButton value="ShowLab" onclick="labdetailonchart.show()" style="valign:top;"  /></td>
					<td align="center" valign="bottom" width="15%">
					<p:commandButton value="ShowDose" onclick="dosedetailonchart.show()" style="valign:top;"  />
					</td> 
					</tr>
					</table>
								
        
          <table style="background-color:rgb(255,255,255); width:100%;">
          <tr >
           <td align="center" colspan="7"  style="background-color:rgb(255,255,255);">
         
           <!--  <p:lineChart id="linear123" value="#{patientMedicineManageBean.labChartForAnticoag}" legendPosition="e" animate="true" rendered="#{not empty labManageBean.chartPeriod}" minY="0" maxY="12" style="height:200px;font-size:8px;font-style: verdana; font-family: verdana;
	font-weight: bold;  color:#036; width:400px;" showMarkers="true"  xaxisAngle="-30" extender="customExtender">  

     						<f:convertDateTime pattern="MM/dd/yy"/>  	
     				</p:lineChart> -->
     				
     								
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>

<div id="container" style=" height:350px; margin: 0 auto"></div>
<script>
//<![CDATA[
function handleComplete(xhr, status, args){
	
								$("#container").empty();
							// alert(args.jsonDataSet);
						         if(args.jsonDataSet!=null)
						        	 {
								//console.log("data set from bean "+args.jsonDataSet);
							 	var dataSetBar=args.jsonDataSet;
								var barchartDataSet=$.parseJSON(dataSetBar);
								//alert(barchartDataSet);
							
								 $.each(barchartDataSet, function(index, data) {
								//	alert(barchartDataSet);
							        });
								
						
								  var dataset=barchartDataSet; 
								
								 var processed_json = new Array();
								 var inr = dataset.Lab;
                                       // alert("value of inr=="+inr)
								 for(var i in inr)
								 {
									
								 var date= inr[i].longStartDate;
								
								 var reslt = inr[i].result;
								 
								  processed_json.push([(date),parseFloat(reslt)]);
								
								 }
								 var processed_json1 = new Array();
								var dose=dataset.Dose;
								//alert("value of dose::::"+dose)
								for(var j in dose){
									var startDate=dose[j].longStartDate;
									var strength=dose[j].strength;
								
									 processed_json1.push([(startDate),parseFloat(strength)]);
									/* alert("value of second list::::"+processed_json1); */
									
								}
	
      
								   var chart, defaultOptions, options;
								   //options.xAxis.categories = [];
						
                                   
							        $('#container').highcharts({
							            chart: {
							                zoomType: 'xy',
							                type: 'line'
							            },
							            title: {
							                text: ' '
							            },
							            subtitle: {
							                text: ' '
							            },
							            xAxis: {
							            	
							            	
						 	            	
						                type: "datetime",  
							              // categories: [processed_json] 
						                
						                   
						                dateTimeLabelFormats: { // don't display the dummy year
						                    month: '%e. %b. %y',
						                   
						                }

						                
							            },
							            yAxis: [{ // Primary yAxis
							            	showFirstLabel : true,
							            	min: 0,
							                /* tickInterval: 20, */
							                labels: {
							                	format:'{value}',
							                    style: {
							                        color: '#89A54E'
							                    }
							                },
							                title: {
							                    text: '#{labManageBean.medandGenricmed.medicinenameforgraph} (mg)',
							                    style: {
							                        color: '#89A54E'
							                    }
							                },
							                opposite: true
							               
							            },
							           
							            
							            { // Secondary yAxis
							            	min: 0,
							                title: {
							                	 text: '#{labManageBean.medandGenricmed.lab}  #{labManageBean.medandGenricmed.labUnit}',
							                	 
							                    style: {
							                        color: '#4572A7'
							                    }
							                },
							              

						                	min: 0,   
							                labels: {
							                    format: '{value}',
							                  
							                    style: {
							                        color: '#4572A7'
							                    }
							                
							                },
							               
							                
							            }],
							            tooltip: {
							            	
							            },
							            /*  legend: {
							                layout: 'vertical',
							                align: 'left',
							                x:12,
							                verticalAlign: 'top',
							                y:1,
							                floating: true,
							                backgroundColor: '#FFFFFF'
							            },  */
							            series: [{
							                name: 'Lab Value',
							                color: '#4572A7',
							                type: 'line',
							                yAxis: 1,
							                data: processed_json,
							              
							                tooltip: {
							                    valueSuffix: ''
							                }
							    
							            }, {
							                name: 'Dose',
							                color: '#89A54E',
							               
							            	type: 'line', 
							            	step:true,
							               	
							                
							                data: processed_json1,
							               
							          
							                tooltip: {
							                    valueSuffix: ''
							                }

							           
							            
							                
							            }]
							        }); 
							   
}

}
            
        

 
//]]>
							   </script>
     				
							  </td>
							  </tr>
							  </table>
							  
							  
									</h:form>
								<!-- </fieldset> -->
							</td>
							</tr>
							</table>
							 </td>
							 </tr>
						</table>
				
				<!---Lab section:End-->
				<!-- pop up start for show lab data for drug response chart -->
				
				<p:dialog widgetVar="labdetailonchart" header="#{msg.lab_detail}" appendTo="@(body)" hideEffect="fold" resizable="true" 
					dynamic="true" position="450,70" styleClass="contentPan" closable="true" height="250" width="400" id="labDetailDialogId">
					<p:ajax event="close" update="labDetailDialogId"></p:ajax>
					
					 <p:dataTable value="#{labManageBean.procedureResultHistoryForMedActionPlan}" var="labresult" styleClass="contentArea" scrollHeight="150" emptyMessage="#{msg.noMedFound}">
					 
					 
					  <p:column styleClass="contentPan">
					   <f:facet name="header">
                                <h:outputText value="#{msg.lab_date}"/>
                                                    </f:facet>
					   <h:outputText value="#{labresult.dateResult}">
					 <f:convertDateTime pattern="#{msg.dateFormat}"  timeZone="#{userManageBean.loggedUsertimeZone}"  dateStyle="full" type="date"/> 
					   </h:outputText>
					  </p:column>
					  
					  <p:column styleClass="contentPan">
					   <f:facet name="header">
                                <h:outputText value="#{msg.lab_result}"/>
                                                    </f:facet>
					   <h:outputText value="#{labresult.result}"> 
					   </h:outputText>
					  </p:column>
					 </p:dataTable>
				 
					</p:dialog>
				<!-- pop up end for show lab data for drug response chart -->
				
				
				<!-- pop up start for show drug dose for drug response chart -->
				
				<p:dialog widgetVar="dosedetailonchart" header="#{msg.dose_detail}"  appendTo="@(body)" hideEffect="fold" resizable="true" 
					dynamic="true" position="450,70" styleClass="contentPan" closable="true" height="250" width="400" id="doseDetailDialogId">
					
						<p:ajax event="close" update="doseDetailDialogId" />
					
					 <p:dataTable value="#{labManageBean.medicineDetailForGraphList}" var="doseresult" styleClass="contentArea" scrollHeight="150" emptyMessage="#{msg.noMedFound}">
					  
					  <p:column styleClass="contentPan">
					  <f:facet name="header">
                                <h:outputText value="#{msg.date}"/>
                                                    </f:facet>
					   <h:outputText value="#{doseresult.startDate}">
					 <f:convertDateTime pattern="#{msg.dateFormat}"  dateStyle="full" type="date"/> 
					   </h:outputText>
					  </p:column>
					  
					  <p:column styleClass="contentPan">
					  <f:facet name="header">
                                <h:outputText value="#{msg.directions}"/>
                                                    </f:facet>
					   <h:outputText value="#{doseresult.direction}">
					   </h:outputText>
					  </p:column>
					  
					  <p:column styleClass="contentPan">
					  <f:facet name="header">
                                <h:outputText value="#{msg.direction_value}"/>
                                                    </f:facet>
					   <h:outputText value="#{doseresult.directionvalue}">
					   </h:outputText>
					  </p:column>
					  
					  <p:column styleClass="contentPan">
					  <f:facet name="header">
                                <h:outputText value="#{msg.dose}"/>
                                                    </f:facet>
					   <h:outputText value="#{doseresult.dose}">
					   </h:outputText>
					  </p:column>
					  
					  <p:column styleClass="contentPan">
					   <f:facet name="header">
                                <h:outputText value="#{msg.result}"/>
                                                    </f:facet>
					   <h:outputText value="#{doseresult.directionvalue}*#{doseresult.dose}="> 
					   </h:outputText>
					   <h:outputText value="#{doseresult.strength}">
					   </h:outputText>
					  </p:column>
					 </p:dataTable>
				 
					</p:dialog>
				<!-- pop up end for show drug dose for drug response chart -->
				
				
				<!-- ******************************** pop up start for general med action plan............................ -->
				<p:dialog id="editMedActionPlanDialogId"
					widgetVar="editGenericMedicalActionPlan" 
					resizable="true" appendTo="@(body)" modal="true" dynamic="true"
					closable="false">
					<p:ajax event="close" update="editMedActionPlanDialogId" />
					<h:form id="editGenericMedPlanFormId" prependId="false">
						<h:outputText value="#{patientMedicineManageBean.genericMedActionPlan.drugName} 
					#{patientMedicineManageBean.genericMedActionPlan.strength} 
					#{patientMedicineManageBean.genericMedActionPlan.regimen}"/>
						<table width="100%" style="border:1px solid;" >
							<tr style="border:1px solid;">
								<td>
								<h:outputText value="#{msg.monitoring_parameter_label}" />
								</td>
								
								
								<td align="center">
								<h:outputText value="#{msg.goal}" />
								</td>
								
								<td >
								<h:outputText value="#{msg.frequency_no}" />
								</td>
								<td align="center">
								 <h:outputText value="#{msg.frequency_unit}"></h:outputText>
								</td>
								 <td>
							 <h:outputText value="#{msg.dosing_start_date}"/>
							</td> 
								<td  align="center">
								<h:outputText value="#{msg.alert_level_label}" />
							</td>
							
							</tr>
							<tr style="border:1px solid;">						
								<td>
								<h:outputText value="#{patientMedicineManageBean.genericMedActionPlan.parameterShortName}" />
								</td>
								  <td style="border:none;">
									<table>
									<tr>
									<td>
									<p:selectOneMenu value="#{patientMedicineManageBean.genericMedActionPlan.goalRangeSymbol}">
									<f:selectItems value="#{patientMedicineManageBean.alertSymbolsList}" var="goalRange" itemLabel="#{goalRange.key}"
									itemValue="#{goalRange.value}"/>
									</p:selectOneMenu>
									</td>
									<td>
									<p:inputText value="#{patientMedicineManageBean.genericMedActionPlan.goalRangeValue}" size="2"></p:inputText>
									</td>
									<td>
									<h:outputText value="#{msg.or_label}" />
									</td>
									<td>
									   <p:selectOneMenu value="#{patientMedicineManageBean.genericMedActionPlan.goalRangeEndSymbol}">
												<f:selectItems
													value="#{patientMedicineManageBean.alertSymbolsList}"
													var="goalRangeEndObj" itemLabel="#{goalRangeEndObj.key}"
													itemValue="#{goalRangeEndObj.value}" />
										</p:selectOneMenu>
									</td>
									<td>
									   <p:inputText value="#{patientMedicineManageBean.genericMedActionPlan.goalRangeEndValue}" size="2"></p:inputText>
									</td>
									</tr>
									</table>
								</td>
								<td>
								<p:selectOneMenu value="#{patientMedicineManageBean.genericMedActionPlan.frequencyNo}" style="width:50px;">
									<f:selectItems value="#{patientMedicineManageBean.frequencyNoList}" var="frequencyNo" itemLabel="#{frequencyNo.key}"
									itemValue="#{frequencyNo.value}"/>
									</p:selectOneMenu>
								</td>							 
								<td>
								  <p:selectOneMenu value="#{patientMedicineManageBean.genericMedActionPlan.frequencyUnit}"  >
									<f:selectItems value="#{patientMedicineManageBean.frequencyList}" var="frequencyRange" itemLabel="#{frequencyRange.key}"
									itemValue="#{frequencyRange.value}"/>
									</p:selectOneMenu> 
								</td>
								<td >
													<p:calendar value="#{patientMedicineManageBean.genericMedActionPlan.dosingStartDate}" pattern="#{msg.dateFormat}">
													  <f:convertDateTime pattern="#{msg.dateFormat}" dateStyle="full" type="date" timeZone="#{userManageBean.loggedUsertimeZone}" />	
													</p:calendar>
													</td>
								
									<td style="border:none;">
<table>
										<tr>
											<td><h:graphicImage value="./../../Images/red1.jpg"
													height="15px" width="20px" /></td>
											<td><p:selectOneMenu
													value="#{patientMedicineManageBean.genericMedActionPlan.alertSevereLowRangeSymbol}">
													<f:selectItems
														value="#{patientMedicineManageBean.alertSymbolsList}"
														var="symSevereLowRange"
														itemLabel="#{symSevereLowRange.key}"
														itemValue="#{symSevereLowRange.value}" />
												</p:selectOneMenu></td>
											<td><p:inputText
													value="#{patientMedicineManageBean.genericMedActionPlan.alertSevereLowRangeValue}"
													size="2"></p:inputText></td>
											<td><h:outputText value="#{msg.or_label}" /></td>
											<td><p:selectOneMenu
													value="#{patientMedicineManageBean.genericMedActionPlan.alertSevereHighRangeSymbol}">
													<f:selectItems
														value="#{patientMedicineManageBean.alertSymbolsList}"
														var="symSevereHighRange"
														itemLabel="#{symSevereHighRange.key}"
														itemValue="#{symSevereHighRange.value}" />
												</p:selectOneMenu></td>
											<td><p:inputText
													value="#{patientMedicineManageBean.genericMedActionPlan.alertSevereHighRangeValue}"
													size="2"></p:inputText></td>
													
													
										
										</tr>
										<tr>
											<td><h:graphicImage value="./../../Images/orange1.jpg"
													height="15px" width="20px" /></td>
											<td><p:selectOneMenu
													value="#{patientMedicineManageBean.genericMedActionPlan.alertMediumLowRangeSymbol}">
													<f:selectItems
														value="#{patientMedicineManageBean.alertSymbolsList}"
														var="symMediumLowRange"
														itemLabel="#{symMediumLowRange.key}"
														itemValue="#{symMediumLowRange.value}" />
												</p:selectOneMenu></td>
											<td><p:inputText
													value="#{patientMedicineManageBean.genericMedActionPlan.alertMediumLowRangeValue}"
													size="2"></p:inputText></td>
											<td><h:outputText value="#{msg.or_label}" /></td>
											<td><p:selectOneMenu
													value="#{patientMedicineManageBean.genericMedActionPlan.alertMediumHighRangeSymbol}">
													<f:selectItems
														value="#{patientMedicineManageBean.alertSymbolsList}"
														var="symMediumHighRange"
														itemLabel="#{symMediumHighRange.key}"
														itemValue="#{symMediumHighRange.value}" />
												</p:selectOneMenu></td>
											<td><p:inputText
													value="#{patientMedicineManageBean.genericMedActionPlan.alertMediumHighRangeValue}"
													size="2"></p:inputText></td>
													
										</tr>
									
										
									</table>


								</td>
							
							</tr>

						</table>
						<table align="center">
						<tr>
						<td>
							 <p:commandButton value="#{msg.cancel}"
										onclick="editGenericMedicalActionPlan.hide()"
										update=":editMedActionPlanDialogId"></p:commandButton> 
						</td>
						<td>
					
										<p:commandButton value="#{msg.done}"
										action="#{patientMedicineManageBean.updateGenericMedActionPlan}"
										oncomplete="editGenericMedicalActionPlan.hide()" update=":medAactionPlanFormId"
										></p:commandButton>
						</td>
						</tr>
						</table>
					</h:form>
				</p:dialog>
				<!-- ******************************** pop up End for general med action plan............................ -->
				<p:dialog widgetVar="deleteDlgGenericMedActionPlan" id="deleteDialogGenericMedAction"
					header="Are you Sure you want to delete?"
					message="Are you Sure you want to delete?" width="260"
					closable="false" modal="true" appendTo="@(body)"  dynamic="true">
					<p:ajax event="close" update="deleteDialogGenericMedAction" />
					<h:form id="deleteGenericMedActionPlanFormId" prependId="false">
					 <h:panelGroup layout="block" style="text-align: center"> 
						<p:commandButton value="Yes" 
							actionListener="#{patientMedicineManageBean.deleteGenericMedActionPlan}"
							oncomplete="deleteDlgGenericMedActionPlan.hide();"
							update=":medAactionPlanFormId:genericMedListId,:alertNotes" />
						<p:commandButton value="No" oncomplete="deleteDlgGenericMedActionPlan.hide();" />
					 </h:panelGroup> 
					</h:form>
				</p:dialog>
				
				<p:dialog widgetVar="deleteDlgOrphanedMedActionPlan" id="deleteDialogOrphanedMedAction"
					header="Are you Sure you want to delete?"
					message="Are you Sure you want to delete?" width="260"
					closable="false" modal="true" appendTo="@(body)"  dynamic="true">
					<p:ajax event="close" update="deleteDialogOrphanedMedAction" />
					<h:form id="deleteOrphanedMedActionPlanFormId" prependId="false">
					 <h:panelGroup layout="block" style="text-align: center"> 
						<p:commandButton value="Yes" 
							actionListener="#{auditManageBean.deleteOrphanedMedActionPlan}"
							oncomplete="deleteDlgOrphanedMedActionPlan.hide();"
							update=":inactiveMedsWithActiveMAPFormId"/>
						<p:commandButton value="No" oncomplete="deleteDlgOrphanedMedActionPlan.hide();" />
					 </h:panelGroup> 
					</h:form>
				</p:dialog>
				
				<!-- ******************************** pop up start for general med action plan............................ -->
			 	
			 	<p:dialog id="genericMedActionPlanDialogId"
					widgetVar="editGenericMedicalActionPlan" 
					resizable="true"  modal="true" dynamic="true"
					closable="false" draggable="true"  height="300px" appendTo="@(body)">
					 <p:ajax event="close" update="genericMedActionPlanDialogId" />
					 <p:growl id="growl" showDetail="true"  widgetVar="growlMsg"/> 
					<h:form id="newGenericMedPlanFormIdforfilterId">
					 
					<table>
					<tr>
					<td>
					<h:outputText styleClass="outputtext"  value="#{patientMedicineManageBean.patientMedicationData.drugs}"/>&nbsp; 
					<h:outputText styleClass="outputtext"  value="#{patientMedicineManageBean.patientMedicationData.strengths},"/>&nbsp;
					<h:outputText styleClass="outputtext"  value="#{patientMedicineManageBean.patientMedicationData.unit}"/>&nbsp; 
					<h:outputText styleClass="outputtext"  value="#{patientMedicineManageBean.patientMedicationData.dosageForm}" rendered="#{patientMedicineManageBean.patientMedicationData.dosageForm ne 'Add Sig'}" />&nbsp;
					<h:outputText styleClass="outputtext"  value="#{patientMedicineManageBean.patientMedicationData.directions}" rendered="#{patientMedicineManageBean.patientMedicationData.directions ne 'Add Sig'}"/>
					</td>
					<td></td>
					<!-- <p:spacer width="200px;"></p:spacer> -->
					<td></td>
					</tr>
					<tr>
					<td>
					<h:outputText value="Diagnosis" styleClass="outputtext" />: <h:outputText  id="diagnosisNameIdGMAPObj" value="#{patientMedicineManageBean.patientDiagnosesDetailsObj.code}" /> 
					<!--  <h:outputText id="diagnosisNameId" value="#{patientMedicineManageBean.genericMedActionPlanList.get(0).diagnosisName}" rendered="#{patientMedicineManageBean.genericMedActionPlanList.size()>0}"/>  -->
					</td>
					
					<td>
					
					<p:commandLink rendered="#{patientMedicineManageBean.patientDiagnosesDetailsObj.code ne null}" onclick="deletediagnoses.show();">
					 
					 			<h:graphicImage value="./../../Images/delIcon.jpg"
										width="25px" height="25px" id="delRxId" onmouseover="delRxId.show();" onmouseout="delRxId.hide();"/>
										
										<p:dialog widgetVar="delRxId" position="650,220" closable="false">
										<h:outputText value="delete diagnosis"/>
									</p:dialog>
					 </p:commandLink> 
					  <p:dialog widgetVar="deletediagnoses" id="deletediagnosesis" header="Are you Sure you want to delete?" message="Are you Sure you want to delete?"
                    			 width="260" closable="false" modal="true" appendTo="@(body)" hideEffect="fold">
                    	<h:form>		 
					        <h:panelGroup layout="block" style="text-align: center">
					            <p:commandButton value="Yes" process="@this" actionListener="#{patientMedicineManageBean.clearMedActionPlan1}" update=":newGenericMedPlanFormIdforfilterId"  oncomplete="deletediagnoses.hide();"  />
					            <p:commandButton value="No"  oncomplete="deletediagnoses.hide();" />
					        </h:panelGroup>
					    </h:form>
   					 </p:dialog> 
					 
					  &nbsp;  <p:commandLink  id="addrEditDiagnosesId"  onclick="diagnosisPopUp.show()"  update="diagnosisNameIdGMAPObj">
					 		<h:graphicImage value="./../../Images/editIcon.jpg"
										width="25px" height="25px" />
					 </p:commandLink> 
					 <p:tooltip id="editDiagnosesTool" for="addrEditDiagnosesId" value="Add and update diagnosis"/> 
					
					 </td>
					 </tr>
					 <tr>
					  <td>
					  <h:outputText value="#{msg.dosing_start_date}"/>
					  </td>
					  <td>
					    <p:calendar  value="#{patientMedicineManageBean.parentMedActionPlan.dosingStartDate}" showOn="button"    id="dosingStartDate" pattern="#{msg.dateFormat}">
					    <f:convertDateTime pattern="#{msg.dateFormat}" for="dosingStartDate" dateStyle="full" type="date" timeZone="#{userManageBean.loggedUsertimeZone}" />	
					    </p:calendar>
					  </td>
					 </tr>
					</table>
					 <p:panel header="#{msg.monitoring_parameter_header_label}" id="checkboxPanelId" >
					  <p:selectManyCheckbox id="monitoringParameterGMAPId" 
                                                    value="#{patientMedicineManageBean.selectedMonitoringParameters}"
                                                   valueChangeListener="#{patientMedicineManageBean.onParameterChangeMedActionPlan}" >
                 <!--   <f:selectItems value="#{patientMedicineManageBean.monitoringParameters}" var="monitor" itemLabel="#{monitor.key}" 
                  itemValue="#{monitor.value}"></f:selectItems> -->
                  <f:selectItems value="#{patientMedicineManageBean.monitoringParamsList}" var="monitor" itemLabel="#{monitor.parentParameter}" itemValue="#{monitor.parentParameter}"></f:selectItems>
                    <p:ajax partialSubmit="true"  process=":newGenericMedPlanFormIdforfilterId:genericMedActionTableIdforfilterId,monitoringParameterGMAPId"
                                  update=":newGenericMedPlanFormIdforfilterId:genericMedActionTableIdforfilterId,monitoringParameterGMAPId,:newGenericMedPlanFormIdforfilterId:blockDialog" onstart="showBlockUI()" oncomplete="hideBlockUI()"></p:ajax>
                    </p:selectManyCheckbox>
                    </p:panel> 
                     <p:messages id="messagesLabName"  closable="true"></p:messages>
                   <h:panelGrid columns="3">
                
                   <p:inputText  id="searchLabNameGMAPId" value="#{patientMedicineManageBean.loincNumber}" >
                   </p:inputText>
                   <p:commandButton value="#{msg.search_lab_label}" 
                    actionListener="#{patientMedicineManageBean.searchLabInLoincMaster}"  
                      oncomplete="handleSearchLab(xhr, status, args)" process="@this,searchLabNameGMAPId,:newGenericMedPlanFormIdforfilterId:genericMedActionTableIdforfilterId" update="searchLabNameGMAPId,messagesLabName" partialSubmit="true">
                    </p:commandButton>
                    <p:commandButton value="Clear" actionListener="#{patientMedicineManageBean.clearMedActionPlan}" update=":newGenericMedPlanFormIdforfilterId" />
                  </h:panelGrid> 
                  <p:messages id="messagesValidate"  closable="true"/>  
                  <p:dataTable value="#{patientMedicineManageBean.parentMedActionPlan.childLabParameters}" var="genericMedActionPlanVar"
                   id="genericMedActionTableIdforfilterId" binding="#{patientMedicineManageBean.genericMedActionPlanPropertyforGMAPpage}" emptyMessage="#{msg.noMedFound}">
                    <p:column>
                    <p:commandLink process="@this,genericMedActionTableIdforfilterId"  update="genericMedActionTableIdforfilterId"   
                    actionListener="#{patientMedicineManageBean.removeSelectedMonitoringParameterGMAPpage}" title="#{msg.deleteallergy}">
									<h:graphicImage value="./../../Images/delIcon.jpg"
										width="25px" height="30px" id="editMedActionPlanId" />
									  <p:tooltip for="editMedActionPlanId">
										  <h:outputText value="#{msg.deleteallergy}" />  
									</p:tooltip>  
					
					</p:commandLink>
                    </p:column>
                   <p:column headerText="#{msg.monitoring_parameter_label}">
                 <h:outputText value="#{genericMedActionPlanVar.labParameterObj.labType} #{genericMedActionPlanVar.labParameterObj.units}"/>  
                   </p:column>
                    <p:column headerText="#{msg.goal}">
                  <table cellpadding="1" cellspacing="1">
                  <tr>
                  <td style="border:none;">
                   <p:selectOneMenu value="#{genericMedActionPlanVar.goalLowRangeSymbol}">
									<f:selectItems value="#{patientMedicineManageBean.alertSymbolsList}" var="goalRange" itemLabel="#{goalRange.key}"
									itemValue="#{goalRange.value}"/>
									</p:selectOneMenu>
					</td>
					<td style="border:none;">
									<p:inputText value="#{genericMedActionPlanVar.goalLowRangeValue}" size="2" label="#{genericMedActionPlanVar.labParameterObj.labType} Goal " style="width:50px"></p:inputText>
					</td>
					<td style="border: none;">
					<h:outputText	value="#{msg.or_label}" />
					</td>
					 <td style="border:none;">
                   <p:selectOneMenu value="#{genericMedActionPlanVar.goalHighRangeSymbol}" >
									<f:selectItems value="#{patientMedicineManageBean.alertSymbolsList}" var="goalRangeEnd" itemLabel="#{goalRangeEnd.key}"
									itemValue="#{goalRangeEnd.value}"/>
									</p:selectOneMenu>
					</td>
					<td style="border:none;">
									<p:inputText value="#{genericMedActionPlanVar.goalHighRangeValue}" size="2" label="#{genericMedActionPlanVar.labParameterObj.labType} Goal " style="width:50px"></p:inputText>
					</td>
									</tr>
                  </table>
                   </p:column>  
                  <p:column headerText="#{msg.frequency_label}" >
                   
                   <table ><tr><td style="border:none;">
                    <p:selectOneMenu value="#{genericMedActionPlanVar.frequencyNumber}" style="width:50px;">
									<f:selectItems value="#{patientMedicineManageBean.frequencyNoList}" var="frequencyNo" itemLabel="#{frequencyNo.key}"
									itemValue="#{frequencyNo.value}"/>
									</p:selectOneMenu>
                   </td>
                   <td style="border:none;"></td>
                   <td style="border:none;">
                   <p:selectOneMenu value="#{genericMedActionPlanVar.frequencyUnit}" style="width:90px;">
									<f:selectItems value="#{patientMedicineManageBean.frequencyList}" var="frequencyRange" itemLabel="#{frequencyRange.key}"
									itemValue="#{frequencyRange.value}"/>
									</p:selectOneMenu>
									
						</td></tr></table>
                   </p:column>
                  <p:column headerText="#{msg.alert_level_label}">
								<table>
								<tr>
								<td style="border:none;">
									<h:graphicImage value="./../../Images/red1.jpg" height="15px"
										width="20px" />
								</td>
									<td style="border:none;">
									<p:selectOneMenu value="#{genericMedActionPlanVar.alertSevereLowRangeSymbol}">
									<f:selectItems value="#{patientMedicineManageBean.alertSymbolsList}" var="symSevereLowRange" itemLabel="#{symSevereLowRange.key}"
									itemValue="#{symSevereLowRange.value}"/>
									</p:selectOneMenu>
									</td>
									<td style="border:none;">
									<p:inputText value="#{genericMedActionPlanVar.alertSevereLowRangeValue}" size="2" label="#{genericMedActionPlanVar.labParameterObj.labType} Alert " style="width:50px"></p:inputText>
									</td>
									<td style="border:none;">
									<h:outputText value="#{msg.or_label}" />
									</td>
									<td style="border:none;">
									<p:selectOneMenu value="#{genericMedActionPlanVar.alertSevereHighRangeSymbol}">
									<f:selectItems value="#{patientMedicineManageBean.alertSymbolsList}" var="symSevereHighRange" itemLabel="#{symSevereHighRange.key}"
									itemValue="#{symSevereHighRange.value}"/>
									</p:selectOneMenu>
									</td>
									<td style="border:none;">
									<p:inputText value="#{genericMedActionPlanVar.alertSevereHighRangeValue}" size="2" label="#{genericMedActionPlanVar.labParameterObj.labType} Alert " style="width:50px"></p:inputText>
									</td>
									</tr>
									<tr>
									<td style="border:none;">
									<h:graphicImage value="./../../Images/orange1.jpg"
										height="15px" width="20px" />
									</td>
									<td style="border:none;">
									<p:selectOneMenu value="#{genericMedActionPlanVar.alertMediumLowRangeSymbol}">
									<f:selectItems value="#{patientMedicineManageBean.alertSymbolsList}" var="symMediumLowRange" itemLabel="#{symMediumLowRange.key}"
									itemValue="#{symMediumLowRange.value}"/>
									</p:selectOneMenu>
									</td>
									<td style="border:none;">
									<p:inputText value="#{genericMedActionPlanVar.alertMediumLowRangeValue}" size="2" label="#{genericMedActionPlanVar.labParameterObj.labType} Alert " style="width:50px" ></p:inputText>
									</td>
									<td style="border:none;">
									<h:outputText value="#{msg.or_label}" />
									</td>
									<td style="border:none;">	
									<p:selectOneMenu value="#{genericMedActionPlanVar.alertMediumHighRangeSymbol}">
									<f:selectItems value="#{patientMedicineManageBean.alertSymbolsList}" var="symMediumHighRange" itemLabel="#{symMediumHighRange.key}"
									itemValue="#{symMediumHighRange.value}"/>
									</p:selectOneMenu>
									</td>
									<td style="border:none;">
									<p:inputText value="#{genericMedActionPlanVar.alertMediumHighRangeValue}" size="2" label="#{genericMedActionPlanVar.labParameterObj.labType} Alert " style="width:50px"></p:inputText>
									</td>
									</tr>
							 </table>

							</p:column> 
                   <p:column headerText="#{msg.action}">
                  <!--  <p:commandButton value="#{msg.alert_physician_label}"></p:commandButton> -->
								<p:selectOneMenu style="width:150px;">
									<f:selectItem itemLabel="#{msg.alert_physician_label}"
										itemValue="#{msg.alert_physician_label}" />
								</p:selectOneMenu>
							</p:column>
                  </p:dataTable>
               	<table width="100%">
               	<tr>
               	<td align="right">
                  <p:commandButton value="#{msg.cancel}"   
                   onclick="editGenericMedicalActionPlan.hide()"    process="@this"  update=":genericMedActionPlanDialogId">
                    <p:resetInput target=":genericMedActionPlanDialogId"></p:resetInput>
                   </p:commandButton></td>
                    <td >
                   <p:commandButton id="medplan" value="#{msg.done}" process="@this,genericMedActionTableIdforfilterId,dosingStartDate"  
                    actionListener="#{patientMedicineManageBean.saveGenericMedActionPlan}" oncomplete="genericMedActionPlanComplete(xhr, status, args)" ajax="true" update="messagesValidate">
                   
                    </p:commandButton>
                     <p:commandButton id="medplanwithout_diagonosesId" value="#{msg.done}" process="@this,genericMedActionTableIdforfilterId,dosingStartDate" 
                    actionListener="#{patientMedicineManageBean.saveGenericMedActionPlanwithoutdiagnoses}" oncomplete="genericMedActionPlanComplete(xhr, status, args)" ajax="true" update="messagesValidate" style="display:none;">
                    
                    </p:commandButton> 
                    
                     <p:commandButton id="medplanwith_graeter_inrId" value="#{msg.done}" process="@this,genericMedActionTableIdforfilterId,dosingStartDate" 
                    actionListener="#{patientMedicineManageBean.saveGenericMedActionPlanforgreaterinrvalue}" oncomplete="genericMedActionPlanComplete(xhr, status, args)" ajax="true" update="messagesValidate" style="display:none;">
                    
                    </p:commandButton> 
                    </td>
                 </tr>
                  	</table>
                  	 <p:blockUI  id="blockDialog" widgetVar="blockUI"  block=":newGenericMedPlanFormIdforfilterId:genericMedActionTableIdforfilterId">  
                               LOADING ...<br />
							<p:graphicImage value="./../../Images/ajax_loader.gif" width="40" height="40"  />
						</p:blockUI> 
                   </h:form>
                   
				</p:dialog> 
				<!-- ******************************** pop up end for general med action plan............................ -->
					<!-- ******************************** pop up start for Search Lab Monitoring parameters ............................ -->
				<p:dialog id="searchLabGMAPId"
					widgetVar="searchLabMAPDialog" height="300" width="60%"
					resizable="true" appendTo="@(body)" modal="true" dynamic="true"
					closable="true" >
				<p:ajax event="close" update="searchLabGMAPId" />
				<h:form id="searchLabFormId" prependId="false">
				<p:dataTable value="#{patientMedicineManageBean.labLOINCsearchResultSet}" 
				id="searchLabResultsId" var="searchLOINCdataVar" binding="#{patientMedicineManageBean.loincBindingObjGMAPpage}" emptyMessage="#{msg.noMedFound}">
				<p:column headerText="#{msg.lab_list_label}" style="width:40px">
				<p:commandLink value="#{searchLOINCdataVar.shortName}" 
				actionListener="#{patientMedicineManageBean.addToGeneralMedActionGMAPpage}" update=":genericMedActionPlanDialogId" oncomplete="labComplete(xhr, status, args)" style="font-weight: bold;text-decoration:underline;">
				</p:commandLink>
				</p:column>
				
				 <p:column style="width:40px">
							<f:facet name="header">
								<h:outputText value="#{msg.loinc}" />
							</f:facet>
							<h:outputText value="#{searchLOINCdataVar.loincNumber}" />
						 </p:column>
						 <p:column style="width:80px">
							<f:facet name="header">
								<h:outputText value="#{msg.short_name}" />
							</f:facet>
							<h:outputText value="#{searchLOINCdataVar.shortName}" />
						 </p:column>
						 
						 <p:column style="width:180px">
							<f:facet name="header">
								<h:outputText value="#{msg.long_name}" />
							</f:facet>
							<h:outputText value="#{searchLOINCdataVar.longCommonName}" />
						 </p:column>
				</p:dataTable>
				</h:form>
				</p:dialog>
				<!-- ******************************** pop up end for Search Lab Monitoring parameters............................ -->
					<!-- 	>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>pop up for diagnosis>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> -->
			
			
				<p:dialog id="searchdiagnosisOvwPopUpId" header="#{msg.diagnosis}" widgetVar="diagnosisPopUp" modal="true" appendTo="@(body)" hideEffect="fold" resizable="true"
					dynamic="false" width="800" position="430,100" closable="false">
					<p:ajax event="close" update=":searchdiagnosisOvwPopUpId" />
				 <h:form id="searchdiagosisPopUpFormId">	
					<table>
					
					<tr>
						<td> <p:selectOneRadio id="options"
							value="#{patientManageBean.selectIntervention}">
							<f:selectItem itemLabel="Search According Diagnosis Name" itemValue="1" />
							<f:selectItem itemLabel="Search According ICD Code" itemValue="2" noSelectionOption="false"/>
							
						</p:selectOneRadio> 
						
						<!-- 	<input type="radio" name="c1" checked="checked" onclick="hidediv('div2', this)"/>Search According Diagnosis Name
            				<input type="radio" name="c1" onclick="showMe('div2', this)"/>Search According Icd_Code -->
						<!-- <h:outputText id="aaa" value="#{patientMedicineManageBean.showRxTab}" /> -->
						</td>
					</tr>
					</table>
					
				
					<table>
					  <tr>
					    <td>
							<h:outputText value="#{msg.diagnosisname} :" style="font-size:10px;" />
						</td>
						<td align="left">
							<p:inputText size="55"  value="#{patientManageBean.userInputForIcdDiagnosisSearchTable}" id="codeForSearch"  >
	 						
	 						 <p:ajax update="codeForSearch"></p:ajax>  
	 						</p:inputText>
	 						<p:watermark value="#{msg.diagnosiname} According Name and icd_Code" for="codeForSearch"></p:watermark> 
						</td>
						
						<!-- <td>
							<h:outputText value="icd_code :" style="font-size:10px;" />
						</td>
						<td align="right">
							<p:inputText value="#{patientManageBean.userInputForIcdCode}" id="codeForSearch1"  >
	 						
	 						 <p:ajax update="codeForSearch1"></p:ajax>  
	 						</p:inputText>
	 						<p:watermark value="icd_code" for="codeForSearch1"></p:watermark> 
						</td> -->
						</tr>
						
						<tr>
						<td>
							<h:outputText value="#{msg.select_icd_Format} :" style="font-size:10px;" />
						</td>
						<td>
						  <p:selectOneMenu id="icd_drpDown" value="#{patientManageBean.selectedIcdFormat}" immediate="true"
		                        required="true" style="width:137px;">
								 <f:selectItem itemLabel="#{msg.icd9}" itemValue="#{msg.icd9}" />
								 <f:selectItem itemLabel="#{msg.icd10}" itemValue="#{msg.icd10}" />
							 <p:ajax update="icd_drpDown"/>
							</p:selectOneMenu>
						</td>
						</tr>
						
						
						<tr>
						 <td colspan="2" align="left">
							 <p:commandButton value="#{msg.search}" actionListener="#{patientManageBean.searchMasterDiagnosisData}" 
								 update="searchdiagosisPopUpFormId:panel_dignosis"/> 
						 	<p:commandButton value="#{msg.cancel}" actionListener="#{patientManageBean.cleanDiagnosisForm}" oncomplete="diagnosisPopUp.hide();"/> 
						</td>
						</tr>
					</table>
					<br></br>
				<p:outputPanel id="panel_dignosis">
		         
		          <p:outputPanel id="panel_icd10dignosis" rendered="#{patientManageBean.selectedIcdFormat eq 'ICD10'}"> 
		          
		          
		           <p:dataTable value="#{patientManageBean.dignosisdetailsList}" var="searchDiagnosis"  id="searchdatatable"
	 			      scrollable="true" resizableColumns="false" scrollHeight="400" lazy="true" emptyMessage="#{msg.noMedFound}"
							 >
							
							<f:facet name="header">
           									 ICD 10 Details
       						 </f:facet>
							
							
				  		<p:column width="2%" headerText="Short Description" >
								<p:commandLink value="#{searchDiagnosis.shortDesc}" action="#{patientManageBean.findDiagnosisICD10NameOverview}" style="text-decoration:underline;" ajax="true" update=":genericMedActionPlanDialogId" oncomplete="diagnosisPopUp.hide();editGenericMedicalActionPlan.show();">
										<f:setPropertyActionListener target="#{patientManageBean.selectedDiagonisObj}" value="#{searchDiagnosis}" />
								</p:commandLink>
				    	</p:column>
				    	
					    	<p:column width="5%">
									<f:facet name="header">
										<h:outputText value="Long Description" style="text-align:left"/>
								</f:facet>
										<h:outputText value="#{searchDiagnosis.longDesc}" />
						</p:column>
						
					    	<p:column width="5%">
									<f:facet name="header">
										<h:outputText value="ICD Code" style="text-align:left"/>
								</f:facet>
										<h:outputText value="#{searchDiagnosis.formattedDxCode}" />
						</p:column>
						
				  </p:dataTable>
				  
				  
				 </p:outputPanel>
				 
				 <p:outputPanel id="panel_icd9dignosis" rendered="#{patientManageBean.selectedIcdFormat eq 'ICD9'}">
				 
				   <p:dataTable value="#{patientManageBean.icd9DiagnosisList}" var="searchDiagnosis"  id="searchicd9datatable"
	 			        scrollable="true" resizableColumns="false" scrollHeight="400" lazy="true" emptyMessage="#{msg.noMedFound}"
						>
							
					
					<f:facet name="header">
           									 ICD 9 Details
       						 </f:facet>
       						 		
				  	<p:column width="2%" headerText="Short Description" >
								<p:commandLink value="#{searchDiagnosis.shortDescription}" action="#{patientManageBean.setIcd9DiagnosisNameOverview}" style="text-decoration:underline;"  ajax="true" update=":genericMedActionPlanDialogId" oncomplete="diagnosisPopUp.hide();editGenericMedicalActionPlan.show();">
								<f:setPropertyActionListener target="#{patientManageBean.selectedDiagonsisICD9Obj}" value="#{searchDiagnosis}" />
					</p:commandLink>
					
				    </p:column>
				    
				    <p:column width="5%">
								<f:facet name="header">
									<h:outputText value="Long Description" style="text-align:left"/>
							</f:facet>
									<h:outputText value="#{searchDiagnosis.longDiscription}" />
					</p:column>
				    
				    <p:column width="5%">
								<f:facet name="header">
									<h:outputText value="ICD Code" style="text-align:left"/>
							</f:facet>
									<h:outputText value="#{searchDiagnosis.formatedCode}" />
					</p:column>
					
				  </p:dataTable>
			    </p:outputPanel>
			   </p:outputPanel>
			</h:form>	
</p:dialog>

	<!-- ******************************** pop up start for diagnoses confirmation............................ -->
					
				<p:dialog widgetVar="confirmfordiagnoses" header="Do you want to enter a diagnosis?" appendTo="@(body)" global="true" showEffect="fade" hideEffect="explode" > 
<h:form> 
    <p:commandButton value="Yes" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" onclick="diagnosisPopUp.show();confirmfordiagnoses.hide();"/>  
    <p:commandButton value="No"  styleClass="ui-confirmdialog-no" icon="ui-icon-close" onclick="onmedplanclick();confirmfordiagnoses.hide();"/>
       					 </h:form>       
    		</p:dialog> 
					
					<!-- ********************************  pop up end for diagnoses confirmation............................ -->
					
				<p:dialog id="medPlanMessagesGMAPId"  widgetVar="medPlanExistsWidgetVar" appendTo="@(body)" hideEffect="fold" resizable="true"
					dynamic="true" closable="true" >
		<p:ajax event="close" update="medPlanMessagesGMAPId"></p:ajax>
		<h:form>
		<h:outputText value="Following parameters already contain Med Action Plan in the below table"></h:outputText>
<p:dataList value="#{patientMedicineManageBean.medPlanSelectedParams}" var="selectedParam" type="definition">
#{selectedParam}
</p:dataList>

		<p:dataTable value="#{patientMedicineManageBean.medPlanMessages}" var="parentMAPobj">
		
		<p:column headerText="Med">
		<h:outputText value="#{parentMAPobj.drugName}"></h:outputText>
		</p:column>
		<p:column>
		  <p:dataTable value="#{parentMAPobj.childLabParameters}" var="labParameterVar"  >
									 	 <p:column headerText="#{msg.monitoring_parameter_label}">
									 	 <h:outputText value="#{labParameterVar.labType}"></h:outputText>
									 	 </p:column>
											<p:column headerText="Goal">
											<h:outputText value="#{labParameterVar.goalRange}"></h:outputText>
											</p:column>
										
									
										</p:dataTable>
		</p:column>
		</p:dataTable>
		<h:outputText value="#{msg.medPlanLabel2}"></h:outputText>
	<table width="100%">
	<tr><td align="center">
				<p:commandButton  oncomplete="editGenericMedicalActionPlan.show();medPlanExistsWidgetVar.hide()" value="ok" actionListener="#{patientMedicineManageBean.clearMAPUI}"  ></p:commandButton>
				</td>
				</tr>
				</table>
		</h:form>
		</p:dialog> 
			</p:layoutUnit>
		</p:layout>

			
			<!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> CENTER LAYOUT ENDS  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>  -->
		
	</f:view>
</h:body>
</html>

