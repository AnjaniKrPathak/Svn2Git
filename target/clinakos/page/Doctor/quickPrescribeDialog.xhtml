<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:p="http://primefaces.org/ui" template="../templates/ui.xhtml">	

<ui:composition>

<p:dialog widgetVar="quickPrescribe" resizable="false" draggable="true" id="medicationActionPlanPopId"
	appendTo="@(body)" modal="true"   height="530" width="880" 
	 dynamic="true" closable="false" position="bottom"><!-- position="500,400" -->

		<f:facet name="header">
      					<h:outputText id="quickPrescribeHeader" value="#{patientMedicineManageBean.patientMedicationData.drugs}" styleClass="outputtext" />
   					</f:facet>
		
		
	 <h:form id="medactionPlanFormId">   
	 
	   <table width="98%">
	 			<!-- <tr>
	 				<td ><h:outputText value="Prescribe Medicine For Clinics" styleClass="outputtext"></h:outputText></td>
						
	 			</tr> -->
	 			
	 			 <tr>
	 				<td>
	 			<!-- 	<h:outputText id="quickPrescribeHeader" value="#{patientMedicineManageBean.patientMedicationData.drugs}" styleClass="outputtext"/> -->
	 				</td>
	 				
	 				
	 				<td align="right">
							<p:commandButton id="dosingGuidelineWizardId" value="#{msg.dosingGuidelineWizard}" immediate="true"
								action="#{patientMedicineManageBean.afterAddNewMedicine1}" 
														update=":warfarinheaderIdValue,:DabigatranHeader,:ApixabanHeader,:RivaroxabanHeader,:FondaparinuxHeader,:DesirudinHeader,:dalteparinHeader,:EnoxaparinHeader">
										<p:ajax update="dosingGuidelineWizardId"></p:ajax>		
								</p:commandButton>				
						
							<!-- <p:commandButton value="#{msg.sendToAnticoagClinic}" action="#{patientMedicineManageBean.sendToAnticoagTab}"  
					
													update="@form"/> -->
							<p:commandButton value="Clinic To Dose" action="#{patientMedicineManageBean.sendToAnticoagTab}" immediate="true"/>
							
						</td>
	 			</tr> 
	 		
	 		
	 			
	 		</table> 
	 		
	 		
	 	 <p:messages  id="messageUpdateForQuickPrescribe" showDetail="false" style="color:red;" closable="true"/> 
			
		<p:outputPanel rendered="#{patientMedicineManageBean.medActionPlan.value eq 1}"> 
			<table>
					<tr>

						<td><h:outputText value="Calculated recommended dose:" style="font-weight:bold;"/></td>
						<td><h:outputText value="#{patientMedicineManageBean.weekStatus}" /></td>
						<td><h:outputText value="(mg/week)" /></td>

									</tr>
			</table>
			
			 </p:outputPanel> 
			 
		 <p:outputPanel deferred="true" deferredMode="visible" rendered="#{patientMedicineManageBean.drugInteractions.size() ge 1 }" >
					
						<table>
							<tr>
							
							
								<td><h:outputText value="Drug-drug interaction:" style="font-weight:bold;color:red;" /></td>
							
								<td>
									
											<p:commandLink id="grow"   style="text-decoration:underline;" onmouseover="showDetails.show();" onmouseout="showDetails.hide();">
											
											<h:outputText  value="#{patientMedicineManageBean.drugInteractions.size()}" escape="false" style="color:red;"/>		
								             &nbsp;<h:outputText  value="Interactions detected"  style="color:red;"/> 
								             
								            </p:commandLink>
								            
								              <!-- <p:tooltip for="grow"  showEffect="clip" style="width:40%; position:relative; margin-left:10%;" > -->
								              
								              <p:dialog widgetVar="showDetails" showEffect="clip" hideEffect="clip" width="600" 
								              			closable="false" appendTo="@(body)">
								              			
								              			<f:facet name="header">
								             					<h:outputText value="Drug-drug interaction"></h:outputText>
								             				</f:facet>
								             
								             					<p:dataTable  value="#{patientMedicineManageBean.drugInteractions}" var="drugInteractionsDetail" emptyMessage="#{msg.noMedFound}">
										
																	<p:column styleClass="wrap">
																		<f:facet name="header">
																			<h:outputText value="Drug" />
																		</f:facet>
																		<h:outputText value="#{drugInteractionsDetail.drug1}"  />  
																	</p:column>
																	
																	<!-- <p:column styleClass="wrap" >
																		<f:facet name="header">
																			<h:outputText value="Drug2" />
																		</f:facet>
																		<h:outputText value="#{drugInteractionsDetail.drug2}"  />  
																	</p:column> -->
																	
																	<p:column styleClass="wrap" >
																		<f:facet name="header">
																			<h:outputText value="Clinical Effects " />
																		</f:facet>
																		<h:outputText value="#{drugInteractionsDetail.clinicalEffects}"  />  
																	</p:column>
																	
																	<p:column styleClass="wrap">
																		<f:facet name="header">
																			<h:outputText value="Severity Level" />
																		</f:facet>
																		<h:outputText value="#{drugInteractionsDetail.severityLevel}"  />  
																	</p:column>
																	
																</p:dataTable>
								             		
								             	
								             <!-- </p:tooltip> -->
								             
								             </p:dialog>
								        
								      
								</td>
										<!-- <p:dataTable  value="#{patientMedicineManageBean.drugInterectionListDetail}" var="drugServityDetail" >
										
										
																		
																			<h:outputText value="drugServityDetail" />
																		
																		<h:outputText value="#{drugServityDetail.severityLevel}"  />  
																	
												</p:dataTable> -->
												
												
											
								<td>
										<h:outputText value="Highest Severity:"  style="font-weight:bold;color:red;"/>&nbsp;
										<h:outputText value="#{patientMedicineManageBean.highestServity}" rendered="#{patientMedicineManageBean.highestServity eq 'High'}"
										style="text-decoration:none;color:red;"/>
										<h:outputText value="#{patientMedicineManageBean.highestServity}" rendered="#{patientMedicineManageBean.highestServity eq 'Medium'}"
										style="text-decoration:none;color:orange;"/>
										<h:outputText value="#{patientMedicineManageBean.highestServity}" rendered="#{patientMedicineManageBean.highestServity eq 'Low'}"
										style="text-decoration:none;color:green;"/>
												
												<!-- <ui:repeat var="drugServityDetail" 
														value="#{patientMedicineManageBean.highestServity}"
														varStatus="loop">
											         #{drugServityDetail.severityLevel}
											              #{!loop.last ? ', ' : ''} 
								            
										</ui:repeat> -->
								</td>
							</tr>
					</table>
			</p:outputPanel>
			
			<p:outputPanel deferred="true" deferredMode="visible" rendered="#{patientMedicineManageBean.drugAllergyInteractions.size() ge 1}">
							
						<table>
							<tr>
							
							<td><h:outputText value="drug-allergy interaction:"  style="font-weight:bold;color:red;"/></td>
								<td>
								
									
										<p:commandLink id="grow1"   style="text-decoration:underline;" onmouseover="showDetails1.show();" onmouseout="showDetails1.hide();">
											<h:outputText value="#{patientMedicineManageBean.drugAllergyInteractions.size()}"  escape="false" style="color:red;"/>		
								           &nbsp;  <h:outputText value="Interactions detected"   style="color:red;"/>
								             
								             </p:commandLink> 
								             
								             
								              <!-- <p:tooltip for="grow1"  showEffect="clip" style="width:40%; position:relative; margin-left:10%;" > -->
								              
								              <p:dialog widgetVar="showDetails1" showEffect="clip" hideEffect="clip" width="600" 
								              			closable="false" appendTo="@(body)">
								             		
								             		<f:facet name="header">
								             					<h:outputText value="Drug-allergy interaction"></h:outputText>
								             				</f:facet>
								             
								             					<p:dataTable value="#{patientMedicineManageBean.drugAllergyInteractions}" var="drugAllergyInteractionsDetail" emptyMessage="#{msg.noMedFound}">
										
																	<p:column styleClass="wrap">
																		<f:facet name="header">
																			<h:outputText value="Allergy Interaction Text" />
																		</f:facet>
																		<h:outputText value="#{drugAllergyInteractionsDetail.interactionText}"  />  
																	</p:column>
																	
																	
																</p:dataTable>
								             			
								             	 <!-- </p:tooltip> -->
								             	 
								             	 </p:dialog>
								            
								       
								    
								      
								</td>
								
								<td>
										<h:outputText value="Highest Severity:"  style="font-weight:bold;color:red;"/>&nbsp;
										<!-- <h:outputText value="#{patientMedicineManageBean.highestServityForAllergy}"  /> -->
										
										<h:outputText value="#{patientMedicineManageBean.highestServityForAllergy}" rendered="#{patientMedicineManageBean.highestServityForAllergy eq 'High'}"
										style="text-decoration:none;color:red;"/>
										<h:outputText value="#{patientMedicineManageBean.highestServityForAllergy}" rendered="#{patientMedicineManageBean.highestServityForAllergy eq 'Medium'}"
										style="text-decoration:none;color:orange;"/>
										<h:outputText value="#{patientMedicineManageBean.highestServityForAllergy}" rendered="#{patientMedicineManageBean.highestServityForAllergy eq 'Low'}"
										style="text-decoration:none;color:green;"/>
												
												<!-- <ui:repeat var="drugServityDetail" 
														value="#{patientMedicineManageBean.highestServity}"
														varStatus="loop">
											         #{drugServityDetail.severityLevel}
											              #{!loop.last ? ', ' : ''} 
								            
										</ui:repeat> -->
								</td>
							</tr>
					</table>	
			</p:outputPanel>
			<p:outputPanel deferred="true" deferredMode="visible" rendered="#{patientMedicineManageBean.drugDiseaseDetailsInteractions.size() ge 1}">
					<table>	
							<tr>
							
							<td><h:outputText value="Drug Disease:"  style="font-weight:bold;color:red;"/></td>
								<td>
									
										<p:commandLink id="grow2"   style="text-decoration:underline;">
											<h:outputText value="#{patientMedicineManageBean.drugDiseaseDetailsInteractions.size()}" escape="false" style="color:red;"/>		
								            &nbsp; <h:outputText value="Interactions detected"  style="color:red;"/>
								              
								          </p:commandLink>
								          
								       <p:tooltip for="grow2"  showEffect="clip" style="width:40%; position:relative; margin-left:-8%;" >
								          
								         <!-- <p:dialog widgetVar="showDetails2" showEffect="clip" hideEffect="clip" width="600" 
								              			closable="false" appendTo="@(body)"> -->
								             		<p:dataTable value="#{patientMedicineManageBean.drugDiseaseDetailsInteractions}" var="drugDiseaseDetailsInteractionsDetail" emptyMessage="#{msg.noMedFound}">
										
										<f:facet name="header">
								             					<h:outputText value="Drug Disease"></h:outputText>
								             				</f:facet>
																	<p:column styleClass="wrap">
																		<f:facet name="header">
																			<h:outputText value="Drug Name" />
																		</f:facet>
																		<h:outputText value="#{drugDiseaseDetailsInteractionsDetail.drugName}"  />  
																	</p:column>
																	
																	<p:column styleClass="wrap">
																		<f:facet name="header">
																			<h:outputText value="Direct Condition" />
																		</f:facet>
																		<h:outputText value="#{drugDiseaseDetailsInteractionsDetail.directCondition}"  />  
																	</p:column>
																	
																	<p:column styleClass="wrap">
																		<f:facet name="header">
																			<h:outputText value="Severity Level Text" />
																		</f:facet>
																		<h:outputText value="#{drugDiseaseDetailsInteractionsDetail.severityLevelText}"  />  
																	</p:column>
																	
																	<p:column styleClass="wrap">
																		<f:facet name="header">
																			<h:outputText value="Disease Relation" />
																		</f:facet>
																		<h:outputText value="#{drugDiseaseDetailsInteractionsDetail.diseaseRelationText}"  />  
																	</p:column>
																	
																	
																</p:dataTable>
								             			
								             	</p:tooltip>
								             	 
								             	<!--  </p:dialog> -->
								             	 
								        
								      
								</td>
								<td>
										<h:outputText value="Highest Severity:"  style="font-weight:bold;color:red;"/>&nbsp;
										<!-- <h:outputText value="#{patientMedicineManageBean.highestServityForDisease}" /> -->
										
										
										<h:outputText value="#{patientMedicineManageBean.highestServityForDisease}" rendered="#{patientMedicineManageBean.highestServityForDisease eq 'High'}"
										style="text-decoration:none;color:red;"/>
										<h:outputText value="#{patientMedicineManageBean.highestServityForDisease}" rendered="#{patientMedicineManageBean.highestServityForDisease eq 'Medium'}"
										style="text-decoration:none;color:orange;"/>
										<h:outputText value="#{patientMedicineManageBean.highestServityForDisease}" rendered="#{patientMedicineManageBean.highestServityForDisease eq 'Low'}"
										style="text-decoration:none;color:green;"/>			
												<!-- <ui:repeat var="drugServityDetail" 
														value="#{patientMedicineManageBean.drugInterectionListDetail}"
														varStatus="loop">
											         #{drugServityDetail.drugDiseaseInterectionListDetail}
											              #{!loop.last ? ', ' : ''} 
								            
										</ui:repeat> -->
								</td>
							</tr>
					</table>
		
			</p:outputPanel>
			<p:outputPanel deferred="true" deferredMode="visible" rendered="#{patientMedicineManageBean.pharmacogenomicInteractionDetailList.size() ge 1}">
						
							
							<table>	
							<tr>
							
							<td><h:outputText value="Pharmacogenomics:"  style="font-weight:bold;color:red;"/></td>
								<td>
									
										<p:commandLink id="grow3"   style="text-decoration:underline;" onmouseover="showDetails3.show();" onmouseout="showDetails3.hide();">
											<h:outputText value="#{patientMedicineManageBean.pharmacogenomicInteractionDetailList.size()}" escape="false" style="color:red;"/>		
								             &nbsp;<h:outputText value="Interactions detected" style="color:red;"/>
								          </p:commandLink>  
								          
								          <!-- <p:tooltip for="grow3"  showEffect="clip" style="width:44%; position:relative; margin-left:-8%;" > -->
								          
								          <p:dialog widgetVar="showDetails3" showEffect="clip" hideEffect="clip" width="600" 
								              			closable="false" appendTo="@(body)">
								             		
								             	<f:facet name="header">
								             					<h:outputText value="Pharmacogenomics"></h:outputText>
								             				</f:facet>
								             
								             					<p:dataTable value="#{patientMedicineManageBean.pharmacogenomicInteractionDetailList}" var="pharmacogenomicInteractionDetail" emptyMessage="#{msg.noMedFound}">
																	
																	<p:column styleClass="wrap">
																		<f:facet name="header">
																			<h:outputText value="Gene" />
																		</f:facet>
																		<h:outputText value="#{pharmacogenomicInteractionDetail.gene1}"  />  
																	</p:column> 
																	
																	<p:column styleClass="wrap">
																		<f:facet name="header">
																			<h:outputText value="Phenotype" />
																		</f:facet>
																		<h:outputText value="#{pharmacogenomicInteractionDetail.phenotype}"  />  
																	</p:column> 
																	
																	<p:column styleClass="wrap">
																		<f:facet name="header">
																			<h:outputText value="Impact" />
																		</f:facet>
																		<h:outputText value="#{pharmacogenomicInteractionDetail.impact}"  />  
																	</p:column>
																	
																	<p:column styleClass="wrap">
																		<f:facet name="header">
																			<h:outputText value="Implications" />
																		</f:facet>
																		<h:outputText value="#{pharmacogenomicInteractionDetail.implications}"  />  
																	</p:column>
																	
																	<p:column styleClass="wrap">
																		<f:facet name="header">
																			<h:outputText value="Recommendation" />
																		</f:facet>
																		<h:outputText value="#{pharmacogenomicInteractionDetail.recommendation}"  />  
																	</p:column>
																	
																	
																</p:dataTable>
								             			
								             	 <!-- </p:tooltip> -->
								             	 
								             	 </p:dialog>
								             	 
								        
								      
								</td>
								<td>
										<h:outputText value="Highest Severity:"  style="font-weight:bold;color:red;"/>&nbsp;
										<!-- <h:outputText value="#{patientMedicineManageBean.highestServityForpharmacogenomic}"  /> -->
										
										<h:outputText value="#{patientMedicineManageBean.highestServityForpharmacogenomic}" rendered="#{patientMedicineManageBean.highestServityForpharmacogenomic eq 'High'}"
										style="text-decoration:none;color:red;"/>
										<h:outputText value="#{patientMedicineManageBean.highestServityForpharmacogenomic}" rendered="#{patientMedicineManageBean.highestServityForpharmacogenomic eq 'Medium'}"
										style="text-decoration:none;color:orange;"/>
										<h:outputText value="#{patientMedicineManageBean.highestServityForpharmacogenomic}" rendered="#{patientMedicineManageBean.highestServityForpharmacogenomic eq 'Low'}"
										style="text-decoration:none;color:green;"/>				
												
												<!-- <ui:repeat var="drugServityDetail" 
														value="#{patientMedicineManageBean.drugPharmaInterectionListDetail}"
														varStatus="loop">
											         #{drugServityDetail.severityLevel}
											              #{!loop.last ? ', ' : ''} 
								            
										</ui:repeat> -->
								</td>
							</tr>
					</table>
							
				</p:outputPanel>
				
					<ui:include src="precautions.xhtml">
				
				</ui:include>
				
			<!-- for formulary detail started -->
			<!-- <h:outputText value="111AS : #{patientMedicineManageBean.patientMedicationData.formularySymbol}" style="font-weight:bold;color:red;"/>&nbsp;  -->
				<p:outputPanel rendered="#{!(patientMedicineManageBean.patientMedicationData.formularySymbol eq '')}">
				<table>
					<tr>
						<td>
						<h:outputText value="Formulary:"  style="font-weight:bold;color:red;"/>&nbsp;
						<h:outputText value="#{patientMedicineManageBean.patientMedicationData.formularyText}" style="font-weight:bold;color:red;"></h:outputText>
						</td>
					</tr>
				
				</table>
				</p:outputPanel>
				<!-- for formulary detail End -->
			
			
			<hr /> 
			
			<h:outputText value="Quick Prescribe " styleClass="outputtext"/>
			<br />
			<br />
			<br />
			<table width="100%">
					<tr align="center">
						<td>
							<h:outputText value="Strength" styleClass="outputtext"/>
							 <h:outputText value="*" styleClass="mandatoryField"/> 
						</td>
						
						<td>
							
						</td>
						
						<td>
							<h:outputText value="Unit" styleClass="outputtext"/>
							<h:outputText value="*" styleClass="mandatoryField"/>
						</td>
						
						<td>
							<h:outputText value="Dosage form" styleClass="outputtext"/>
							<h:outputText value="*" styleClass="mandatoryField"/>
						</td>
						
						<td>
							<h:outputText value="Route" styleClass="outputtext"/>
							<h:outputText value="*" styleClass="mandatoryField"/>
						</td>
						
						<td>
							<h:outputText value="Regimen" styleClass="outputtext"/>
							<h:outputText value="*" styleClass="mandatoryField"/>
						</td>
						
						<td>
							<h:outputText value="PRN" styleClass="outputtext"/>
							
						</td>
						
						<td>
							<h:outputText value="Additional Sig" styleClass="outputtext"/>
							<!-- <h:outputText value="*" styleClass="mandatoryField"/> -->
						</td>
					</tr>
					
					
					
									<tr>
										<td>
												<p:selectOneMenu required="true" requiredMessage="Please Select Strength"
														value="#{patientMedicineManageBean.patientMedicationData.strengths}"
														style="width:170px;">
														
														<!-- <f:selectItem
															itemLabel="#{patientMedicineManageBean.patientMedicationData.strengths}"
															itemValue="#{patientMedicineManageBean.patientMedicationData.strengths}" /> -->
														<f:selectItems value="#{patientMedicineManageBean.doseDetailList}"
															var="doseList" itemLabel="#{doseList.dose}" itemValue="#{doseList.dose}" />
													<p:ajax event="change" listener="#{patientMedicineManageBean.updateDoasgeForm}" update="dosageAntiCoagFormId"></p:ajax>
												</p:selectOneMenu>
									
											</td>
											
												<td>
													<p:commandLink rendered="#{patientMedicineManageBean.patientMedicationData.genericName eq 'Warfarin' || patientMedicineManageBean.patientMedicationData.genericName eq 'warfarin'}"
															actionListener="#{patientMedicineManageBean.findWarfarinDoseCalculator}" immediate="true" 
															oncomplete="warfarinDoseCalculator.show()">
														<p:graphicImage value="../../Images/doseCal.jpg"  style="width:34px;height:34px;"/>
															<f:param value="#{dashBoardManageBean.userLoginDetail.age}" name="patientAge"></f:param>
												   </p:commandLink>
					
											</td>
											
											<td>
						 	 	 	 			<p:selectOneMenu required="true" requiredMessage="Please insert unit"
															value="#{patientMedicineManageBean.patientMedicationData.unit}"
															style="width:100px;">
															
															<f:selectItems value="#{patientMedicineManageBean.unitSummaryList}"
																var="unitList" itemLabel="#{unitList.unit}" itemValue="#{unitList.unit}" />
																
																 <p:ajax listener="#{patientMedicineManageBean.calculateTotalDispence}" update="dispenceNumber"></p:ajax>	 
												</p:selectOneMenu>
						 	 	 	 		</td>
						 	 	 	 		
						 	 	 	 		<td>
											
											<!-- <p:selectOneMenu required="true" requiredMessage="Please insert Dosage form"
															value="#{patientMedicineManageBean.patientMedicationData.dosageForm}"
															style="width:122px;">
															<f:selectItem itemLabel="#{patientMedicineManageBean.patientMedicationData.dosageForm}" itemValue="#{patientMedicineManageBean.patientMedicationData.dosageForm}" />
											
													<f:selectItems value="#{patientMedicineManageBean.unitDetailsList}"
															var="unitList" itemLabel="#{unitList.unitName}" itemValue="#{unitList.unitName}" />
													</p:selectOneMenu> -->
													 <p:selectOneMenu required="true" requiredMessage="Please insert Dosage form"
															value="#{patientMedicineManageBean.patientMedicationData.dosageForm}"
															style="width:122px;" id="dosageAntiCoagFormId">
															<!-- <f:selectItem itemLabel="#{patientMedicineManageBean.patientMedicationData.dosageForm}" itemValue="#{patientMedicineManageBean.patientMedicationData.dosageForm}" />
											
													<f:selectItems value="#{patientMedicineManageBean.unitDetailsList}"
															var="unitList" itemLabel="#{unitList.unitName}" itemValue="#{unitList.unitName}" /> -->
															<f:selectItems value="#{patientMedicineManageBean.dosageForms}"
															var="dosageObj" itemLabel="#{dosageObj}" itemValue="#{dosageObj}" />
													</p:selectOneMenu>
													
												<!-- <p:inputText style="width:80px;" value="#{patientMedicineManageBean.patientMedicationData.dosageForm}" readonly="true"></p:inputText> -->	
											</td>
											
											<td>
						 	 	 	 			<p:selectOneMenu  required="true" requiredMessage="Please insert Route"
															value="#{patientMedicineManageBean.patientMedicationData.byRoute}"
															style="width:122px;">
															<f:selectItem itemLabel="#{patientMedicineManageBean.patientMedicationData.byRoute}" itemValue="#{patientMedicineManageBean.patientMedicationData.byRoute}" />
															<f:selectItems value="#{patientMedicineManageBean.routeDetailsList}"
																var="routeDetailList" itemLabel="#{routeDetailList.routeName}" itemValue="#{routeDetailList.routeName}" />
												</p:selectOneMenu>
												
												<!-- <p:inputText style="width:90px;" value="#{patientMedicineManageBean.patientMedicationData.byRoute}" readonly="true"></p:inputText> -->
						 	 	 	 		</td>
											
											<td>
							 	 	 	 			<p:selectOneMenu required="true" requiredMessage="Please Select Regimen"
																value="#{patientMedicineManageBean.patientMedicationData.directions}"
																style="width:145px;">
																
																<f:selectItem
																	itemLabel=""
																	itemValue="" />
																	
																<f:selectItems value="#{patientMedicineManageBean.regimenList}"
																	var="regimen" itemLabel="#{regimen}" itemValue="#{regimen}" />
																	
																	 <p:ajax listener="#{patientMedicineManageBean.calculateTotalDispence}" update="dispenceNumber"></p:ajax> 	
													</p:selectOneMenu>
							 	 	 	 		</td>
							 	 	 	 		
							 	 	 	 		<td>
							 	 	 	 			<p:selectBooleanCheckbox value="#{patientMedicineManageBean.patientMedicationData.prn}" />  
							 	 	 	 		</td>
							 	 	 	 		
							 	 	 	 		<td>
							 	 	 	 			<p:inputText value="#{patientMedicineManageBean.patientMedicationData.additionalSig}" style="width:80px;"></p:inputText>
							 	 	 	 		</td>
									</tr>
			
			</table>
			
			<br />
			<br />
			
			<table>
				<tr align="center">
					<td >
						<h:outputText value="Allow Substitution" styleClass="outputtext"/>
							
						
					</td>
					<td></td>
					<td>
						<h:outputText value="Dispense" styleClass="outputtext"/>
							<h:outputText value="*" styleClass="mandatoryField"/>
					</td>
					<td></td>
					<td >
						<h:outputText value="Days Supply" styleClass="outputtext"/>
							<h:outputText value="*" styleClass="mandatoryField"/>
					</td>
					<td></td>
					<td >
						<h:outputText value="Refills" styleClass="outputtext"/>
							<h:outputText value="*" styleClass="mandatoryField"/>
					</td >
					<td></td>
					<td >
						<h:outputText value="DAW / DNS" styleClass="outputtext"/>
					</td>
					<td></td>
					&nbsp;
					<td>
						<h:outputText value="One Time" styleClass="outputtext"/>
					</td>
				<!-- 	&nbsp;
					<td>
						<h:outputText value="2nd rx 90 Day" styleClass="outputtext"/>
					</td>
					&nbsp;
					<td>
						<h:outputText value="Save this sig and add to Doctor's List" styleClass="outputtext"/>
					</td> -->
				</tr>
				
				
				<tr>
					<td align="center" valign="top">
						<p:selectBooleanCheckbox value="#{patientMedicineManageBean.patientMedicationData.allowSubstitution}" />  
					</td>
					<td valign="top"></td>
					<td valign="top">
	 	 	 	 						<p:inputText id="dispenceNumber" style="width:50px;" converter="#{Integer}" maxlength="3"  
															value="#{patientMedicineManageBean.patientMedicationData.quantity}" >
													<f:convertNumber  pattern="#,###" integerOnly="true"  minFractionDigits="3" maxIntegerDigits="3" type="number"/>
												</p:inputText>
	 	 	 	 		</td>
	 	 	 	 		<td valign="top"></td>
	 	 	 	 		<td valign="top">
	 	 	 	 			
							 <p:selectOneMenu 
										value="#{patientMedicineManageBean.patientMedicationData.daySupply}"
										style="width:90px;">
											<!-- <f:selectItem itemValue="#{patientMedicineManageBean.patientMedicationData.daySupply}" 
													itemLabel="#{patientMedicineManageBean.patientMedicationData.daySupply}"></f:selectItem> -->
										<f:selectItems value="#{patientMedicineManageBean.daySupplyList}"
											var="daySupplyDetailList" itemLabel="#{daySupplyDetailList}" itemValue="#{daySupplyDetailList}" />
										
										 <p:ajax listener="#{patientMedicineManageBean.calculateTotalDispence}" update="dispenceNumber"></p:ajax> 
										
									</p:selectOneMenu> 
								<!-- <p:inputText value="#{patientMedicineManageBean.patientMedicationData.daySupply}" style="width:80px;"></p:inputText> -->
	 	 	 	 		</td>
	 	 	 	 		<td valign="top"></td>
	 	 	 	 		<td valign="top">
	 	 	 	 			<p:selectOneMenu required="true" 
										value="#{patientMedicineManageBean.patientMedicationData.reffils}"
										style="width:70px;">
										
										<f:selectItems value="#{patientMedicineManageBean.refillDetailsList}"
											var="refillList" itemLabel="#{refillList}" itemValue="#{refillList}" />
										<p:ajax event="change" update="oneTimeId"></p:ajax>
									</p:selectOneMenu>
	 	 	 	 		</td>
	 	 	 	 		<td valign="top"></td>
	 	 	 	 		<td align="center" valign="top">
						<p:selectBooleanCheckbox value="#{patientMedicineManageBean.patientMedicationData.daw_dns}" />  
					</td>
					<td valign="top"></td>
					<td align="center" valign="top" >
						<p:selectBooleanCheckbox value="#{patientMedicineManageBean.patientMedicationData.one_Time}" disabled="#{patientMedicineManageBean.patientMedicationData.reffils > 0 }" id="oneTimeId"/>  
					</td>
					<!-- <td align="center">
						<p:selectBooleanCheckbox value="#{patientMedicineManageBean.patientMedicationData.secondrx_90days}" />  
					</td>
					<td align="center">
						<p:selectBooleanCheckbox value="#{patientMedicineManageBean.patientMedicationData.savetodoctorlist}" />  
					</td> -->
				</tr>
			</table>
			
			<br />
			<br />
			
			
			<hr />
			
				<p:outputPanel id="medActionForWarfarin"  rendered="#{patientMedicineManageBean.patientMedicationData.genericName eq 'warfarin' }">
			<table>
				<tr>
					<td>
					<h:outputText value="Do you want to create med action plan ? "></h:outputText>
					<p:selectBooleanCheckbox value="#{patientMedicineManageBean.showMedActionPlanForWarfarin}">
					
						 <p:ajax  listener="#{patientMedicineManageBean.checkMedActionPlanForWarfarin}"/> 
					</p:selectBooleanCheckbox>
					</td>
				</tr>
			</table>
			<table width="100%">
				<tr align="center">
					<td>
						<h:outputText value="#{msg.diagnoses}" styleClass="outputtext"/>
					</td>
					
					<td>
						<h:outputText value="Subdiagnosis" styleClass="outputtext"/>
					</td>
				</tr>
				
						<tr>
							<td>
								<p:selectOneMenu  value="#{patientMedicineManageBean.medActionPlan.diagnosis}"  style="width:400px;">
									<f:selectItem itemLabel="Select One" itemValue=""/>
									<!-- <f:selectItems value="#{patientMedicineManageBean.clinicDiagnosisList}" var="clinick" itemLabel="{clinick}" itemValue="{clinick}"/> -->
									<f:selectItems id="diagnosisListId" 
										value="#{patientMedicineManageBean.clinicDiagnosisList}"
											var="clinick" itemLabel="#{clinick.diagnosisName}"
										itemValue="#{clinick.diagnosisName}" />
								
									<p:ajax
										listener="#{patientMedicineManageBean.changediagnosisForSubdiagnosis}" update="medActionForWarfarin1"
									></p:ajax>
								</p:selectOneMenu>
							</td>
							<td>
								<p:selectOneMenu  value="#{patientMedicineManageBean.subDiagnosisDetail}" id="medActionForWarfarin1" style="width:400px;">  
									<f:selectItem itemLabel="Select One" itemValue="" />
										<f:selectItems id="subdiagnosisListId"
										value="#{patientMedicineManageBean.clinicSubDiagnosisList}"
										var="clinicSubDiagnosis" itemLabel="#{clinicSubDiagnosis.subDiagnosisName}"
										itemValue="#{clinicSubDiagnosis.subDiagnosisName}" />
								
								</p:selectOneMenu>  
							</td>
						</tr>
						</table>
						<br/>
						<table width="100%">
						
						<tr>
							<td>
								<table width="100%">
									<tr>
									
										
										<td >
											<h:outputText value="Acceptable Range" styleClass="outputtext"/>
										</td>
											
										<td align="center">
											<h:outputText value="Phase" styleClass="outputtext"/>
										</td>
									</tr>
					
									<tr>
										<td>
											<p:selectOneMenu 
											          value="#{patientMedicineManageBean.medActionPlan.acceptableRange}" style="width:180px;">
											          <!-- <f:selectItem
															itemLabel="" itemValue="" /> -->
											<f:selectItems id="targetInrId"
												value="#{patientMedicineManageBean.inrGoalTargetList}"
												var="inrTarget" itemLabel="#{inrTarget}"
												itemValue="#{inrTarget}" />
										
										</p:selectOneMenu>
										
										
										</td>
										<td>
											<p:selectOneMenu 
															value="#{patientMedicineManageBean.medActionPlan.medicineStage}" style="width:180px;">
														<f:selectItem
															itemLabel="Initiation" itemValue="Initiation" />
														<f:selectItem
															itemLabel="Maintenance" itemValue="Maintenance" />
												<p:ajax update="labdetailId" />
												</p:selectOneMenu>
										
										
										</td>
									</tr>
								</table>
								</td>
								<td>
									 <table>
							 	 	  	<tr>
							 	 	  	
							 	 	  	<td valign="top">
															<p:dataTable value="#{patientMedicineManageBean.labDetailList}" var="labDetail" id="labdetailId" emptyMessage="#{msg.noMedFound}">
																
																<!-- <p:column>
																	<f:facet name="header">
																		<h:outputText value="Select" />
																	</f:facet>
																	<p:selectBooleanCheckbox value="#{labDetail.selected}"  />  
																</p:column>
																 -->
																<p:column>
																	<f:facet name="header">
																		<h:outputText value="Lab Name" />
																	</f:facet>
																	<h:outputText value="#{labDetail.labName}" />
																</p:column>
																
																<p:column>
																	<f:facet name="header">
																		<h:outputText value="Monitoring frequency" />
																	</f:facet>
																	<p:selectOneMenu value="#{labDetail.labfrequencyDetail}" 
																		rendered="#{patientMedicineManageBean.medActionPlan.medicineStage eq 'Initiation' or  patientMedicineManageBean.medActionPlan.medicineStage eq null}" style="width:90px;">
																					<f:selectItem
																						itemLabel=""
																						itemValue="" /> 
																					<f:selectItems 
																							value="#{patientMedicineManageBean.labFrequencyList}"
																							var="labFreq" itemLabel="#{labFreq}" itemValue="#{labFreq}" />
																				<p:ajax 
																					listener="#{patientMedicineManageBean.findNextlabDate}"
																					></p:ajax>
																		</p:selectOneMenu>
																		
																		
																		<p:selectOneMenu value="#{labDetail.labfrequencyDetail}" 
																		rendered="#{patientMedicineManageBean.medActionPlan.medicineStage eq 'Maintenance'}" style="width:90px;">
																					<f:selectItem
																						itemLabel=""
																						itemValue="" /> 
																					<f:selectItems 
																							value="#{patientMedicineManageBean.labFrequencyListForQuickPrescribe}"
																							var="labFreq" itemLabel="#{labFreq}" itemValue="#{labFreq}" />
																				<p:ajax 
																					listener="#{patientMedicineManageBean.findNextlabDate}"
																					></p:ajax>
																		</p:selectOneMenu>
																</p:column> 
																							
															
															</p:dataTable>
																		
														</td>
							 	 	  	
							 	 	  	
							 	 	  			<!-- 
							 	 	  			<td >
							 	 	  				<h:outputText value="Date of the next Lab: " style="font-weight:bold;"/>&nbsp;&nbsp;
							 	 	  				<h:outputText id="nextLab" value="#{patientMedicineManageBean.medActionPlan.nextLabDate}" >
							 	 	  					<f:convertDateTime pattern="#{msg.dateFormat}" />
							 	 	  				</h:outputText>
							 	 	  			</td> -->
							 	 	  	</tr>
							 	 	  	
	 	 	 					 </table>
								
								</td>
									</tr>
								</table>
			
			</p:outputPanel>
			<br />
			<table  align="right" width="100%">
				<!-- <tr align="center">
					<td>
						<h:outputText value="Phase" styleClass="outputtext"/>
					</td>
					
				</tr> -->
				
				<tr align="right">
					<!-- <td><p:inputText value="#" style="width:80px;"/></td>
					<td><h:outputText value="(Options for phase are initiation or maintenance)" /></td> -->
					<td></td>
					<td >
						<p:commandButton value="#{msg.cancel}" action="#{patientMedicineManageBean.duplicatesubmitCancelButtonforoverviewfilter}" 
							immediate="true" style="font-size: 2px;width:50px;">
						</p:commandButton>
						<p:commandButton value="#{msg.done}"
							action="#{patientMedicineManageBean.addMedicine}" 
												update="messageUpdateForQuickPrescribe"></p:commandButton>
					</td>
								
								

								
				</tr>
			</table>
	</h:form>
</p:dialog>
</ui:composition>
</html>