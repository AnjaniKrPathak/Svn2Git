<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:p="http://primefaces.org/ui" template="../templates/ui.xhtml">	

<ui:composition>
<p:dialog id="searchdiagnosisOvwPopUpId" header="#{msg.diagnosis}" widgetVar="diagnosisPopUp" modal="true" appendTo="@(body)" hideEffect="fold" resizable="true"
					dynamic="false" width="800" position="430,100" closable="true">
					<p:ajax event="close" update=":searchdiagnosisOvwPopUpId" />
				 <h:form id="searchdiagosisPopUpFormId">	
				 
				 <p:panel>
				 	<table>
					
					<tr>
						<td>
						 <p:selectOneRadio id="optionsId"
							value="#{patientManageBean.chooseSelectedDiagnosisOption}" >
							<f:selectItem itemLabel="Patient Diagnoses" itemValue="1"  />
							<f:selectItem itemLabel="New Diagnosis" itemValue="2" noSelectionOption="false"/>
							<p:ajax event="change" listener="#{patientManageBean.showDiagnosisPanel}" update=":searchdiagosisPopUpFormId:dignId"></p:ajax>
						</p:selectOneRadio> 
						</td>
					</tr>
					</table>
				 </p:panel>
				<p:panel id="dignId">
				 <p:panel id="patientExistingDiagnosisId" widgetVar="patientExistingDiagnosisWidget" rendered="#{!patientManageBean.newDiagnosis}" closable="false" toggleable="false">
				 	   <p:dataTable
							value="#{patientManageBean.patientICDDiagnosisList}"
							id="diagonosisICD" var="icd_1oDiago"
							  paginator="true"
                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                         rowsPerPageTemplate="5,10,15" scrollable="true" lazy="true" emptyMessage="#{msg.noMedFound}">
										  
										<p:column>
											<f:facet name="header">
												<h:outputText value="#{msg.icd_10_code}" />
											</f:facet>
											<div align="left">
											<!-- <h:outputText value="#{icd_1oDiago.icdId}" /> -->
												<p:commandLink value="#{icd_1oDiago.icdId}" action="#{patientManageBean.prepareDiagnosisObj}" style="text-decoration:underline;" ajax="true" update=":genericMedActionPlanDialog" oncomplete="diagnosisPopUp.hide();medAactionPlanDialog.show();">
										<f:setPropertyActionListener target="#{patientManageBean.patientDiagnosesDetailsObj}" value="#{icd_1oDiago}" />
								</p:commandLink>
											</div>
										</p:column>
										
										<p:column sortBy="#{icd_1oDiago.codeDescription}" >
											<f:facet name="header">
												<h:outputText value="#{msg.name1}" />
											</f:facet>
											<!-- <h:outputText value="#{icd_1oDiago.codeDescription}" /> -->
											<p:commandLink value="#{icd_1oDiago.codeDescription}" action="#{patientManageBean.prepareDiagnosisObj}" style="text-decoration:underline;" ajax="true" update=":genericMedActionPlanDialog" oncomplete="diagnosisPopUp.hide();medAactionPlanDialog.show();">
										<f:setPropertyActionListener target="#{patientManageBean.patientDiagnosesDetailsObj}" value="#{icd_1oDiago}" />
								</p:commandLink>
										</p:column>
										<p:column >
										<f:facet name="header">
										 <h:outputText value="Source" />
										 </f:facet>
										<!--  <h:outputText value="#{icd_1oDiago.icdCodeType}" /> -->
										<p:commandLink value="#{icd_1oDiago.icdCodeType}" action="#{patientManageBean.prepareDiagnosisObj}" style="text-decoration:underline;" ajax="true" update=":genericMedActionPlanDialog" oncomplete="diagnosisPopUp.hide();medAactionPlanDialog.show();">
										<f:setPropertyActionListener target="#{patientManageBean.patientDiagnosesDetailsObj}" value="#{icd_1oDiago}" />
								</p:commandLink>
										</p:column>
										
										<p:column sortBy="#{icd_1oDiago.date}" style="text-align:center;" >
											<f:facet name="header">
												<h:outputText value="#{msg.date}" />
											</f:facet>
											<div align="center"><h:outputText value="#{icd_1oDiago.date}">
												<f:convertDateTime pattern="#{msg.dateFormat}" />
											</h:outputText></div>
										</p:column>
										
										
										<p:column>
											<f:facet name="header">
												<h:outputText value="#{msg.doctor}" />
											</f:facet>
											<div align="left">
											<h:outputText
												value="Dr. #{icd_1oDiago.docFirstName} #{icd_1oDiago.docmiddleName} #{icd_1oDiago.docLastName}" /></div>
										</p:column> 
										
									
					 </p:dataTable>
				 </p:panel>
				 
				 <p:panel id="addNewDiagnosisId"  widgetVar="addNewDiagnosisWidget"  rendered="#{patientManageBean.newDiagnosis}"  closable="false" toggleable="false">
				
					<table>
					
					<tr>
						<td> <p:selectOneRadio id="options"
							value="#{patientManageBean.selectIntervention}">
							<f:selectItem itemLabel="Search According Diagnosis Name" itemValue="1" />
							<f:selectItem itemLabel="Search According ICD Code" itemValue="2" noSelectionOption="false"/>
							
						</p:selectOneRadio> 
						
						</td>
					</tr>
					</table>
					
				
					<table>
					  <tr>
					    <td>
							<h:outputText value="#{msg.diagnosisname} :" style="font-size:10px;" />
						</td>
						<td align="left">
							<p:inputText size="55"  value="#{patientManageBean.userInputForIcdDiagnosisSearchTable}" id="codeForSearch"  >
	 						
	 						 <p:ajax update="codeForSearch"></p:ajax>  
	 						</p:inputText>
	 						<p:watermark value="#{msg.diagnosiname} According Name and icd_Code" for="codeForSearch"></p:watermark> 
						</td>
						
						</tr>
						
						<tr>
						<td>
							<h:outputText value="#{msg.select_icd_Format} :" style="font-size:10px;" />
						</td>
						<td>
						  <p:selectOneMenu id="icd_drpDown" value="#{patientManageBean.selectedIcdFormat}" immediate="true"
		                        required="true" style="width:137px;">
								 <f:selectItem itemLabel="#{msg.icd9}" itemValue="#{msg.icd9}" />
								 <f:selectItem itemLabel="#{msg.icd10}" itemValue="#{msg.icd10}" />
							 <p:ajax update="icd_drpDown"/>
							</p:selectOneMenu>
						</td>
						</tr>
						
						
						<tr>
						 <td colspan="2" align="left">
							 <p:commandButton value="#{msg.search}" actionListener="#{patientManageBean.searchMasterDiagnosisData}" 
								 update="searchdiagosisPopUpFormId:panel_dignosis"/> 
						 	<p:commandButton value="#{msg.cancel}" actionListener="#{patientManageBean.cleanDiagnosisForm}" oncomplete="diagnosisPopUp.hide();"/> 
						</td>
						</tr>
					</table>
					<br></br>
				<p:outputPanel id="panel_dignosis">
		         
		          <p:outputPanel id="panel_icd10dignosis" rendered="#{patientManageBean.selectedIcdFormat eq 'ICD10'}"> 
		          
		          
		           <p:dataTable value="#{patientManageBean.dignosisdetailsList}" var="searchDiagnosis"  id="searchdatatable"
	 			      scrollable="true" resizableColumns="false" scrollHeight="400" lazy="true" emptyMessage="#{msg.noMedFound}"
							 >
							
							<f:facet name="header">
           									 ICD 10 Details
       						 </f:facet>
							
							
				  		<p:column width="2%" headerText="Short Description" >
								<p:commandLink value="#{searchDiagnosis.shortDesc}" action="#{patientManageBean.findDiagnosisICD10NameOverview}" style="text-decoration:underline;" ajax="true" update=":genericMedActionPlanDialog" oncomplete="diagnosisPopUp.hide();medAactionPlanDialog.show();">
										<f:setPropertyActionListener target="#{patientManageBean.selectedDiagonisObj}" value="#{searchDiagnosis}" />
								</p:commandLink>
				    	</p:column>
				    	
					    	<p:column width="5%">
									<f:facet name="header">
										<h:outputText value="Long Description" style="text-align:left"/>
								</f:facet>
										<h:outputText value="#{searchDiagnosis.longDesc}" />
						</p:column>
						
					    	<p:column width="5%">
									<f:facet name="header">
										<h:outputText value="ICD Code" style="text-align:left"/>
								</f:facet>
										<h:outputText value="#{searchDiagnosis.formattedDxCode}" />
						</p:column>
						
				  </p:dataTable>
				  
				  
				 </p:outputPanel>
				 
				 <p:outputPanel id="panel_icd9dignosis" rendered="#{patientManageBean.selectedIcdFormat eq 'ICD9'}">
				 
				   <p:dataTable value="#{patientManageBean.icd9DiagnosisList}" var="searchDiagnosis"  id="searchicd9datatable"
	 			        scrollable="true" resizableColumns="false" scrollHeight="400" lazy="true" emptyMessage="#{msg.noMedFound}"
						>
							
					
					<f:facet name="header">
           									 ICD 9 Details
       						 </f:facet>
       						 		
				  	<p:column width="2%" headerText="Short Description" >
								<p:commandLink value="#{searchDiagnosis.shortDescription}" action="#{patientManageBean.setIcd9DiagnosisNameOverview}" style="text-decoration:underline;"  ajax="true" update=":genericMedActionPlanDialog" oncomplete="diagnosisPopUp.hide();medAactionPlanDialog.show();">
								<f:setPropertyActionListener target="#{patientManageBean.selectedDiagonsisICD9Obj}" value="#{searchDiagnosis}" />
					</p:commandLink>
					
				    </p:column>
				    
				    <p:column width="5%">
								<f:facet name="header">
									<h:outputText value="Long Description" style="text-align:left"/>
							</f:facet>
									<h:outputText value="#{searchDiagnosis.longDiscription}" />
					</p:column>
				    
				    <p:column width="5%">
								<f:facet name="header">
									<h:outputText value="ICD Code" style="text-align:left"/>
							</f:facet>
									<h:outputText value="#{searchDiagnosis.formatedCode}" />
					</p:column>
					
				  </p:dataTable>
			    </p:outputPanel>
			   </p:outputPanel> 
			   </p:panel>
			   </p:panel>
			</h:form>	
</p:dialog>
</ui:composition>
</html>