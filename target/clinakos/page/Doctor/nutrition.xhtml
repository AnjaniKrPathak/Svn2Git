<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="../templates/ui.xhtml">

<h:body>

	<f:view contentType="text/html">
		<h:head>
			<f:facet name="first">
				<meta http-equiv="X-UA-Compatible" content="EmulateIE8" />
				<meta content='text/html; charset=UTF-8' http-equiv="Content-Type" />
				<title><h:outputText value="#{msg.clinakos}" /></title>
			</f:facet>
			<link type="text/css" rel="stylesheet" href="../../CSS/style.css" />
			<script language="javascript" src="../js/basicMethod.js"></script>
			    <link rel="stylesheet" href="../../CSS/style.css" />
       <!-- New Menu Style Template designed by A S Jha for Clinakos  -->
		  <link rel="stylesheet" href="../../MenuTemplate/nav_style.css"></link>
		  <link type="text/css" rel="stylesheet" href="tabmenu/subModal.css" />
		  <script src="tabmenu/common.js" type="text/javascript"></script>
	<script src="tabmenu/subModal.js" type="text/javascript"></script>
	<script language="javascript">
			$(document).ready(function() {
		      //  noBack();
		        document.getElementById("vldcNutritionsFrm:hiddenBtnId").click();
		   });

		   function noBack() {
			   window.location.hash="no-back-button";
				window.location.hash="Again-No-back-button";//again because google chrome don't insert first hash into history
				window.onhashchange=function(){window.location.hash="";} 
		       }
		   function openDeviceApps(xhr, status, args){
				console.log("Open Device App Method Fired "+args.url_val);
		
		//	deviceAppsWidgetVar.show();
		//	document.getElementById("vldcNutritionsFrm:link_url_id").click();
			 	var url_data=args.url_val;
				window.open(url_data, "_blank", 'directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=no,width=720,height=420,top=200%,left=250%'); 
				}
		 
</script>
		</h:head>

		<p:layout fullPage="true">
		
		

			<!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> DOCTOR HEADER >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>  -->
			<p:layoutUnit position="north" size="112" minSize="60">
				<ui:include src="doctorHeader.xhtml" />
			</p:layoutUnit>
			<!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> BOTTOM INCLUDE >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>  -->

			<p:layoutUnit id="bottom" position="south" size="24">

				<ui:include src="../core/footer.xhtml"></ui:include>

			</p:layoutUnit>

			<!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> LEFT INCLUDE >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>  -->

			<p:layoutUnit id="left" position="west" size="0" closable="false"
				collapsible="true" minSize="0" style="border:none;">
				  <ui:include src="anticoagleftmenu.xhtml">
				</ui:include>
			</p:layoutUnit>



			<!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> CENTER LAYOUT >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>  -->

			<p:layoutUnit position="center">
			<ui:include src="/page/core/blockDialog.xhtml">
				
				</ui:include>
			  <h:form id="vldcNutritionsFrm">
			  <p:commandButton action="#{validicRestManagedBean.latestValidicData}" update="nutrition_activity_panel_id" id="hiddenBtnId" style="display:none" >
			<f:setPropertyActionListener target="#{validicRestManagedBean.validicDevices.nutrition}" value="true"></f:setPropertyActionListener>
			</p:commandButton>
			 	 <p:commandButton value="Connect To Devices"  actionListener="#{validicRestManagedBean.loadDeviceApps}"  oncomplete="openDeviceApps(xhr, status, args);" style="float:right"></p:commandButton>
				
			<!-- 	<p:lightBox widgetVar="deviceAppsWidgetVar" iframe="true" iframeTitle="Clinakos Device Integration" visible="false" height="480px" width="1020px" style="float:right">
				 <h:outputLink value="#{validicRestManagedBean.deviceResponse}" title="Devices Details" id="link_url_id" style="display:none">
					<h:outputText value="Device Details"></h:outputText>
				</h:outputLink>  
				
				
				
				</p:lightBox>	-->
				<!--   <a id="menu11a" href="#" style="border:none;background:transparent;" title="Order Prescriptions">
	 <img src="" alt="Connect To devices" align="right" height="24px" width="19px" onclick="initPopUp();showPopWin('deviceAppsModel.jsf', 1000, 528, true);"/> 
	  </a> -->
				<!-- </p:panel> -->
				<p:commandButton value="Sync To Clinakos" action="#{validicRestManagedBean.latestValidicData}" update="nutrition_activity_panel_id" onstart="blockPage.show();" oncomplete="blockPage.hide();">
				<f:setPropertyActionListener target="#{validicRestManagedBean.validicDevices.nutrition}" value="true"></f:setPropertyActionListener>
				</p:commandButton>
			<!--   <table >
					 <tr>
					  <td>
					   <h:outputText value="#{msg.startDate}"/>
					  </td>
					  <td>
					  <p:calendar value="#{validicRestManagedBean.validicNutrition.startDate}" />
					  </td>
					  <td>
					   <h:outputText value="#{msg.endDate}"/>
					  </td>
					  <td>
					   <p:calendar value="#{validicRestManagedBean.validicNutrition.endDate}"/>
					  </td>
					  <td>
					   <h:outputText value="#{msg.source_name}"/>
					  </td>
					  <td>
					  <p:selectOneMenu value="#{validicRestManagedBean.validicNutrition.source_name}" >
					 <f:selectItem itemLabel="Select Source Name" itemValue=""/>
					 <f:selectItems value="#{validicRestManagedBean.validicNutriotionSourceNameList}"></f:selectItems>
					</p:selectOneMenu>
					  </td>
					  <td>
					   <p:commandButton value="Get Nutrition Data" actionListener="#{validicRestManagedBean.getValidicPatientNutrionDataWithFilter}" update="validicNutritionsDataTab"></p:commandButton>
					  </td>
					 </tr>
					
					</table> -->
			  <br/>
			  <p:panel id="nutrition_activity_panel_id">
			  	<p:dataTable id="validicNutritionsDataTab" value="#{validicRestManagedBean.userNutritions}" var="valdicNutrition">
					 <p:column headerText="#{msg.calories}">
					  <h:outputText value="#{valdicNutrition.calories}"/>
					 </p:column>
					 <p:column headerText="#{msg.carbohydrates}">
					  <h:outputText value="#{valdicNutrition.carbohydrates}">
					    <f:convertNumber pattern="#{msg.decimal_pattern}" />
					    </h:outputText>
					 </p:column>
					 <p:column headerText="#{msg.fat}">
					  <h:outputText value="#{valdicNutrition.fat}">
					    <f:convertNumber pattern="#{msg.decimal_pattern}" />
					    </h:outputText>
					 </p:column>
					 <p:column headerText="#{msg.fiber}">
					  <h:outputText value="#{valdicNutrition.fiber}">
					    <f:convertNumber pattern="#{msg.decimal_pattern}" />
					    </h:outputText>
					 </p:column>
					 <p:column headerText="#{msg.protein}">
					  <h:outputText value="#{valdicNutrition.protein}">
					    <f:convertNumber pattern="#{msg.decimal_pattern}" />
					  </h:outputText>
					 </p:column>
					 <p:column headerText="#{msg.sodium}">
					  <h:outputText value="#{valdicNutrition.sodium}">
					    <f:convertNumber pattern="#{msg.decimal_pattern}" />
					    </h:outputText>
					 </p:column>
					 <p:column headerText="#{msg.water}">
					  <h:outputText value="#{valdicNutrition.water}">
					    <f:convertNumber pattern="#{msg.decimal_pattern}" />
					    </h:outputText>
					 </p:column>
					 <p:column headerText="#{msg.meal}">
					  <h:outputText value="#{valdicNutrition.meal}">
					    </h:outputText>
					 </p:column>
					 <p:column headerText="#{msg.source_name}">
					  <h:outputText value="#{valdicNutrition.source_name}"/>
					 </p:column>
					<p:column headerText="#{msg.timestamp}">
					 <h:outputText value="#{valdicNutrition.timestamp}">
					 <f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+1"/>
					 </h:outputText>
					</p:column>
					</p:dataTable>
				</p:panel>
				</h:form>	
            </p:layoutUnit>
		</p:layout>

			
			<!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> CENTER LAYOUT ENDS  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>  -->
		
	</f:view>
</h:body>
</html>

