<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:body onload="#{dashBoardManageBean.setoverviewindex()}">
    <f:view contentType="text/html">
   <h:head>
	<f:facet name="first">
		<meta http-equiv="X-UA-Compatible" content="EmulateIE8" />
		<meta content='text/html; charset=UTF-8' http-equiv="Content-Type" />
		<title><h:outputText value="#{msg.clinakos}" /></title>
	</f:facet>
	<link type="text/css" rel="stylesheet" href="../../CSS/style.css" />
	
    </h:head>
	<p:layout fullPage="true">
	<p:layoutUnit position="north" size="85" minSize="60">
		<ui:include src="patientHeader.xhtml" />
	</p:layoutUnit>
		<p:layoutUnit id="bottom" position="south" size="24">
			<ui:include src="../core/footer.xhtml"></ui:include>
		</p:layoutUnit>
		<p:layoutUnit id="left" position="west" size="0" closable="false"
				collapsible="true" minSize="0" style="border:none;">
				<ui:include src="patient_profile_left_menu.xhtml">
				</ui:include>
		</p:layoutUnit>
		<p:layoutUnit position="center">
			<h:form>

<!--  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> TABLE FOR REMINDERS >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>.  -->

				<table width="100%">
					<tr>
						<td valign="top" width="50%" height="20%">
							<!-- <p:fieldset style="height:75px;overflow:auto;" legend="Reminder">
								<b><h:outputText value="#{msg.reminders}" /> </b> -->
								<!-- <fieldset class="fieldContent" >
								
									<legend class="titleBar"><b>Reminder</b></legend> -->
						<table style="min-height:175px;width: 100%">
						  <tr >
						    <td class="secHeadPart">Reminder</td>
						  </tr >
						  <tr>
						    <td class="secContentBorder" valign="top">
						    			
							<div class="scrollDivPan">
								
								<!-- <p:scrollPanel mode="native" style="width:470px;height:67px;border:none;" styleClass="remainder_alignment"> -->
							<table >
									<ui:repeat var="reminderLab"
										value="#{labManageBean.labReminderList}" varStatus="status" >
										<h:panelGroup rendered="#{status.even}">
											<tr>
												<td class="order-table-even-row"> 
												   <h:outputText value="#{reminderLab.lab}
															needs to be scheduled by " id="even"
															rendered="#{reminderLab.nextLabDate ge patientMedicineManageBean.reminderFilterFromDate}"/>
																<!-- and reminderLab.nextLabDate le patientMedicineManageBean.reminderFilterEndDate} --> <!-- commented for Ticket # 806 by venu -->
													 <h:outputText id="even_date" value="#{reminderLab.nextLabDate}" 
													    rendered="#{reminderLab.nextLabDate ge patientMedicineManageBean.reminderFilterFromDate}">
																<!-- and reminderLab.nextLabDate le patientMedicineManageBean.reminderFilterEndDate} -->
													 <f:convertDateTime pattern="#{msg.dateFormat}" /> 
													
													 
													</h:outputText>
													
																
												</td>
											</tr>
										</h:panelGroup>
										<h:panelGroup rendered="#{status.odd}">
											<tr>
												<td class="order-table-odd-row">
												   <h:outputText value="#{reminderLab.lab}
															needs to be scheduled by  " id="odd"
															rendered="#{reminderLab.nextLabDate ge patientMedicineManageBean.reminderFilterFromDate}"/>
															   <!-- and reminderLab.nextLabDate le patientMedicineManageBean.reminderFilterEndDate} -->
													<h:outputText id="odd_date" value="#{reminderLab.nextLabDate}" 
													    rendered="#{reminderLab.nextLabDate ge patientMedicineManageBean.reminderFilterFromDate}">
																<!-- and reminderLab.nextLabDate le patientMedicineManageBean.reminderFilterEndDate} -->
													 <f:convertDateTime pattern="#{msg.dateFormat}"  /> 
													</h:outputText>
												</td>
											</tr>
										</h:panelGroup>
									</ui:repeat>
								</table>
								
								<table>
									<ui:repeat var="reminderMed"
										value="#{patientMedicineManageBean.medicineReminderList}"
										varStatus="status">
										<h:panelGroup rendered="#{status.even}">
											<tr>
												<td class="order-table-even-row" valign="top">
													<h:outputText value="Pick up  new prescription for
																	#{reminderMed.drugs}  by Dr.
																	#{reminderMed.prescriberName} ! Prescribed on #{reminderMed.dateOfNextReffil}"
																	rendered="#{reminderMed.dateOfNextReffil eq patientMedicineManageBean.reminderFilterFromDate 
																		and reminderMed.dateOfNextReffil le patientMedicineManageBean.reminderFilterEndDate and reminderMed.dateOfNextReffil ge patientMedicineManageBean.reminderFilterEndDate}">
																		<f:convertDateTime pattern="#{msg.dateFormat}"></f:convertDateTime>
													 </h:outputText>
													
													</td>
											</tr>
										</h:panelGroup>
										<h:panelGroup rendered="#{status.odd}">
											<tr>
												<td class="order-table-odd-row" valign="top">
													 <h:outputText value="Pick up  new prescription for
																	#{reminderMed.drugs}  by Dr.
																	#{reminderMed.prescriberName} ! Prescribed on "
																	rendered="#{reminderMed.dateOfNextReffil ge patientMedicineManageBean.reminderFilterFromDate 
																		and reminderMed.dateOfNextReffil le patientMedicineManageBean.reminderFilterEndDate}">
																		
													  </h:outputText>
													  <h:outputText value="#{reminderMed.dateOfNextReffil}"  rendered="#{reminderMed.dateOfNextReffil ge patientMedicineManageBean.reminderFilterFromDate 
																		and reminderMed.dateOfNextReffil le patientMedicineManageBean.reminderFilterEndDate}">
																		<f:convertDateTime pattern="#{msg.dateFormat}"></f:convertDateTime>
																		</h:outputText>
													</td>
											</tr>
										</h:panelGroup>
									</ui:repeat>
									
								<tr>
						          <ui:repeat var="pharmacyDetail"
										value="#{patientMedicineManageBean.patientMedList}" varStatus="status">
									<h:panelGroup rendered="#{status.even}">
									<tr>
									<td class="order-table-even-row" valign="top" >
									  <h:outputText value="Pick up  new prescription for #{pharmacyDetail.drugs}  by Dr.#{pharmacyDetail.prescriberName} ! Prescribed on  " rendered="#{pharmacyDetail.startDate gt  patientMedicineManageBean.reminderFilterFromDate and pharmacyDetail.startDate le patientMedicineManageBean.reminderFilterEndDate and ((pharmacyDetail.pharmacyName != '') and (pharmacyDetail.pharmacyName != null )) }">
									 
									 </h:outputText>  
									<h:outputText value="#{pharmacyDetail.startDate}" rendered="#{pharmacyDetail.startDate gt  patientMedicineManageBean.reminderFilterFromDate and pharmacyDetail.startDate le patientMedicineManageBean.reminderFilterEndDate and ((pharmacyDetail.pharmacyName != '') and (pharmacyDetail.pharmacyName != null )) }">
									 <f:convertDateTime pattern="#{msg.dateFormat}"/>
									</h:outputText>
									<h:outputText value=" from   #{pharmacyDetail.pharmacyName} " rendered="#{pharmacyDetail.startDate gt  patientMedicineManageBean.reminderFilterFromDate and pharmacyDetail.startDate le patientMedicineManageBean.reminderFilterEndDate and ((pharmacyDetail.pharmacyName != '') and (pharmacyDetail.pharmacyName != null )) }" />
									
								</td>
									
									</tr>
									</h:panelGroup>
									<h:panelGroup rendered="#{status.odd}">
									<tr>
									<td class="order-table-odd-row" valign="top" >
									  <h:outputText value="Pick up  new prescription for #{pharmacyDetail.drugs}  by Dr.#{pharmacyDetail.prescriberName} ! Prescribed on  " rendered="#{pharmacyDetail.startDate gt  patientMedicineManageBean.reminderFilterFromDate and pharmacyDetail.startDate le patientMedicineManageBean.reminderFilterEndDate and ((pharmacyDetail.pharmacyName != '') and (pharmacyDetail.pharmacyName != null )) }" >
									 
									 </h:outputText>  
									<h:outputText value="#{pharmacyDetail.startDate}" rendered="#{pharmacyDetail.startDate gt  patientMedicineManageBean.reminderFilterFromDate and pharmacyDetail.startDate le patientMedicineManageBean.reminderFilterEndDate and ((pharmacyDetail.pharmacyName != '') and (pharmacyDetail.pharmacyName != null )) }" >
									 <f:convertDateTime pattern="#{msg.dateFormat}"/>
									</h:outputText>
									<h:outputText value=" from   #{pharmacyDetail.pharmacyName} " rendered="#{pharmacyDetail.startDate gt  patientMedicineManageBean.reminderFilterFromDate and pharmacyDetail.startDate le patientMedicineManageBean.reminderFilterEndDate and ((pharmacyDetail.pharmacyName != '') and (pharmacyDetail.pharmacyName != null )) }"/>
									
								</td>
									
									</tr>
									
									
									</h:panelGroup>
							</ui:repeat> 
							</tr>
								</table>
								<!-- </p:scrollPanel> -->
								
							<!-- </p:fieldset> -->
							<!-- </fieldset> -->
							</div>
						    </td>
						  </tr>
						</table>
							</td>
						<td valign="top" width="50%" height="30%">
						
								<!-- <p:fieldset style="height:75px;overflow:auto;" legend="Details"> -->
								<!-- <fieldset class="fieldContent" >
							<legend class="titleBar"><b>Details</b></legend> -->
							<table style="min-height:175px;width: 100%">
						  <tr >
						    <td class="secHeadPart">Details</td>
						  </tr>
						  <tr>
						    <td class="secContentBorder" valign="top">

<!--  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> TABLE FOR PATIENT ALLERGY DETAILS >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>.  -->
								<table width="90%">
									<tr>
										<td width="15%" valign="top" style="padding-left:10px">
											<b><h:outputText value="#{msg.allergies}" />:</b>
										</td>
										<td align="left"  valign="top">
										<ui:repeat	var="patientAllergy" value="#{patientManageBean.patientAllergyList}"
												varStatus="loop" >
						 
											 #{patientAllergy.allergyName}#{!loop.last ? ', ' : ''} 
																	            
										</ui:repeat>
										<p:commandLink value="More" style="font-weight:bold;color: #F0557D;" action="#{patientManageBean.AllergyMore}"
								                       rendered="#{patientManageBean.patientAllergyList.size() ge  2}" /> </td>
									</tr>
							
								</table>
								
<!--  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> TABLE FOR PATIENT DIAGNOSIS >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>.  -->

								<table width="90%">
									<tr>
										<td width="15%" valign="top" style="padding-left:10px"><b><h:outputText
													value="#{msg.diagnoses}" />:</b></td>
										<td align="left" valign="top"><ui:repeat var="patientDiagnosis"
												value="#{dashBoardManageBean.patientDiagnosesList}"
												varStatus="loop">
						 
										 #{patientDiagnosis.code}#{!loop.last ? ', ' : ''} 
															            
								      </ui:repeat>
								      <p:commandLink value="More" style="font-weight:bold;color: #F0557D;" action="#{dashBoardManageBean.patientMore}" 
								                       rendered="#{dashBoardManageBean.patientDiagnosesList.size() ge  2}" />
								        </td>
									</tr>
									</table>
<!--  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> TABLE FOR HEIGHT , WEIGHT , IBW AND IMMUNIZATION  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>.  -->
								<table width="90%" >
								<tr>
									<td width="15%" align="left" style="padding-left: 10px;" valign="top"><b><h:outputText
													value="#{msg.height}:" /></b></td>
				                         <td width="17%" align="left" valign="top"><h:outputText
												value="#{dashBoardManageBean.patientVital.height} ft" /></td>
										<td width="10%" align="left" valign="top"><b> <h:outputText
													value="#{msg.weight}:" /></b></td>
										<td width="17%" align="left" valign="top"><h:outputText
												value="#{dashBoardManageBean.patientVital.weight} lb" /></td>
										<td width="7%" align="left" valign="top"><b><h:outputText
													value="#{msg.ibw}:" /></b></td>
										<td width="30%" align="left" valign="top"><h:outputText
												value="#{dashBoardManageBean.patientVital.bmiRange} &nbsp;lbs" /></td>
										<td width="17%" align="left" valign="top">
											<!-- <b><h:outputText value="#{msg.immunizations}" /> :</b> -->
										</td>
										<td align="left" valign="top"><h:outputText value="" /></td>
										
								      
								      
									</tr>
							
								
								
								</table>
								<!-- </fieldset> -->
							</td>
							</tr>
							</table>
							</td>
							</tr>	

							<!-- </p:fieldset> -->
						<!-- 	</td>
					
 -->
				</table>
			</h:form>
			
<!--  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> DATATABLE FOR MEDICATION NOTES  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>.  -->
					
					<table width="100%">
					<tr>
					<td valign="top" width="100%"><!-- <p:fieldset
							legend="#{msg.my_notes}" style="height:185px;width:auto;"> -->
						<!-- 	<fieldset class="fieldContent" >
							<legend class="titleBar"><b>My Notes</b></legend> -->
							<table style="min-height:165px;width: 100%;margin-top:2px">
						  <tr >
						    <td class="secHeadPart">My Notes</td>
						  </tr>
						  <tr>
						    <td class="secContentBorder" valign="top">
							<h:form id="frm_notes">
								<p:dataTable id="table_notes"
									value="#{patientMedicineManageBean.patientMedicineNotesList}"
									var="notesTable" scrollable="true" scrollHeight="130"
									resizableColumns="true" sortMode="multiple"
									draggableColumns="true" emptyMessage="#{msg.noMedFound}">
									<p:column headerText="#{msg.date}" sortBy="date" style="width:3%;" >
										<div align="center"><h:outputText value="#{notesTable.date}">
										 <f:convertDateTime pattern="#{msg.dateFormat}" dateStyle="full" type="date"/> 
										</h:outputText></div>
									</p:column>
									<p:column headerText="Drug" sortBy="drugName" width="5%"
										styleClass="wrap">
										<div align="left">
										<h:outputText value="#{notesTable.drugName}" /></div>
									</p:column>
									<p:column headerText="#{msg.notes}" width="23%"
										styleClass="wrap">
										<div align="left">
										<h:outputText value="#{notesTable.notes}" /></div>
									</p:column>
								</p:dataTable>
							</h:form>
							</td>
							</tr>
							</table>
						<!-- </fieldset> --><!-- </p:fieldset> --></td>
				</tr>
			</table>
			<!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>Med Action plan Goal>>>>>>>>>>>>>>>>>>>> -->
			
			<table width="100%">
			<tr>
			<td valign="top" width="100%">
			<!-- <fieldset  class="fieldContent" >
									<legend class="titleBar">#{msg.med_action_plan_label}</legend> -->
				<table style="min-height:165px;width: 100%;margin-top:2px">
						  <tr >
						    <td class="secHeadPart">#{msg.med_action_plan_label}</td>
						  </tr>
						  <tr>
						    <td class="secContentBorder" valign="top">
									<h:form id="medAactionPlanFormId" prependId="false">
									<p:dataTable value="#{patientMedicineManageBean.allGenericMedActionPlan}" var="genericMedPlanObj"
									binding="#{patientMedicineManageBean.genericMedActionDatatable}" id="genericMedListId" scrollable="true" scrollRows="5" emptyMessage="#{msg.noMedFound}">
									<!-- 	<p:column headerText="#{msg.datePrescribed}">
										</p:column> -->
										<p:column headerText="#{msg.med}">
										#{genericMedPlanObj.drugName} #{genericMedPlanObj.strength} #{genericMedPlanObj.regimen}
									<!-- 	<h:outputText value="#{genericMedPlanObj.drugName}" /><h:outputText value="#{genericMedPlanObj.strength}" /><h:outputText value="#{genericMedPlanObj.regimen}" /> -->
										</p:column>
										<!-- <p:column headerText="#{msg.strength1}">
										<h:outputText value="#{genericMedPlanObj.strength}" />
										</p:column>
										<p:column headerText="#{msg.regimen}">
										<h:outputText value="#{genericMedPlanObj.regimen}" />
										</p:column> -->
										<p:column headerText="#{msg.prescription_date_label}" >
										<div align="center">
										<h:outputText value="#{genericMedPlanObj.prescriptionDate}" >
										 <f:convertDateTime pattern="#{msg.dateFormat}"  dateStyle="full" type="date"/> 
										</h:outputText></div>
										</p:column>
										<p:column headerText="#{msg.precribed_by_label}">
										<div align="left">
										<h:outputText value="#{genericMedPlanObj.prescribedBy}" /></div>
										</p:column> 
										<p:column headerText="#{msg.diagonsis}">
										<div align="left">
										 <h:outputText value="#{genericMedPlanObj.diagnosisName}" /> </div>
										</p:column>
										<p:column headerText="#{msg.monitoring_parameter_label}">
										<div align="left">
										<h:outputText value="#{genericMedPlanObj.parameterShortName}" /></div>
										</p:column>
										<p:column headerText="#{msg.acceptablerange}">
										<div align="right">
										<h:outputText value="#{genericMedPlanObj.goalRangeSymbol} #{genericMedPlanObj.goalRangeValue} - #{genericMedPlanObj.goalRangeEndSymbol} #{genericMedPlanObj.goalRangeEndValue}" />
										</div>
										</p:column>
										<p:column headerText="#{msg.labfrequency}">
										<div align="left">
										<h:outputText value="#{genericMedPlanObj.frequencyValue}" /></div>
										</p:column>
										<p:column headerText="#{msg.last_updated_by}" >
										<div align="left">
										<h:outputText value="#{genericMedPlanObj.lastUpdatedByName}" /></div>
										</p:column>
										 <p:column headerText="#{msg.last_updated_date}">
										 <div align="center">
										<h:outputText value="#{genericMedPlanObj.lastUpdatedDate}" >
											 <f:convertDateTime pattern="#{msg.dateFormat}"  dateStyle="full" type="date"/> 
										</h:outputText></div>
										</p:column> 
											<p:column headerText="#{msg.created_by}">
											<div align="left">
										<h:outputText value="#{genericMedPlanObj.createdByName}" /></div>
										</p:column>
										<p:column headerText="#{msg.created_date_label}" >
										<div align="center">
										<h:outputText value="#{genericMedPlanObj.createdDate}" >
											 <f:convertDateTime pattern="#{msg.dateFormat}"  dateStyle="full" type="date"/> -->
										</h:outputText></div>
										
										</p:column>
										<p:column headerText="#{msg.dosing_start_date}">
										 <h:outputText value="#{genericMedPlanObj.dosingStartDate}">
										 <f:convertDateTime pattern="#{msg.dateFormat}"></f:convertDateTime>
										 </h:outputText>
										</p:column> 
										
										<!-- <p:column headerText="#{msg.action}">
										<center>
											<p:commandLink
												actionListener="#{patientMedicineManageBean.editGenericMedActionPlan}"
												oncomplete="editGenericMedicalActionPlan.show();">
												<h:graphicImage value="./../../Images/editIcon.jpg"
													width="25px" height="20px" id="editGenericMedActionPlan" />
												<p:tooltip for="editGenericMedActionPlan">
													<h:outputText value="#{msg.edit}" />
												</p:tooltip>
											</p:commandLink>

											<p:commandLink
												actionListener="#{patientMedicineManageBean.removeGenericMedActionPlan}"
												oncomplete="deleteDlgGenericMedActionPlan.show();"
												>
												<h:graphicImage value="./../../Images/delIcon.jpg"
													width="25px" height="20px" id="deleteGenericMedActionPlan" />
												<p:tooltip for="deleteGenericMedActionPlan">
													<h:outputText value="#{msg.delete}" />
												</p:tooltip>
											</p:commandLink>
										</center>
										</p:column> -->
									</p:dataTable>
									</h:form>
								<!-- </fieldset> -->
							</td>
						</tr>
					</table>	
			
			</td>
			
			</tr>
			</table>
			
			
			
			<!--  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>End Goal>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> -->

<!--  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> DATATABLE FOR LAB  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>.  -->

			<table width="100%">
				<tr>
					<td valign="top" width="100%"><!-- <p:fieldset
							legend="#{msg.lab_list}" style="height:185px;"> -->
							<!-- <fieldset class="fieldContent" >
							<legend class="titleBar"><b>Lab List</b></legend> -->
						<table style="min-height:165px;width: 100%;margin-top:2px">
						  <tr >
						    <td class="secHeadPart">Lab List</td>
						  </tr>
						  <tr>
						    <td class="secContentBorder" valign="top">	
							<h:form>
								<p:dataTable id="tbl_lab"
									value="#{labManageBean.procedureResultsForPatient}"
									var="procedure" scrollHeight="115" scrollable="true"
									sortMode="multiple" resizableColumns="true"
									draggableColumns="true" emptyMessage="#{msg.noMedFound}">

									<p:column sortBy="dateResult" id="col_labdate" width="10%" >
										<f:facet name="header">
											<h:outputText value="Date" />
										</f:facet>
										<div align="center">
										<h:outputText value="#{procedure.dateResult}">
											 <f:convertDateTime pattern="#{msg.dateFormat}"  dateStyle="full" type="date"/> 
										</h:outputText></div>
									</p:column>
									<p:column
										sortBy="procedureType.labType"
										id="col_labtype" width="10%">
										<f:facet name="header">
											<h:outputText value="Type" />
										</f:facet>
										<div align="left">
										<h:outputText
											value="#{procedure.procedureType.labType}" /></div>
									</p:column>
									<p:column sortBy="result" id="col_labresult" width="6%" style="text-align:right;">
										<f:facet name="header">
											<h:outputText value="#{msg.results}" />
										</f:facet>
										<div align="right">
										<h:outputText value="#{procedure.result}" /></div>
									</p:column>
									<p:column id="col_labrange" style="white-space:normal;" sortBy="#{procedure.refrenceRange}" width="20%">
										<f:facet name="header">
											<h:outputText value="#{msg.ref_range}" />
										</f:facet>
										<div align="left">
										<h:outputText value="#{procedure.refrenceRange}" /></div>
									</p:column>
									<!--  <p:column id="col_laborder">
										<f:facet name="header">
											<h:outputText value="#{msg.order_date}" />
										</f:facet>
										<h:outputText value="#{procedure.procedureOrder.dateOrdered}">
											<f:convertDateTime pattern="MM/dd/yyyy" />
										</h:outputText>
									</p:column>-->
									<p:column
										id="col_labfname" styleClass="wrap" width="10%">
										<f:facet name="header">
											<h:outputText value="#{msg.ordered_by}" />
										</f:facet>
										<div align="left">
										<h:outputText
											value="#{procedure.userLoginDetail.firstName}  #{procedure.userLoginDetail.lastName}" /></div>
									</p:column>
									<!--  <p:column
										id="col_lablaboratory" styleClass="wrap">
										<f:facet name="header">
											<h:outputText value="#{msg.laboratory}" />
										</f:facet>
										<h:outputText
											value="#{procedure.procedureOrder.procedureType.laboratoryName}" />
									</p:column>-->
									<p:column  id="col_labview" width="6%">
										<f:facet name="header">
											<h:outputText value="#{msg.action}" />
										</f:facet>
										<div align="center">
										<p:commandButton value="#{msg.view_lab}" rendered="#{userManageBean.rolePrivillegeUtil.isEnable('patient_viewLab')}"></p:commandButton></div>
									</p:column>

								</p:dataTable>
							</h:form>
							</td>
						 </tr>
						</table>
						<!-- </fieldset> --><!-- </p:fieldset> --></td>
						</tr>
						</table>



<!--  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> DATATABLE FOR PATIENT MEDICATION >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>.  -->


				
				<!-- <fieldset class="fieldContent" >
							<legend class="titleBar">Medication List</legend> -->
				<table style="min-height:165px;width: 100%;margin-top:2px">
						  <tr >
						    <td class="secHeadPart">Medication List</td>
						  </tr>
						  <tr>
						    <td class="secContentBorder" valign="top">
				<h:form>			
				<!-- paginatorPosition="bottom" paginatorAlwaysVisible="true"   rows="4" -->
		           <p:dataTable scrollable="true" scrollHeight="140"
									value="#{patientMedicineManageBean.patientMedList}"
									var="medication"  sortMode="multiple" 
									 paginator="false"
									binding="#{patientMedicineManageBean.patientMedicineDataTable}"
									id="patMedication" resizableColumns="true"
									draggableColumns="true" emptyMessage="#{msg.noMedFound}">
					          <p:ajax event="rowToggle"
										listener="#{patientMedicineManageBean.onRowExpensionPatientMedicationDataHistory}"></p:ajax>
									<p:column width="2%">
									<div align="center">
										<p:rowToggler /></div>
									</p:column>
								 <p:rowExpansion>
										<p:dataTable value="#{patientMedicineManageBean.medicationHistoryListForPatient}"
											var="medHis" emptyMessage="#{msg.noMedFound}">
									
											<p:column sortBy="drugs" headerText="Medicine Name" >
											<div align="left">											
												<h:outputText value="#{medHis.drugs}" /></div>
											</p:column>
											<p:column headerText="Directions">
												<div align="left">
												<h:outputText value="" /></div>
											</p:column>
											<p:column sortBy="quantity" headerText="#{msg.qty}" >
												<div align="right">
												<h:outputText value="#{medHis.quantity}" /></div>
											</p:column>
											<p:column sortBy="prescriberName" headerText="#{msg.prescriber}">
												<div align="left">
												<h:outputText value="#{medHis.prescriberName}" /></div>
											</p:column>
											<p:column sortBy="dateFormat" headerText="#{msg.dateLastFilled}" >
												<div align="center">
												<h:outputText value="#{medHis.lastFillDate}">
												   <f:convertDateTime pattern="#{msg.dateFormat}" dateStyle="full" type="date" /> 
													<!-- <f:convertDateTime pattern="#{msg.dateFormat}" timeZone="#{userManageBean.loggedUsertimeZone}" dateStyle="full" type="date"/> -->
												</h:outputText></div>
											</p:column>
											<p:column sortBy="pharmacyName" headerText="#{msg.pharmacy}">
												<div align="left">
												<h:outputText value="#{medHis.pharmacyName}" /></div>
											</p:column>
										</p:dataTable>
									</p:rowExpansion> 
									<p:column sortBy="drugs"  width="7%">
										<f:facet name="header">
											<h:outputText value="#{msg.drug}" />
										</f:facet>
										<div align="left">
										<h:outputText value="#{medication.drugs}" /></div>
									</p:column>
									<p:column sortBy="directions" width="6%">
										<f:facet name="header">
											<h:outputText value="#{msg.directions}" />
										</f:facet>
										<div align="left">
										<h:outputText value="#{medication.directions}" /></div>
									</p:column>
									<p:column sortBy="quantity"  width="4%" var="column">
										<f:facet name="header">
											<h:outputText value="#{msg.qty}" />
										</f:facet>
										<div align="right">
										<h:outputText value="#{medication.quantity}" /></div>
									</p:column>
									<p:column sortBy="prescriberName" width="6%"
										styleClass="wrap">
										<f:facet name="header">
											<h:outputText value="#{msg.prescriber}" />
										</f:facet>
										<div align="left">
										<h:outputText value="#{medication.prescriberName}" /></div>
									</p:column>
									<p:column sortBy="lastFillDate" style="white-space:normal;" width="5%">
										<f:facet name="header">
											<h:outputText value="#{msg.dateLastFilled}" />
										</f:facet>
										<div align="center">
										<h:outputText value="#{medication.lastFillDate}">
											<!-- <f:convertDateTime pattern="#{msg.dateFormat}" timeZone="#{userManageBean.loggedUsertimeZone}" dateStyle="full" type="date"/> -->
											<f:convertDateTime pattern="#{msg.dateFormat}"  dateStyle="full" type="date"/>
										</h:outputText></div>
									</p:column>
									<p:column sortBy="pharmacyName" styleClass="wrap" width="8%">
										<f:facet name="header">
											<h:outputText value="#{msg.pharmacy}" />
										</f:facet>
										<div align="left">
										<h:outputText value="#{medication.pharmacyName}" /></div>
									</p:column>
									<p:column sortBy="reffils" style="white-space:normal;" width="5%" >
										<f:facet name="header">
											<h:outputText value="#{msg.no_refill_remains}" />
										</f:facet>
										<div align="right">
										<h:outputText value="#{medication.reffils}" /></div>
									</p:column>
									<p:column width="5%">
										<f:facet name="header">
											<h:outputText value="#{msg.complianc}" />
										</f:facet>
										<center>
										<h:graphicImage value="./../../Images/green1.jpg" height="15px" id="complianceForGreen" width="15px" rendered="#{medication.compliancePercentage gt 80	}" /></center>
										 <p:tooltip for="complianceForGreen"  showEffect="clip" hideEffect="explode">
				 
				 							<h:outputText value="#{medication.drugs}" /><br /> 
				  							<h:outputText value="Compliance=#{medication.compliancePercentage}%" /><br />
										</p:tooltip>
										
										<center><h:graphicImage value="./../../Images/orange1.jpg" height="15px" id="complianceForOrange" width="15px" rendered="#{medication.compliancePercentage gt 60 and  medication.compliancePercentage le 80}" /></center>
										<p:tooltip for="complianceForOrange"  showEffect="clip"  hideEffect="explode">
				 
				 							<h:outputText value="Compliance=#{medication.compliancePercentage}%" /><br />
				
										</p:tooltip>
										
										<center><h:graphicImage value="./../../Images/red1.jpg" height="15px" id="complianceForRed" width="15px" rendered="#{medication.compliancePercentage lt 60}" />
											<h:outputText value="N/A" id="complianceForwhite" width="20px" rendered="#{medDetail.compliancePercentage eq 0}" />
										</center>
										<p:tooltip for="complianceForRed"  showEffect="clip"  hideEffect="explode">
				  							<h:outputText value="Compliance=#{medication.compliancePercentage}%" /><br />
				 
										</p:tooltip>
										<p:tooltip for="complianceForwhite"  showEffect="clip"  >
				 
				 							<h:outputText value="Compliance=#{medication.compliancePercentage}%" /><br />
				
										</p:tooltip>  
									</p:column>
									<p:column width="5%">
										<f:facet name="header">
											<h:outputText value="#{msg.formulary}" />
										</f:facet>
										<div align="left">
										<h:outputText value="#{msg.yes}"
											rendered="#{not empty medication.formularySymbol}" />
										<h:outputText value="#{msg.no}"
											rendered="#{empty medication.formularySymbol}" /></div>
									</p:column>
									<p:column width="5%">
										<f:facet name="header">
										<h:outputText value="#{msg.action}" />
                                            </f:facet>
                                            <div align="center">
										<p:commandButton value="#{msg.add_note}" rendered="#{userManageBean.rolePrivillegeUtil.isEnable('patient_addNote')}"
											actionListener="#{patientMedicineManageBean.checkPatientRowMedicine}" 
											oncomplete="medicationnotes.show()" update=":medicationNotesHeader">
											  <f:param name="drugName" value="#{medication.drugs}" />   
										</p:commandButton></div>
									</p:column>
									

								</p:dataTable>
								
                     <p:blockUI block="patMedication" trigger="patMedication">  
                               LOADING ...<br />
							<p:graphicImage value="./../../Images/ajax_loader.gif" width="40" height="40" />
						</p:blockUI>
				
</h:form>
</td>
</tr>
</table>
<!-- </fieldset> -->

<!--  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> DIALOG BOX FOR MEDICATION NOTES >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>.  -->

			<p:dialog widgetVar="medicationnotes" appendTo="@(body)" 
				modal="true"  height="200" 
				width="480">
				<f:facet name="header">
      					<h:outputText id="medicationNotesHeader" value="#{patientMedicineManageBean.patientMedicationData.drugName} : Medication Notes"  />
   					</f:facet>
				<h:form id="frm_notesDlg">
					<table>
						<tr>
							<td colspan="2" align="center"> <p:messages
									id="text_notes_message" autoUpdate="false" closable="true"></p:messages> 
								<p:inputTextarea id="text_notes" value="#{patientMedicineManageBean.patientMedicineNotes.notes}" maxlength="120" 
								            rows="5" cols="58" counter="counter" counterTemplate="{0} characters remaining." required="true" 	
								            requiredMessage=" Please Enter medicine notes." onkeypress="if (this.value.length > 120) { return false; }" >
									<p:ajax update="text_notes"></p:ajax>
								</p:inputTextarea></td></tr>
								<tr><td><h:outputText id="counter" /></td>
						</tr>
						<tr>
							<td align="center">
							<p:commandButton value="#{msg.submit}"   
							                 actionListener="#{patientMedicineManageBean.savePatientMedicationNotes}"  update=":frm_notes:table_notes,text_notes_message,text_notes" 
							                 ajax="true" oncomplete="if (args &amp;&amp; !args.validationFailed) medicationnotes.hide()" /> &nbsp;&nbsp;
									<p:commandButton  value="#{msg.reset}"   update=":frm_notesDlg:text_notes"  action="#{patientMedicineManageBean.patientMedicineNotes.clear}"/></td>
						</tr>
					</table>

				</h:form>
			</p:dialog>


		</p:layoutUnit>

	</p:layout>
	</f:view>
</h:body>
</html>
