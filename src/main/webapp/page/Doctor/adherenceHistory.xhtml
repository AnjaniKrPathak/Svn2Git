<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="../templates/ui.xhtml">

<h:body onload="#{dashBoardManageBean.setMedIndex()}">


	<f:view contentType="text/html">
		<h:head>
			<f:facet name="first">
				<meta http-equiv="X-UA-Compatible" content="EmulateIE8" />
				<meta content='text/html; charset=UTF-8' http-equiv="Content-Type" />
				<title><h:outputText value="#{msg.clinakos}" /></title>
				
			</f:facet>
			<style>
			   .greenCircleRedOutline
    {
    width:15px;
    height:15px;
    border-radius:15px;
    font-size:12px;
    color:#000000;
   /*  padding:2 0 0 2; */
   /*  line-height:10px; */
    text-align:center;
    vertical-align:middle;
    background:#007F00;
    border-style: solid;
    border-color: #FF4962;
    }
			</style>
			
		</h:head>

		<p:layout fullPage="true">

			<!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> DOCTOR HEADER >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>  -->
			<p:layoutUnit position="north" size="93" minSize="60">
				<ui:include src="doctorHeader.xhtml" />
			</p:layoutUnit>

			<!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> BOTTOM INCLUDE >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>  -->

			<p:layoutUnit id="bottom" position="south" size="24">
				<h:form>
					<ui:include src="../core/footer.xhtml"></ui:include>
				</h:form>
			</p:layoutUnit>

			<!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> LEFT INCLUDE >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>  -->

			  <p:layoutUnit id="left" position="west" size="0" closable="false" collapsible="true" minSize="0" style="border:none;">
				  <ui:include src="docMenu.xhtml">
				</ui:include>
				</p:layoutUnit>
			

			<!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> CENTER LAYOUT >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>  -->

			<p:layoutUnit position="center">
				<!-- <ui:include src="../Doctor/patientTabHeader.xhtml"></ui:include> -->
				
				
						<!-- <h:form id="medicineFormID"> -->
				<p:accordionPanel dynamic="true" activeIndex="1">
						<p:tab >
						<f:facet name="title">
						<h:outputText value="#{dashBoardManageBean.userLoginDetail.userId} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #{dashBoardManageBean.userLoginDetail.age} yo #{dashBoardManageBean.userLoginDetail.gender}"  rendered="#{userManageBean.rolePrivillegeUtil.isEnable('role_pharma_disabled_header')}"></h:outputText>
						<h:outputText value="#{dashBoardManageBean.userLoginDetail.firstName} #{dashBoardManageBean.userLoginDetail.lastName} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #{dashBoardManageBean.userLoginDetail.age} yo #{dashBoardManageBean.userLoginDetail.gender}" rendered="#{!(userManageBean.rolePrivillegeUtil.isEnable('role_pharma_disabled_header'))}"/>
						</f:facet>
						
							<p:outputPanel deferred="true" >
							<ui:include src="../Doctor/patientDetailsHeader.xhtml"></ui:include>
							</p:outputPanel>
						</p:tab>
					</p:accordionPanel>
					
				
					<h:form>
					  <table width="100%" class="secContentBorder" cellpadding="0" cellspacing="0">
					   <tr>
					    <td class="secHeadPart">Adherence History</td>
					   </tr>
					   <tr class="secContentBorder">
					    <td>
					    <p:dataTable
									value="#{batchInteractionBean.interactionHistoryData}"
									var="interactionHistoryObj" id="interactionHistoryId"
									scrollRows="5" emptyMessage="#{msg.noMedFound}"
									paginator="true"
									paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
									rowsPerPageTemplate="25,50,100">


									<p:column style="width:80%">
										<div align="left">
											<p:dataTable
												value="#{interactionHistoryObj.batchPatientMedsHistories}"
												var="batchPatientMedObj">
										  <p:ajax event="rowToggle" 
								listener="#{batchInteractionBean.onRowExpensionInteractionHistory}"/>
							
							
							
										
												<p:column headerText="Batch Pull Date">
													<h:outputText
														value="#{interactionHistoryObj.batchPullDate}">
														<f:convertDateTime pattern="#{msg.dateFormat}" />
													</h:outputText>
												</p:column>
												<p:column headerText="Drug">
													<h:outputText value="#{batchPatientMedObj.drugName}"></h:outputText>
												</p:column>
											
												<!-- <p:column headerText="Formulary">
										<h:outputText value="#{batchPatientMedObj.formularyText}"></h:outputText>
										</p:column> -->
												<p:column>
													<f:facet name="header">
														<h:outputText value="#{msg.compliance}" />
													</f:facet>

													<center>
														<h:panelGroup
															rendered="#{batchPatientMedObj.adherenceScore gt 100}"
															layout="block" styleClass="greenCircleRedOutline"
															id="complianceGt100Id">

															<p:tooltip for="complianceGt100Id" showEffect="clip"
																hideEffect="explode">
																<h:outputText value="Compliance=100%" />
																<br />

															</p:tooltip>
														</h:panelGroup>
													</center>

													<center>
														<h:graphicImage value="./../../Images/green1.jpg"
															height="20px" id="complianceForGreen" width="20px"
															rendered="#{batchPatientMedObj.adherenceScore gt 80 and batchPatientMedObj.adherenceScore le 100}" />
													</center>

													<p:tooltip for="complianceForGreen" showEffect="clip"
														hideEffect="explode">

														<!--  <h:outputText value="#{medDetail.drugs}" /><br />  -->
														<h:outputText
															value="Compliance=#{batchPatientMedObj.adherenceScore}%" />
														<br />
													</p:tooltip>

													<center>
														<h:graphicImage value="./../../Images/orange1.jpg"
															height="20px" width="20px" id="complianceForOrange"
															rendered="#{batchPatientMedObj.adherenceScore gt 60 and  batchPatientMedObj.adherenceScore le 80}" />
													</center>

													<p:tooltip for="complianceForOrange" showEffect="clip"
														hideEffect="explode">

														<h:outputText
															value="Compliance=#{batchPatientMedObj.adherenceScore}%" />
														<br />

													</p:tooltip>


													<center>
														<h:outputText value="N/A" id="complianceForwhite"
															width="20px"
															rendered="#{batchPatientMedObj.adherenceScore eq 0}" />
														<!-- <h:outputText value="No History Available" /> -->
													</center>
													<center>
														<h:graphicImage value="./../../Images/red1.jpg"
															height="20px" id="complianceForRed" width="20px"
															rendered="#{batchPatientMedObj.adherenceScore gt 0 and batchPatientMedObj.adherenceScore le 60}" />
														<!-- <h:outputText value="No History Available" /> -->
													</center>



													<p:tooltip for="complianceForRed" showEffect="clip"
														hideEffect="explode">
														<h:outputText
															value="Compliance=#{batchPatientMedObj.adherenceScore}%" />
														<br />

													</p:tooltip>

													<p:tooltip for="complianceForwhite" showEffect="clip"
														hideEffect="explode">
														<h:outputText
															value="Compliance=#{batchPatientMedObj.adherenceScore}%" />
														<br />

													</p:tooltip>
												</p:column>

											</p:dataTable>
										</div>
									</p:column>

								</p:dataTable></td>
					   </tr>
					 
					   
					  </table>
					  
					  
					</h:form>
								


			
			</p:layoutUnit>

			<!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> CENTER LAYOUT ENDS  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>  -->

		</p:layout>

	</f:view>

</h:body>
</html>
