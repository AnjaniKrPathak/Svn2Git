<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" >

		<h:head>
			<link type="text/css" rel="stylesheet" href="../../CSS/style.css" />
			 <script src="tabmenu/subModal.js" type="text/javascript"></script> 
			<script type="text/javascript" >
			function hidePopForClinic(xhr,status,args){
				
				if(args.pageName == "overViewFilter"){
					window.parent.parent.location.assign("overViewFilter.jsf");
					window.close();
				}else if(args.pageName=="psychopharm"){
					window.parent.parent.location.assign("psychopharm.jsf");
					window.close();
					
				} 
				/* console.log("URL to redirect "+args.pageName)
				window.parent.parent.location.assign(args.pageName);
				window.close(); */
			}
			</script>
		</h:head>
		<h:body styleClass="mypanel">
		<p:layoutUnit >
	<h:form>
		<table width="100%">
			<tr>
				<td><h:outputText id="quickPrecribePsychopharmId"
						value="#{patientMedicineManageBean.patientMedicationData.drugs}" />
				</td>
				<td align="right">
				<p:commandButton action="#{patientMedicineManageBean.returnToPsychopharmDosingGuideline}" value="#{msg.dosingGuidelineWizard}"  immediate="true" process="@this">
				</p:commandButton>
				<p:commandButton value="Clinic To Dose" action="#{patientMedicineManageBean.sendToClinic}" oncomplete="hidePopForClinic(xhr,status,args)" immediate="true"/>
				</td>
			</tr>
		</table>
			<p:messages id="messageUpdateForLithiumMeds" showDetail="false"
				style="color:#FF0000;" closable="true" showSummary="true" />


			<p:outputPanel deferred="true" deferredMode="visible"
				rendered="#{patientMedicineManageBean.drugInteractions.size() ge 1 }">

				<table>
					<tr>
						<td><h:outputText value="Drug-drug interaction:"
								style="font-weight:bold;color:red;" /></td>

						<td><p:commandLink id="growId"
								style="text-decoration:underline;"
								onmouseover="showDetails.show();"
								onmouseout="showDetails.hide();">

								<h:outputText
									value="#{patientMedicineManageBean.drugInteractions.size()}"
									escape="false" style="color:red;" />		
								             &nbsp;<h:outputText value="Interactions detected"
									style="color:red;" />

							</p:commandLink> <p:dialog widgetVar="showDetails" showEffect="clip"
								hideEffect="clip" width="600" closable="false" modal="false"
								appendTo="@(body)">

								<f:facet name="header">
									<h:outputText value="Drug-drug interaction"></h:outputText>
								</f:facet>
								<p:dataTable
									value="#{patientMedicineManageBean.drugInteractions}"
									var="drugInteractionsDetail" emptyMessage="#{msg.noMedFound}">

									<p:column styleClass="wrap">
										<f:facet name="header">
											<h:outputText value="Drug" />
										</f:facet>
										<h:outputText value="#{drugInteractionsDetail.drug1}" />
									</p:column>



									<p:column styleClass="wrap">
										<f:facet name="header">
											<h:outputText value="Clinical Effects " />
										</f:facet>
										<h:outputText
											value="#{drugInteractionsDetail.clinicalEffects}" />
									</p:column>

									<p:column styleClass="wrap">
										<f:facet name="header">
											<h:outputText value="Severity Level" />
										</f:facet>
										<h:outputText value="#{drugInteractionsDetail.severityLevel}" />
									</p:column>

								</p:dataTable>




							</p:dialog></td>
						<td><h:outputText value="Hightest Severity:"
								style="font-weight:bold;color:red;" />&nbsp; <h:outputText
								value="#{patientMedicineManageBean.highestServity}"
								rendered="#{patientMedicineManageBean.highestServity eq 'High'}"
								style="text-decoration:none;color:red;" /> <h:outputText
								value="#{patientMedicineManageBean.highestServity}"
								rendered="#{patientMedicineManageBean.highestServity eq 'Medium'}"
								style="text-decoration:none;color:orange;" /> <h:outputText
								value="#{patientMedicineManageBean.highestServity}"
								rendered="#{patientMedicineManageBean.highestServity eq 'Low'}"
								style="text-decoration:none;color:green;" /></td>
					</tr>
				</table>
			</p:outputPanel>

			<p:outputPanel deferred="true" deferredMode="visible"
				rendered="#{patientMedicineManageBean.drugAllergyInteractions.size() ge 1}">

				<table>
					<tr>

						<td><h:outputText value="drug-allergy interaction:"
								style="font-weight:bold;color:red;" /></td>
						<td><p:commandLink id="grow1Id"
								style="text-decoration:underline;"
								onmouseover="showDetails1.show();"
								onmouseout="showDetails1.hide();">
								<h:outputText
									value="#{patientMedicineManageBean.drugAllergyInteractions.size()}"
									escape="false" style="color:red;" />		
								           &nbsp;  <h:outputText value="Interactions detected"
									style="color:red;" />

							</p:commandLink> <p:dialog widgetVar="showDetails1" showEffect="clip"
								hideEffect="clip" width="600" closable="false" modal="false"
								appendTo="@(body)">

								<f:facet name="header">
									<h:outputText value="Drug-allergy interaction"></h:outputText>
								</f:facet>

								<p:dataTable
									value="#{patientMedicineManageBean.drugAllergyInteractions}"
									var="drugAllergyInteractionsDetail" emptyMessage="#{msg.noMedFound}">

									<p:column styleClass="wrap">
										<f:facet name="header">
											<h:outputText value="Allergy Interaction Text" />
										</f:facet>
										<h:outputText
											value="#{drugAllergyInteractionsDetail.interactionText}" />
									</p:column>


								</p:dataTable>



							</p:dialog></td>
						<td><h:outputText value="Hightest Severity:"
								style="font-weight:bold;color:red;" />&nbsp; <h:outputText
								value="#{patientMedicineManageBean.highestServityForAllergy}"
								rendered="#{patientMedicineManageBean.highestServityForAllergy eq 'High'}"
								style="text-decoration:none;color:red;" /> <h:outputText
								value="#{patientMedicineManageBean.highestServityForAllergy}"
								rendered="#{patientMedicineManageBean.highestServityForAllergy eq 'Medium'}"
								style="text-decoration:none;color:orange;" /> <h:outputText
								value="#{patientMedicineManageBean.highestServityForAllergy}"
								rendered="#{patientMedicineManageBean.highestServityForAllergy eq 'Low'}"
								style="text-decoration:none;color:green;" /></td>
					</tr>
				</table>
			</p:outputPanel>

			<p:outputPanel deferred="true" deferredMode="visible"
				rendered="#{patientMedicineManageBean.drugDiseaseDetailsInteractions.size() ge 1}">
				<table>
					<tr>

						<td><h:outputText value="Drug Disease:"
								style="font-weight:bold;color:red;" /></td>
						<td><p:commandLink id="grow2Id"
								style="text-decoration:underline;">
								<h:outputText
									value="#{patientMedicineManageBean.drugDiseaseDetailsInteractions.size()}"
									escape="false" style="color:red;" />		
								            &nbsp; <h:outputText value="Interactions detected"
									style="color:red;" />

							</p:commandLink> <p:tooltip for="grow2Id" showEffect="clip"
								style="width:40%; position:relative; margin-left:-8%;">


								<p:dataTable
									value="#{patientMedicineManageBean.drugDiseaseDetailsInteractions}"
									var="drugDiseaseDetailsInteractionsDetail" emptyMessage="#{msg.noMedFound}">

									<f:facet name="header">
										<h:outputText value="Drug Disease"></h:outputText>
									</f:facet>
									<p:column styleClass="wrap">
										<f:facet name="header">
											<h:outputText value="Drug Name" />
										</f:facet>
										<h:outputText
											value="#{drugDiseaseDetailsInteractionsDetail.drugName}" />
									</p:column>

									<p:column styleClass="wrap">
										<f:facet name="header">
											<h:outputText value="Direct Condition" />
										</f:facet>
										<h:outputText
											value="#{drugDiseaseDetailsInteractionsDetail.directCondition}" />
									</p:column>

									<p:column styleClass="wrap">
										<f:facet name="header">
											<h:outputText value="Severity Level Text" />
										</f:facet>
										<h:outputText
											value="#{drugDiseaseDetailsInteractionsDetail.severityLevelText}" />
									</p:column>

									<p:column styleClass="wrap">
										<f:facet name="header">
											<h:outputText value="Disease Relation" />
										</f:facet>
										<h:outputText
											value="#{drugDiseaseDetailsInteractionsDetail.diseaseRelationText}" />
									</p:column>


								</p:dataTable>

							</p:tooltip></td>
						<td><h:outputText value="Hightest Severity:"
								style="font-weight:bold;color:red;" />&nbsp; <!-- <h:outputText value="#{patientMedicineManageBean.highestServityForDisease}" /> -->

							<h:outputText
								value="#{patientMedicineManageBean.highestServityForDisease}"
								rendered="#{patientMedicineManageBean.highestServityForDisease eq 'High'}"
								style="text-decoration:none;color:red;" /> <h:outputText
								value="#{patientMedicineManageBean.highestServityForDisease}"
								rendered="#{patientMedicineManageBean.highestServityForDisease eq 'Medium'}"
								style="text-decoration:none;color:orange;" /> <h:outputText
								value="#{patientMedicineManageBean.highestServityForDisease}"
								rendered="#{patientMedicineManageBean.highestServityForDisease eq 'Low'}"
								style="text-decoration:none;color:green;" /></td>
					</tr>
				</table>

			</p:outputPanel>

			<p:outputPanel deferred="true" deferredMode="visible"
				rendered="#{patientMedicineManageBean.pharmacogenomicInteractionDetailList.size() ge 1}">


				<table>
					<tr>

						<td><h:outputText value="Pharmacogenomics:"
								style="font-weight:bold;color:red;" /></td>
						<td><p:commandLink id="grow3Id"
								style="text-decoration:underline;"
								onmouseover="showDetails3.show();"
								onmouseout="showDetails3.hide();">
								<h:outputText
									value="#{patientMedicineManageBean.pharmacogenomicInteractionDetailList.size()}"
									escape="false" style="color:red;" />		
								             &nbsp;<h:outputText value="Interactions detected"
									style="color:red;" />
							</p:commandLink> <p:dialog widgetVar="showDetails3" showEffect="clip"
								hideEffect="clip" width="600" closable="false" modal="false"
								appendTo="@(body)">

								<f:facet name="header">
									<h:outputText value="Pharmacogenomics"></h:outputText>
								</f:facet>

								<p:dataTable
									value="#{patientMedicineManageBean.pharmacogenomicInteractionDetailList}"
									var="pharmacogenomicInteractionDetail" emptyMessage="#{msg.noMedFound}">

									<p:column styleClass="wrap">
										<f:facet name="header">
											<h:outputText value="Gene" />
										</f:facet>
										<h:outputText
											value="#{pharmacogenomicInteractionDetail.gene1}" />
									</p:column>

									<p:column styleClass="wrap">
										<f:facet name="header">
											<h:outputText value="Phenotype" />
										</f:facet>
										<h:outputText
											value="#{pharmacogenomicInteractionDetail.phenotype}" />
									</p:column>

									<p:column styleClass="wrap">
										<f:facet name="header">
											<h:outputText value="Impact" />
										</f:facet>
										<h:outputText
											value="#{pharmacogenomicInteractionDetail.impact}" />
									</p:column>

									<p:column styleClass="wrap">
										<f:facet name="header">
											<h:outputText value="Implications" />
										</f:facet>
										<h:outputText
											value="#{pharmacogenomicInteractionDetail.implications}" />
									</p:column>

									<p:column styleClass="wrap">
										<f:facet name="header">
											<h:outputText value="Recommendation" />
										</f:facet>
										<h:outputText
											value="#{pharmacogenomicInteractionDetail.recommendation}" />
									</p:column>


								</p:dataTable>



							</p:dialog></td>

						<td><h:outputText value="Hightest Severity:"
								style="font-weight:bold;color:red;" />&nbsp; <h:outputText
								value="#{patientMedicineManageBean.highestServityForpharmacogenomic}"
								rendered="#{patientMedicineManageBean.highestServityForpharmacogenomic eq 'High'}"
								style="text-decoration:none;color:red;" /> <h:outputText
								value="#{patientMedicineManageBean.highestServityForpharmacogenomic}"
								rendered="#{patientMedicineManageBean.highestServityForpharmacogenomic eq 'Medium'}"
								style="text-decoration:none;color:orange;" /> <h:outputText
								value="#{patientMedicineManageBean.highestServityForpharmacogenomic}"
								rendered="#{patientMedicineManageBean.highestServityForpharmacogenomic eq 'Low'}"
								style="text-decoration:none;color:green;" /></td>
					</tr>
				</table>

			</p:outputPanel>
			
				<ui:include src="precautions.xhtml">
				
				</ui:include>
			<!-- for formulary detail started -->

			<p:outputPanel
				rendered="#{!(patientMedicineManageBean.patientMedicationData.formularySymbol eq '')}">
				<table>
					<tr>
						<td><h:outputText value="Formulary:"
								style="font-weight:bold;color:red;" />&nbsp; <h:outputText
								value="#{patientMedicineManageBean.patientMedicationData.formularyText}"
								style="font-weight:bold;color:red;"></h:outputText></td>
					</tr>

				</table>
			</p:outputPanel>
			<!-- for formulary detail End -->
			<hr />

			<br />

			<table width="100%">
				<tr align="center">
					<td><h:outputText value="Strength" styleClass="outputtext" />
						<h:outputText value="*" styleClass="mandatoryField" /></td>

					<td></td>

					<td><h:outputText value="unit" styleClass="outputtext" /> <h:outputText
							value="*" styleClass="mandatoryField" /></td>

					<td><h:outputText value="Dosage form" styleClass="outputtext" />
						<h:outputText value="*" styleClass="mandatoryField" /></td>

					<td><h:outputText value="Route" styleClass="outputtext" /> <h:outputText
							value="*" styleClass="mandatoryField" /></td>

					<td><h:outputText value="Regimen" styleClass="outputtext" /> <h:outputText
							value="*" styleClass="mandatoryField" /></td>

					<td><h:outputText value="PRN" styleClass="outputtext" /></td>

					<td><h:outputText value="Additional Sig"
							styleClass="outputtext" /></td>
				</tr>



				<tr>
					<td><p:selectOneMenu required="true"
							requiredMessage="Please Select Strength"
							value="#{patientMedicineManageBean.patientMedicationData.strengths}"
							style="width:120px;">


							<f:selectItems
								value="#{patientMedicineManageBean.doseDetailList}"
								var="doseList" itemLabel="#{doseList.dose}"
								itemValue="#{doseList.dose}" />
							<p:ajax event="change" listener="#{patientMedicineManageBean.updateDoasgeForm}" update="dosageFormLithiumQuickPrescribeId"></p:ajax>
						</p:selectOneMenu></td>

					<td><p:commandLink
							rendered="#{patientMedicineManageBean.patientMedicationData.genericName eq 'Warfarin' || patientMedicineManageBean.patientMedicationData.genericName eq 'warfarin'}"
							actionListener="#{patientMedicineManageBean.findWarfarinDoseCalculator}"
							immediate="true" oncomplete="warfarinDoseCalculator.show()">
							<p:graphicImage value="../../Images/doseCal.jpg"
								style="width:34px;height:34px;" />
							<f:param value="#{dashBoardManageBean.userLoginDetail.age}"
								name="patientAge"></f:param>
						</p:commandLink></td>

					<td><p:selectOneMenu required="true"
							requiredMessage="Please insert unit"
							value="#{patientMedicineManageBean.patientMedicationData.unit}"
							style="width:100px;">

							<f:selectItems
								value="#{patientMedicineManageBean.unitSummaryList}"
								var="unitList" itemLabel="#{unitList.unit}"
								itemValue="#{unitList.unit}" />

							<p:ajax
								listener="#{patientMedicineManageBean.calculateTotalDispence}"
								update="dispenceNumber"></p:ajax>
						</p:selectOneMenu></td>

					<td><!-- <p:inputText style="width:80px;"
							value="#{patientMedicineManageBean.patientMedicationData.dosageForm}"
							readonly="true"></p:inputText> -->
							<p:selectOneMenu required="true" requiredMessage="Please insert Dosage form"
															value="#{patientMedicineManageBean.patientMedicationData.dosageForm}"
															style="width:122px;" id="dosageFormLithiumQuickPrescribeId">
															<!-- <f:selectItem itemLabel="#{patientMedicineManageBean.patientMedicationData.dosageForm}" itemValue="#{patientMedicineManageBean.patientMedicationData.dosageForm}" /> -->
												<f:selectItems value="#{patientMedicineManageBean.dosageForms}"
															var="dosageObj" itemLabel="#{dosageObj}" itemValue="#{dosageObj}" />
													<!-- <f:selectItems value="#{patientMedicineManageBean.unitDetailsList}"
															var="unitList" itemLabel="#{unitList.unitName}" itemValue="#{unitList.unitName}" /> -->
													</p:selectOneMenu>
							</td>

					<td>
					<p:selectOneMenu  required="true" requiredMessage="Please insert Route"
															value="#{patientMedicineManageBean.patientMedicationData.byRoute}"
															style="width:122px;">
															<f:selectItem itemLabel="#{patientMedicineManageBean.patientMedicationData.byRoute}" itemValue="#{patientMedicineManageBean.patientMedicationData.byRoute}" />
															<f:selectItems value="#{patientMedicineManageBean.routeDetailsList}"
																var="routeDetailList" itemLabel="#{routeDetailList.routeName}" itemValue="#{routeDetailList.routeName}" />
												</p:selectOneMenu>
												
					
					<!-- <p:inputText style="width:80px;"
							value="#{patientMedicineManageBean.patientMedicationData.byRoute}"
							readonly="true"></p:inputText> --></td>

					<td><p:selectOneMenu  required="true"
							requiredMessage="Please Select Regimen"
							value="#{patientMedicineManageBean.patientMedicationData.directions}"
							style="width:145px;">

							<f:selectItem itemLabel="" itemValue="" />

							<f:selectItems value="#{patientMedicineManageBean.regimenList}"
								var="regimen" itemLabel="#{regimen}" itemValue="#{regimen}" />

							<p:ajax
								listener="#{patientMedicineManageBean.calculateTotalDispence}"
								update="dispenceNumber"></p:ajax>
						</p:selectOneMenu></td>

					<td><p:selectBooleanCheckbox
							value="#{patientMedicineManageBean.patientMedicationData.prn}" />
					</td>

					<td><p:inputText
							value="#{patientMedicineManageBean.patientMedicationData.additionalSig}"
							style="width:80px;"></p:inputText></td>
				</tr>

			</table>

			<br />
			<br />

			<table width="100%">
				<tr align="center">
					<td><h:outputText value="Allow Substitution"
							styleClass="outputtext" /></td>

					<td><h:outputText value="Dispense" styleClass="outputtext" />
						<h:outputText value="*" styleClass="mandatoryField" /></td>

					<td><h:outputText value="Days Supply" styleClass="outputtext" />
						<h:outputText value="*" styleClass="mandatoryField" /></td>

					<td><h:outputText value="Refills" styleClass="outputtext" /> <h:outputText
							value="*" styleClass="mandatoryField" /></td>
							<td>
						<h:outputText value="DAW / DNS" styleClass="outputtext"/>
					</td>
					&nbsp;
					<td>
						<h:outputText value="One Time" styleClass="outputtext"/>
					</td>
					<!-- &nbsp;
					<td>
						<h:outputText value="2nd rx 90 Day" styleClass="outputtext"/>
					</td>
					&nbsp;
					<td>
						<h:outputText value="Save this sig and add to Doctor's List" styleClass="outputtext"/>
					</td> -->

				</tr>


				<tr>
					<td align="center"><p:selectBooleanCheckbox
							value="#{patientMedicineManageBean.patientMedicationData.allowSubstitution}" />
					</td>

					<td><p:inputText style="width:50px;" converter="#{Integer}"
							maxlength="3" id="dispenceNumber"
							value="#{patientMedicineManageBean.patientMedicationData.quantity}">
							<f:convertNumber pattern="#,###" integerOnly="true"
								minFractionDigits="3" maxIntegerDigits="3" type="number" />
						</p:inputText></td>

					<td><p:selectOneMenu
							value="#{patientMedicineManageBean.patientMedicationData.daySupply}"
							style="width:80px;">

							<f:selectItems value="#{patientMedicineManageBean.daySupplyList}"
								var="daySupplyDetailList" itemLabel="#{daySupplyDetailList}"
								itemValue="#{daySupplyDetailList}" />

							<p:ajax
								listener="#{patientMedicineManageBean.calculateTotalDispence}"
								update="dispenceNumber"></p:ajax>

						</p:selectOneMenu> <!-- <p:inputText value="#{patientMedicineManageBean.patientMedicationData.daySupply}" style="width:80px;"></p:inputText> -->
					</td>

					<td><p:selectOneMenu 
							value="#{patientMedicineManageBean.patientMedicationData.reffils}"
							style="width:60px;">

							<f:selectItems
								value="#{patientMedicineManageBean.refillDetailsList}"
								var="refillList" itemLabel="#{refillList}"
								itemValue="#{refillList}" />
							<p:ajax event="change" update="oneTimeQuickPrescribeId"></p:ajax>
						</p:selectOneMenu></td>
						<td align="center">
						<p:selectBooleanCheckbox value="#{patientMedicineManageBean.patientMedicationData.daw_dns}" />  
					</td>
					<td align="center">
						<p:selectBooleanCheckbox value="#{patientMedicineManageBean.patientMedicationData.one_Time}"  disabled="#{patientMedicineManageBean.patientMedicationData.reffils > 0 }" id="oneTimeQuickPrescribeId"/>  
					</td>
				<!-- 	<td align="center">
						<p:selectBooleanCheckbox value="#{patientMedicineManageBean.patientMedicationData.secondrx_90days}" />  
					</td>
					<td align="center">
						<p:selectBooleanCheckbox value="#{patientMedicineManageBean.patientMedicationData.savetodoctorlist}" />  
					</td> -->
				</tr>




			</table>

			<table align="right">
				<tr>



					<td align="right"><p:commandButton value="#{msg.cancel}"
							actionListener="#{patientMedicineManageBean.closePsychopharmView}"
							immediate="true" /></td>
					<td align="right"><p:commandButton value="#{msg.done}"
							actionListener="#{patientMedicineManageBean.addMedicine_Psychopharm}" action="#{patientMedicineManageBean.returnToView}"
							update="messageUpdateForLithiumMeds"  oncomplete="hidePopForClinic(xhr,status,args)">

							<p:ajax process="@form"></p:ajax>
						</p:commandButton></td>
					<td></td>
				</tr>
			</table>

		</h:form>
	
</p:layoutUnit>	
</h:body>

</html>
