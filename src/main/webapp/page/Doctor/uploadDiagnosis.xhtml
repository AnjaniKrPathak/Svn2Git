<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="../templates/ui.xhtml">
<h:body onload="#{dashBoardManageBean.reset()}">
	<f:view contentType="text/html">
		<h:head>
			<f:facet name="first">
				<meta http-equiv="X-UA-Compatible" content="EmulateIE8" />
				<meta content='text/html; charset=UTF-8' http-equiv="Content-Type" />
				<title><h:outputText value="#{msg.clinakos}" /></title>
			</f:facet>
			<link type="text/css" rel="stylesheet" href="../../CSS/style.css" />
			<script type="text/javascript">
     </script>
		</h:head>
		<p:layout fullPage="true">

			<!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> DOCTOR HEADER >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>  -->
			<p:layoutUnit position="north" size="85" minSize="60">
				<ui:include src="doctorheader2.xhtml" />
			</p:layoutUnit>

			<!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> BOTTOM INCLUDE >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>  -->

			<p:layoutUnit id="bottom" position="south" size="27">
				<h:form>
					<ui:include src="../core/footer.xhtml"></ui:include>
				</h:form>
			</p:layoutUnit>

			<!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> LEFT INCLUDE >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>  -->

			<p:layoutUnit id="left" position="west" size="0" closable="false"
				collapsible="true" minSize="0" style="border:none;">
				<h:form class="tab">
					<ui:include src="doctor_profile_leftmenu.xhtml">
					</ui:include>
				</h:form>
			</p:layoutUnit>

			<p:layoutUnit position="center">
				<h:form id="addGroupFrm">
					<p:growl id="messages" showDetail="true" />
					<h:outputText value="Upload Diagnosis :" styleClass="outputtext" />
					  <p:accordionPanel id="panel_addGroup" multiple="true">
                         <p:tab title="Step 1: Select File">
                            <p:fileUpload mode="advanced"
								fileUploadListener="#{dashBoardManageBean.uploadDiagnosisFile}"
								allowTypes="/(\.|\/)(csv)$/" update=":addGroupFrm:messages" />
                         </p:tab>
                         <p:tab title="Step 2: Validate Data">
	                           <table>
	                              <tr style="height:60%;">
	                                <td>
	                                  <p:commandButton value="Validate File Data"
										actionListener="#{dashBoardManageBean.checkFormatOfDiagnosisUploadedCSVData}"
										update="tbl_uploadedErrorMsgs" ajax="false" />
										<br />
										<br />
	                                </td>
	                              </tr>
	                              <tr>
	                                <td>
	                                  <p:dataTable
											id="tbl_uploadedErrorMsgs"
											value="#{dashBoardManageBean.diagnosisUploadedDataErrorList}"
											var="diagnosisUploadedError" paginator="true" paginatorAlwaysVisible="false" paginatorPosition="bottom"
											rows="10" rendered="#{dashBoardManageBean.diagnosisUploadedDataErrorList ne null}">
											<f:facet name="header">
												<div align="left">
													<h:outputText value="Issues with Load"
														styleClass="outputtext" />
												</div>
											</f:facet>
											<p:column headerText="Source Patient Id">
												<h:outputText value="#{diagnosisUploadedError.externalId}" />
												<h:outputText value="#{diagnosisUploadedError.clinakosId}" />
											</p:column>
											<p:column headerText="Message">
												<h:outputText value="#{diagnosisUploadedError.errorMessage}"></h:outputText>
											</p:column>
										</p:dataTable>
	                                </td>
	                              </tr>
	                              <tr>
	                                <td>
	                                  <h:outputText value="Data Validation: Success" rendered="#{dashBoardManageBean.diagnosisUploadedDataErrorList eq null}"></h:outputText>
	                                </td>
	                              </tr>
	                           </table>
                         </p:tab>
                         <p:tab title="Step 3 : Save Data" disabled="#{dashBoardManageBean.enableDiagnosisUploadButton eq false}">
                             <p:commandButton id="btn_saveDiagnosis" value="Save Diagnosis Data"
								actionListener="#{dashBoardManageBean.saveDiagnosisData}"
								update=":addGroupFrm:messages" ajax="true" />
                         </p:tab>	
                         <p:blockUI block="panel_addGroup" trigger="btn_saveDiagnosis">  
                        	LOADING DATA ...<br />
							<p:graphicImage value="./../../Images/ajax_loader.gif" width="40"
							height="40" />
					   </p:blockUI>
					  </p:accordionPanel>
				</h:form>
			</p:layoutUnit>
		</p:layout>
	</f:view>
</h:body>
</html>
